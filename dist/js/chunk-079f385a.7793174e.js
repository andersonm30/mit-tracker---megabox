(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-079f385a"],{"047a":function(e,t,a){"use strict";var c=a("7a23"),l=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("91c0")),o=a("c349"),r=a("cf2e");const n={style:{display:"flex"}},d={style:{flex:"1"}},i={style:{flex:"1","margin-left":"5px"}},s={style:{padding:"4px"}},u={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"5px","margin-bottom":"15px",height:"calc(70vh - 200px)"}},b={style:{padding:"7px",flex:"1"}},O={style:{padding:"2px",flex:"1"}},p=["onChange","value"],j=["onClick"],m=Object(c["createElementVNode"])("i",{class:"fas fa-minus-square"},null,-1),f=[m];var v={__name:"tab-attributes",props:["modelValue","type"],emits:["update:modelValue"],setup(e,{emit:t}){const a=e,m={device:["lockOnExit","speedLimit"],user:["telegramChatId"],geofence:["color","lockOnExit","speedLimit"]},v=Object(c["ref"])({name:"",value:""}),V=Object(c["ref"])(m),N=Object(c["computed"])(()=>V.value[a.type]||[]),x=(e,c)=>{let l=a.modelValue;l[e]=c.srcElement.value,t("update:modelValue",l)},y=Object(c["computed"])(()=>{let e={},t=a.modelValue?Object.keys(a.modelValue):[];for(var c of t)c.match("tarkan.")||(e[c]=a.modelValue[c]);return e}),g=()=>{let e=a.modelValue;e[v.value.name]=v.value.value,t("update:modelValue",e),v.value={name:"",value:""}},h=e=>{delete a.modelValue[e],t("update:modelValue",a.modelValue)};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(Object(c["unref"])(l["c"]),{modelValue:v.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value.name=e),"value-key":"id","allow-create":"",filterable:"",placeholder:e.KT("attribute.attribute"),size:"large","no-match-text":e.KT("NO_MATCH_TEXT"),"no-data-text":e.KT("NO_DATA_TEXT")},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(N),t=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(l["a"]),{key:t,label:e.$t("attribute."+t),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","no-match-text","no-data-text"])]),Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{modelValue:v.value.value,"onUpdate:modelValue":t[1]||(t[1]=e=>v.value.value=e),placeholder:"Valor do Atributo"},null,8,["modelValue"])]),Object(c["createElementVNode"])("div",s,[Object(c["createVNode"])(Object(c["unref"])(r["a"]),{type:"primary",onClick:t[2]||(t[2]=e=>g()),size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Adicionar Atributo")]),_:1})])]),Object(c["createElementVNode"])("div",u,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(y),(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:a,style:{display:"flex","border-bottom":"silver 1px dotted"}},[Object(c["createElementVNode"])("div",b,Object(c["toDisplayString"])(e.$t("attribute."+a)),1),Object(c["createElementVNode"])("div",O,[Object(c["createElementVNode"])("input",{style:{width:"100%",border:"silver 1px solid",height:"23px","border-radius":"5px",padding:"2px"},onChange:e=>x(a,e),value:t},null,40,p)]),Object(c["createElementVNode"])("div",{style:{padding:"5px","padding-right":"10px","font-size":"18px"},onClick:e=>h(a)},f,8,j)]))),128))])],64))}};const V=v;t["a"]=V},"07d7":function(e,t,a){},"0a69":function(e,t,a){"use strict";a("771d"),a("acdd")},"48f4":function(e,t,a){"use strict";a("5481")},5481:function(e,t,a){},6123:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("5502"),o=a("c84e");const r=e=>(Object(c["pushScopeId"])("data-v-4e01e4e4"),e=e(),Object(c["popScopeId"])(),e),n={style:{display:"flex","justify-content":"space-between","align-content":"space-between"}},d=r(()=>Object(c["createElementVNode"])("div",{style:{width:"30%"}},null,-1)),i=r(()=>Object(c["createElementVNode"])("i",{class:"fas fa-folder-plus"},null,-1)),s=r(()=>Object(c["createElementVNode"])("i",{class:"fas fa-plus"},null,-1)),u={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"20px",height:"calc(100vh - 200px)"}},b=r(()=>Object(c["createElementVNode"])("div",{class:"device"},[Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",width:"calc(60% + 3.5px)"}},"Titulo"),Object(c["createElementVNode"])("div",{class:"icons",style:{"font-size":"12px","font-weight":"100",padding:"5px"}},"Estado")],-1)),O={style:{"overflow-x":"hidden","overflow-y":"scroll",height:"calc(100vh - 230px)"}},p=["onClick","set"],j={class:"name"},m={key:0,class:"icons"},f=r(()=>Object(c["createElementVNode"])("i",{class:"fas fa-key"},null,-1)),v=[f],V=r(()=>Object(c["createElementVNode"])("i",{class:"fas fa-lock"},null,-1)),N=[V],x=r(()=>Object(c["createElementVNode"])("i",{class:"fas fa-signal"},null,-1)),y=[x];var g={__name:"users",setup(e){const t=Object(l["b"])(),a=Object(c["ref"])(""),r=Object(c["ref"])(null),f=Object(c["computed"])(()=>""===a.value?t.state.geofences.fenceList:t.state.geofences.fenceList.filter(e=>e.name.toLowerCase().match(a.value.toLowerCase())));return(e,l)=>{const V=Object(c["resolveComponent"])("el-input"),x=Object(c["resolveComponent"])("el-button"),g=Object(c["resolveComponent"])("el-tooltip");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{ref_key:"editGeofenceRef",ref:r},null,512),Object(c["createElementVNode"])("div",n,[d,Object(c["createVNode"])(V,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),placeholder:"Buscar Geocerca",style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue"]),Object(c["createVNode"])(g,{effect:"dark",content:"Cadastrar Grupo",placement:"bottom"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(x,{type:"primary",plain:""},{default:Object(c["withCtx"])(()=>[i]),_:1})]),_:1}),Object(c["createVNode"])(g,{effect:"dark",content:"Cadastrar Geocerca",placement:"bottom"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(x,{type:"primary",onClick:l[1]||(l[1]=e=>r.value.newGeofence())},{default:Object(c["withCtx"])(()=>[s]),_:1})]),_:1})]),Object(c["createElementVNode"])("div",u,[b,Object(c["createElementVNode"])("div",O,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(f),a=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:a.id,class:"device",onClick:t=>e.markerClick(a),set:e.position=Object(c["unref"])(t).getters["devices/getPosition"](a.positionId)},[Object(c["createElementVNode"])("div",j,Object(c["toDisplayString"])(a.name),1),e.position?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",m,[Object(c["createElementVNode"])("div",{style:Object(c["normalizeStyle"])({color:e.position.attributes.ignition?"var(--text-blue)":""})},v,4),Object(c["createElementVNode"])("div",{style:Object(c["normalizeStyle"])({color:e.position.attributes.blocked?"red":""})},N,4),Object(c["createVNode"])(g,{content:"offline"===a.status?"Desconectado":e.position.attributes.rssi?"RSSI"+e.position.attributes.rssi:"Conectado"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",{style:Object(c["normalizeStyle"])({color:"offline"===a.status?"silver":""})},y,4)]),_:2},1032,["content"])])):Object(c["createCommentVNode"])("",!0)],8,p))),128))])])],64)}}},h=(a("e9d8"),a("6b0d")),C=a.n(h);const E=C()(g,[["__scopeId","data-v-4e01e4e4"]]);t["default"]=E},acdd:function(e,t,a){},c84e:function(e,t,a){"use strict";a("14d9");var c=a("7a23"),l=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("74fa"),a("47d6"),a("c9a1")),o=a("2295"),r=a("db9d"),n=a("cf2e"),d=a("e0ad"),i=a("d8e8"),s=a("c349"),u=a("047a"),b=a("5502");const O={style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},p={class:"modal-title"},j={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},m={style:{display:"flex","flex-direction":"row"}},f={style:{flex:"1"}},v={style:{"padding-top":"35px","margin-left":"10px"}};var V={__name:"edit-geofence",setup(e,{expose:t}){const a={name:"",type:"POLYGON",attributes:[]},V={id:0,name:"",description:"",area:"",calendarId:0,attributes:{}},N=Object(b["b"])(),x=Object(c["ref"])(!1),y=Object(c["ref"])("first"),g=Object(c["ref"])(""),h=Object(c["ref"])(a),C=()=>{l["a"].confirm("Deseja realmente excluir esta geocerca?","Tem certeza?").then(()=>{N.dispatch("geofences/delete",h.value.id).then(()=>{x.value=!1,Object(o["a"])({title:"Info",message:"Geocerca deletada com suceso.",type:"info"})})})},E=()=>{g.value="Cadastrar Geocerca",h.value=JSON.parse(JSON.stringify(a)),x.value=!0},k=e=>{g.value="Editar Geocerca",h.value=JSON.parse(JSON.stringify(a)),Object.assign(h.value,JSON.parse(JSON.stringify(e)));const t=G(e.area);console.log("Tudo certo"),console.log(t.type),console.log(e),h.value.type=t.type,"CIRCLE"===t.type&&l["a"].confirm("Deseja realmente Editar esta geocerca de Circulo,VOCÊ TERÁ QUE CRIAR A AREA DE NOVO!!","Tem certeza?"),N.commit("geofences/setParams",t.params),x.value=!0};t({newGeofence:E,editGeofence:k});const w=()=>{N.dispatch("geofences/enableEditing",h.value.type)},_=()=>{x.value=!1};var L=/\((.*?) (.*?),(.*?)\)/gi,I=/(\s?([-\d.]*)\s([-\d.]*),?)/gm,T=/(\s?([-\d.]*)\s([-\d.]*),?)/gm;const G=e=>{const t=e.split("(")[0].trim();if("LINESTRING"===t){const t=e.match(T);let a=[];return t.forEach(e=>{const t=e.trim().replace(",","").split(" ");2===t.length&&a.push(t)}),{type:"LINESTRING",params:a}}if("POLYGON"===t){const t=e.match(I);let a=[];return t.forEach(e=>{const t=e.trim().replace(",","").split(" ");2===t.length&&a.push(t)}),{type:"POLYGON",params:a}}return"CIRCLE"===t?{type:"CIRCLE",params:L.exec(e)}:{type:t}},S=()=>{const e=h.value.type,t=N.state.geofences.mapPointEditingParams;if("CIRCLE"===e)return"CIRCLE ("+t[0]+" "+t[1]+", "+t[2]+")";if("LINESTRING"===e){let e="LINESTRING (";return t.forEach(t=>{e+=t[0]+" "+t[1]+", "}),e=e.substring(0,e.length-2),e+=")",e}if("POLYGON"===e){let e="POLYGON((";return t.forEach(t=>{e+=t[0]+" "+t[1]+", "}),e=e.substring(0,e.length-2),e+="))",e}},B=()=>{const e=JSON.parse(JSON.stringify(V));e.id=h.value.id,e.name=h.value.name,e.area=S(),e.attributes=h.value.attributes,""===e.name.trim()?l["a"].confirm("Você precisa digitar um nome para a sua geocerca","Ops!").then(()=>{}):N.dispatch("geofences/save",e).then(()=>{x.value=!1})};return(e,t)=>{const a=Object(c["resolveComponent"])("el-button-group");return Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(r["a"]),{"lock-scroll":!0,modelValue:x.value,"onUpdate:modelValue":t[10]||(t[10]=e=>x.value=e)},{title:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",O,[Object(c["createElementVNode"])("div",p,Object(c["toDisplayString"])(g.value),1)])]),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(n["a"]),{type:"danger",onClick:t[0]||(t[0]=e=>C())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Excluir")]),_:1})]),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(n["a"]),{type:"danger",plain:"",onClick:t[1]||(t[1]=e=>_())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Cancelar")]),_:1}),Object(c["createVNode"])(Object(c["unref"])(n["a"]),{type:"primary",onClick:t[2]||(t[2]=e=>B())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Salvar")]),_:1})])])]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(d["b"]),{modelValue:y.value,"onUpdate:modelValue":t[9]||(t[9]=e=>y.value=e)},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(d["a"]),{label:"Geocerca",name:"first"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(i["a"]),{"label-width":"120px","label-position":"top"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Nome da Geocerca"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(s["a"]),{modelValue:h.value.name,"onUpdate:modelValue":t[3]||(t[3]=e=>h.value.name=e)},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Tipo de Cerca"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{size:"large"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(n["a"]),{type:"primary",plain:!("POLYGON"===h.value.type),onClick:t[4]||(t[4]=e=>h.value.type="POLYGON")},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("POLIGONO")]),_:1},8,["plain"]),Object(c["createVNode"])(Object(c["unref"])(n["a"]),{type:"primary",plain:!("CIRCLE"===h.value.type),onClick:t[5]||(t[5]=e=>h.value.type="CIRCLE")},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("CIRCULO")]),_:1},8,["plain"]),Object(c["createVNode"])(Object(c["unref"])(n["a"]),{type:"primary",plain:!("LINESTRING"===h.value.type),onClick:t[6]||(t[6]=e=>h.value.type="LINESTRING")},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("LINHA")]),_:1},8,["plain"])]),_:1})]),_:1}),Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",f,[Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Área Total"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(s["a"]),{disabled:"",value:Object(c["unref"])(N).getters["geofences/getTotalArea"]},null,8,["value"])]),_:1})]),Object(c["createElementVNode"])("div",v,[Object(c["createVNode"])(Object(c["unref"])(n["a"]),{type:"primary",onClick:t[7]||(t[7]=e=>w())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Editar Área")]),_:1})])])]),_:1})]),_:1}),Object(c["createVNode"])(Object(c["unref"])(d["a"]),{label:"Atributos",name:"attributes"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(u["a"]),{modelValue:h.value.attributes,"onUpdate:modelValue":t[8]||(t[8]=e=>h.value.attributes=e),type:"geofence"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}};a("48f4");const N=V;t["a"]=N},e9d8:function(e,t,a){"use strict";a("07d7")}}]);