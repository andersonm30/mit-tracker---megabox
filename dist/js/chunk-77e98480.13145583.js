(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77e98480"],{"0a69":function(e,t,a){"use strict";a("771d"),a("acdd")},"16ee":function(e,t,a){"use strict";a("14d9");var c=a("7a23"),l=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("91c0")),o=a("5502");const n={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"10px",height:"calc(70vh - 200px)"}},d={style:{padding:"7px",flex:"1"}},r=["onClick"],i=Object(c["createElementVNode"])("i",{class:"fas fa-minus-square"},null,-1),s=[i];var b={__name:"tab-devices",setup(e,{expose:t}){const a=Object(o["b"])(),i=Object(c["ref"])(null),b=Object(c["ref"])([]),u=()=>{b.value=[]};t({selected:b,clear:u});const O=e=>{b.value.splice(e,1)},j=e=>{const t=b.value.find(t=>t.id===e);if(!t){const t=a.getters["devices/getDevice"](e);t&&b.value.push(t)}i.value=null};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(l["c"]),{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),onChange:t[1]||(t[1]=e=>j(e)),"value-key":"id",filterable:"",placeholder:e.KT("device.devices"),size:"large","no-match-text":e.KT("NO_MATCH_TEXT"),"no-data-text":e.KT("NO_DATA_TEXT")},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(a).state.devices.deviceList,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(l["a"]),{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","no-match-text","no-data-text"]),Object(c["createElementVNode"])("div",n,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(b.value,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{style:{display:"flex","border-bottom":"silver 1px dotted"},key:e.id},[Object(c["createElementVNode"])("div",d,Object(c["toDisplayString"])(e.name),1),Object(c["createElementVNode"])("div",{style:{padding:"5px","padding-right":"10px","font-size":"18px"},onClick:e=>O(t)},s,8,r)]))),128))])],64))}};const u=b;t["a"]=u},"3ded":function(e,t,a){"use strict";a("c013")},"46d8":function(e,t,a){"use strict";a("7290")},7290:function(e,t,a){},acdd:function(e,t,a){},b086:function(e,t,a){"use strict";a("771d"),a("e476"),a("c4aa"),a("797a")},c013:function(e,t,a){},db9a:function(e,t,a){"use strict";a("771d"),a("ee9a"),a("e7ce")},e476:function(e,t,a){},ee9a:function(e,t,a){},fb40:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("b086"),a("db9a"),a("c349")),o=a("cf2e"),n=a("5502"),d=a("db9d"),r=a("e0ad"),i=a("d8e8"),s=a("91c0"),b=a("5c12"),u=a("16ee"),O=a("c9a1"),j=a("2295");const m=Object(c["createElementVNode"])("div",{style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},[Object(c["createElementVNode"])("div",{class:"modal-title"},"Cadastrar Comando")],-1),p={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},f=Object(c["createElementVNode"])("br",null,null,-1);var v={__name:"edit-command",setup(e,{expose:t}){const a={id:0,deviceId:0,description:"",type:"",attributes:{}},v=Object(n["b"])(),V=Object(c["ref"])(null),y=Object(c["ref"])(!1),k=Object(c["ref"])("first"),x=Object(c["ref"])(!1),N=Object(c["ref"])([]),h=Object(c["ref"])([{type:"engineStop"},{type:"engineResume"}]);Object(c["onMounted"])(()=>{window.$traccar.getTypeCommands().then(({data:e})=>{N.value=e})});const g=Object(c["ref"])(a),C=()=>{g.value=JSON.parse(JSON.stringify(a)),y.value=!0},w=e=>{g.value=JSON.parse(JSON.stringify(a)),Object.assign(g.value,JSON.parse(JSON.stringify(e))),e.attributes["tarkan.changeNative"]&&(x.value=!0),y.value=!0};t({newCommand:C,editCommand:w});const B=()=>{y.value=!1},E=()=>{O["a"].confirm("Deseja realmente excluir este comando?","Tem certeza?").then(()=>{v.dispatch("commands/delete",g.value.id).then(()=>{y.value=!1,Object(j["a"])({title:"Info",message:"Comando deletado com suceso.",type:"info"})})})},_=()=>{Object(j["a"])({title:"Info",message:"Cadastrando seu comando...",type:"info"});const e=JSON.parse(JSON.stringify(a));Object.assign(e,g.value),!1===x.value&&(e.attributes["tarkan.changeNative"]=!1),v.dispatch("commands/save",e).then(async e=>{const t=V.value.selected;if(t.length>0)for(let a of t)console.log(a),Object(j["a"])({title:"Info",message:"Vinculando comando ao dispositivo "+a.name,type:"info"}),await window.$traccar.linkObjects({deviceId:a.id,commandId:e.id});Object(j["a"])({title:"Successo",message:"Comando personalizado cadastrado com sucesso.",type:"success"}),y.value=!1})};return(e,t)=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(d["a"]),{"lock-scroll":!0,modelValue:y.value,"onUpdate:modelValue":t[9]||(t[9]=e=>y.value=e),title:"Teste"},{title:Object(c["withCtx"])(()=>[m]),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{type:"danger",onClick:t[0]||(t[0]=e=>E())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Excluir")]),_:1})]),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{type:"danger",plain:"",onClick:t[1]||(t[1]=e=>B())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Cancelar")]),_:1}),Object(c["createVNode"])(Object(c["unref"])(o["a"]),{type:"primary",onClick:t[2]||(t[2]=e=>_())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Salvar")]),_:1})])])]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(r["b"]),{modelValue:k.value,"onUpdate:modelValue":t[8]||(t[8]=e=>k.value=e)},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(r["a"]),{label:"Comando",name:"first"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(i["a"]),{"label-width":"120px","label-position":"top"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Nome do Comando"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:g.value.description,"onUpdate:modelValue":t[3]||(t[3]=e=>g.value.description=e)},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Tipo de Comando"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(s["c"]),{modelValue:g.value.type,"onUpdate:modelValue":t[4]||(t[4]=e=>g.value.type=e),"value-key":"id",filterable:"",placeholder:"Tipo de Comando",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(N.value,t=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(s["a"]),{key:t.type,label:e.$t("actions."+t.type),value:t.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),"custom"===g.value.type?(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(i["b"]),{key:0,label:"Enviar"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:g.value.attributes["data"],"onUpdate:modelValue":t[5]||(t[5]=e=>g.value.attributes["data"]=e)},null,8,["modelValue"])]),_:1})):Object(c["createCommentVNode"])("",!0),f,Object(c["createVNode"])(Object(c["unref"])(b["a"]),{modelValue:x.value,"onUpdate:modelValue":t[6]||(t[6]=e=>x.value=e),"active-text":"Substituir um comando nativo por este comando."},null,8,["modelValue"]),x.value?(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(i["b"]),{key:1,label:"Qual ação você deseja substituir?"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(s["c"]),{modelValue:g.value.attributes["tarkan.changeNative"],"onUpdate:modelValue":t[7]||(t[7]=e=>g.value.attributes["tarkan.changeNative"]=e),"value-key":"id",filterable:"",placeholder:"Grupo",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(h.value,t=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(s["a"]),{key:t.type,label:e.$t("actions."+t.type),value:t.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):Object(c["createCommentVNode"])("",!0)]),_:1})]),_:1}),Object(c["createVNode"])(Object(c["unref"])(r["a"]),{label:"Dispositivos",name:e.devices},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(u["a"]),{ref_key:"deviceList",ref:V},null,512)]),_:1},8,["name"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}};a("46d8");const V=v;var y=V;const k=e=>(Object(c["pushScopeId"])("data-v-7368d79e"),e=e(),Object(c["popScopeId"])(),e),x={style:{display:"flex","justify-content":"space-between","align-content":"space-between"}},N=k(()=>Object(c["createElementVNode"])("div",{style:{width:"30%"}},null,-1)),h=k(()=>Object(c["createElementVNode"])("i",{class:"fas fa-plus"},null,-1)),g={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"20px",height:"calc(100vh - 200px)"}},C=k(()=>Object(c["createElementVNode"])("div",{class:"deviceHead"},[Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",width:"calc(60% + 3.5px)"}},"Titulo"),Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",flex:"2"}},"Tipo")],-1)),w={style:{"overflow-x":"hidden","overflow-y":"scroll",height:"calc(100vh - 230px)"}},B=["onClick"],E={class:"name"},_={class:"name",style:{flex:"2"}},S={class:"name"},T={class:"name",style:{flex:"2"}};var L={__name:"commands",setup(e){const t=Object(n["b"])(),a=Object(c["ref"])(""),d=Object(c["ref"])(null),r=Object(c["computed"])(()=>""===a.value?t.state.commands.commandList:t.state.commands.commandList.filter(e=>e.description.toLowerCase().match(a.value.toLowerCase())));return(e,n)=>{const i=Object(c["resolveComponent"])("el-tooltip");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(y),{ref_key:"editCommandRef",ref:d},null,512),Object(c["createElementVNode"])("div",x,[N,Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),placeholder:"Buscar Comando",style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue"]),Object(c["unref"])(t).getters.advancedPermissions(57)?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,effect:"dark",content:"Cadastrar Comando",placement:"bottom"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{type:"primary",onClick:n[1]||(n[1]=e=>d.value.newCommand())},{default:Object(c["withCtx"])(()=>[h]),_:1})]),_:1})):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",g,[C,Object(c["createElementVNode"])("div",w,[Object(c["unref"])(t).getters.advancedPermissions(58)?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(Object(c["unref"])(r),e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,onClick:t=>d.value.editCommand(e),class:"device"},[Object(c["createElementVNode"])("div",E,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",_,Object(c["toDisplayString"])(e.type),1)],8,B))),128)):(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:1},Object(c["renderList"])(Object(c["unref"])(r),e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,class:"device"},[Object(c["createElementVNode"])("div",S,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",T,Object(c["toDisplayString"])(e.type),1)]))),128))])])],64)}}},J=(a("3ded"),a("6b0d")),D=a.n(J);const I=D()(L,[["__scopeId","data-v-7368d79e"]]);t["default"]=I}}]);