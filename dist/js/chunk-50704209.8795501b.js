(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50704209"],{"2b40":function(e,t,c){},9942:function(e,t,c){"use strict";c("e8b1")},bf6f:function(e,t,c){"use strict";c.r(t);c("14d9");var a=c("7a23"),o=(c("797a"),c("5959"),c("bc43"),c("7aa1"),c("c49e"),c("cc66"),c("10c7"),c("314f"),c("efc7"),c("5c12")),n=c("cf2e"),l=c("5502"),r=c("4d0b"),i=c("21a6");const d=e=>(Object(a["pushScopeId"])("data-v-04ad4b0a"),e=e(),Object(a["popScopeId"])(),e),s={style:{display:"flex","justify-content":"flex-end"}},p={style:{"margin-right":"10px","margin-top":"10px"}},b={style:{"margin-top":"20px"}},u={key:0,class:"reportBlock",style:{padding:"10px"}},O={key:1,class:"reportBlock",style:{padding:"10px"}},j=["onClick","set"],f={style:{color:"var(--el-text-color-primary)","font-weight":"bold","font-size":"16px",padding:"10px"}},v={style:{"text-align":"right",padding:"10px","font-size":"11px",color:"#5b5b5b",position:"relative",width:"70px"}},m=d(()=>Object(a["createElementVNode"])("div",{style:{position:"absolute",width:"20px",height:"20px","font-size":"16px","text-align":"center",right:"-10px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},[Object(a["createElementVNode"])("i",{class:"fas fa-exclamation-triangle"})],-1)),g={style:{position:"absolute",right:"15px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},x=d(()=>Object(a["createElementVNode"])("br",null,null,-1)),h={style:{padding:"10px","font-size":"14px",flex:"1"}};var y={__name:"reportEvents",setup(e){const t=Object(a["ref"])(0),c=Object(l["b"])(),d=Object(a["inject"])("updateRoute"),y=Object(a["inject"])("showRouteMarkers"),k=Object(a["ref"])({date:[0,0],deviceId:[],showMarkers:!0,groupId:[]}),E=Object(a["ref"])([]),V=Object(a["computed"])(()=>{let e={};return E.value.forEach(t=>{e[t.deviceId]||(e[t.deviceId]=[]),e[t.deviceId].push(t)}),e}),w=window.$traccar,N=e=>{k.value=e},B=e=>{w.loadRoute(e.deviceId,e.startTime,e.endTime).then(({data:e})=>{let c=[];e.forEach(e=>{c.push([e.latitude,e.longitude,e.id,e.course])}),d(c),t.value=!1})};Object(a["onBeforeUnmount"])(()=>{});const I=(e=!1)=>{t.value=1,w.getReportEvents(k.value.deviceId,k.value.groupId,new Date(k.value.date[0]).toISOString(),new Date(k.value.date[1]).toISOString(),e).then(c=>{if(e)t.value=0,"application/pdf"===c["headers"]["content-type"]?Object(i["saveAs"])(new Blob([c.data],{type:"application/pdf"}),"resume.pdf"):Object(i["saveAs"])(new Blob([c.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),"resume.xlsx");else{t.value=2,E.value=c.data;let e=[];c.data.forEach(t=>{t.positionId&&!e.includes(t.positionId)&&e.push(t.positionId)}),w.getPositions(e).then(t=>{e=[],t.forEach(t=>{e.push([t.latitude,t.longitude,t.id,t.course])}),d(e,!1)})}})};return(e,l)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(Object(a["unref"])(r["a"]),{onChange:l[0]||(l[0]=e=>N(e))}),Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("div",p,[Object(a["createVNode"])(Object(a["unref"])(o["a"]),{modelValue:Object(a["unref"])(y),"onUpdate:modelValue":l[1]||(l[1]=e=>Object(a["isRef"])(y)?y.value=e:null),"active-text":"Mostrar Marcadores"},null,8,["modelValue"])]),Object(a["createVNode"])(Object(a["unref"])(n["a"]),{onClick:l[2]||(l[2]=e=>I(!0))},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Exportar")]),_:1}),Object(a["createVNode"])(Object(a["unref"])(n["a"]),{type:"primary",onClick:l[3]||(l[3]=e=>I())},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Mostrar")]),_:1})]),Object(a["createElementVNode"])("div",b,[1===t.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",u,"CARREGANDO DADOS...")):Object(a["createCommentVNode"])("",!0),2===t.value&&0===E.value.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",O,"--NÃO HÁ DADOS PARA MOSTRAR--")):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object(a["unref"])(V),(t,o)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"reportBlock",key:o,onClick:e=>B(t),set:e.device=Object(a["unref"])(c).getters["devices/getDevice"](parseInt(o))},[Object(a["createElementVNode"])("div",f,Object(a["toDisplayString"])(e.device.name),1),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t,(t,c)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:"evt-"+o+"-"+c,style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},[Object(a["createElementVNode"])("div",v,[m,Object(a["createElementVNode"])("div",g,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(new Date(t.eventTime).toLocaleDateString()),1),x,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(new Date(t.eventTime).toLocaleTimeString()),1)])]),Object(a["createElementVNode"])("div",h,Object(a["toDisplayString"])(e.KT("notification.types."+t.type)),1)]))),128))],8,j))),128))])],64))}},k=(c("9942"),c("6b0d")),E=c.n(k);const V=E()(y,[["__scopeId","data-v-04ad4b0a"]]);t["default"]=V},e8b1:function(e,t,c){},efc7:function(e,t,c){"use strict";c("771d"),c("2b40")}}]);