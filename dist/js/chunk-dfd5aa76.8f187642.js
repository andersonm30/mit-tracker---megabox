(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dfd5aa76"],{"1d08":function(e,t,r){},"8cd4":function(e,t,r){"use strict";r.r(t);r("14d9");var o=r("7a23"),c=(r("797a"),r("5959"),r("bc43"),r("cf2e")),a=r("5502"),l=r("4d0b"),i=r("21a6");const n={style:{display:"flex","justify-content":"flex-end"}},d={style:{"margin-top":"20px"}},p={key:0,class:"reportBlock",style:{padding:"10px"}},s={key:1,class:"reportBlock",style:{padding:"10px"}},b=["onClick","set"],m={style:{color:"var(--el-text-color-primary)","font-weight":"bold","font-size":"16px",padding:"10px"}},g={key:0,style:{"border-top":"var(--el-border-color-light) 1px dotted"}},v={style:{"font-size":"10px","padding-top":"3px",color:"var(--el-text-color-secondary)"}},x={style:{"font-size":"12px",color:"var(--el-text-color-regular)","margin-top":"3px","margin-bottom":"5px"}},O={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},j={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},u={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},y={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},f={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},N={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},E={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},V={style:{flex:"1","text-align":"center"}},h={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},S={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},D={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},k={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},w={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},$={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},z={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},B={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},I={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},A={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},C={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},U={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},T={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},_={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},F={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},L={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}};var R={__name:"reportResume",setup(e){const t=Object(o["ref"])(0),r=Object(a["b"])(),R=Object(o["ref"])({date:[0,0],deviceId:[],showMarkers:!0,groupId:[]}),H=Object(o["ref"])([]),J=e=>{R.value=e},M=(e=!1)=>{const r=window.$traccar;t.value=1,r.getReportSummary(R.value.deviceId,R.value.groupId,new Date(R.value.date[0]).toISOString(),new Date(R.value.date[1]).toISOString(),e).then(r=>{e?(t.value=0,"application/pdf"===r["headers"]["content-type"]?Object(i["saveAs"])(new Blob([r.data],{type:"application/pdf"}),"resume.pdf"):Object(i["saveAs"])(new Blob([r.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),"resume.xlsx")):(t.value=2,H.value=r.data)})},G=(e=0)=>{r.dispatch("devices/setDeviceFilter",e)},X=Object(o["inject"])("updateRoute"),q=e=>{const r=window.$traccar;r.loadRoute(e.deviceId,e.startTime,e.endTime).then(({data:r})=>{let o=[];r.forEach(e=>{o.push([e.latitude,e.longitude,e.id,e.course])}),G(e.deviceId),X(o),t.value=!1})};return(e,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(Object(o["unref"])(l["a"]),{onChange:a[0]||(a[0]=e=>J(e))}),Object(o["createElementVNode"])("div",n,[Object(o["createVNode"])(Object(o["unref"])(c["a"]),{type:"info",onClick:a[1]||(a[1]=e=>M(!0))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("report.export")),1)]),_:1}),Object(o["createVNode"])(Object(o["unref"])(c["a"]),{type:"primary",onClick:a[2]||(a[2]=e=>M())},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("report.load")),1)]),_:1})]),Object(o["createElementVNode"])("div",d,[1===t.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,Object(o["toDisplayString"])(e.$t("LOADING")),1)):Object(o["createCommentVNode"])("",!0),2===t.value&&0===H.value.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,Object(o["toDisplayString"])(e.$t("NO_DATA_TEXT")),1)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(H.value,(t,c)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"reportBlock",key:c,onClick:e=>q(t),set:e.device=Object(o["unref"])(r).getters["devices/getDevice"](t.deviceId)},[Object(o["createElementVNode"])("div",m,Object(o["toDisplayString"])(e.device.name),1),t.startTime?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g,[Object(o["createElementVNode"])("div",v,Object(o["toDisplayString"])(e.$t("startDate")),1),Object(o["createElementVNode"])("div",x,Object(o["toDisplayString"])(new Date(t.startTime).toLocaleDateString()),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("div",u,Object(o["toDisplayString"])(e.$t("device.distance")),1),Object(o["createElementVNode"])("div",y,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(r).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.distance})),1)]),Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("div",N,Object(o["toDisplayString"])(e.$t("device.startOdometer")),1),Object(o["createElementVNode"])("div",E,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(r).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.startOdometer})),1)]),Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("div",h,Object(o["toDisplayString"])(e.$t("device.endOdometer")),1),Object(o["createElementVNode"])("div",S,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(r).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.endOdometer})),1)])]),Object(o["createElementVNode"])("div",D,[Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("div",w,Object(o["toDisplayString"])(e.$t("device.averageSpeed")),1),Object(o["createElementVNode"])("div",$,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(r).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:t.averageSpeed})),1)]),Object(o["createElementVNode"])("div",z,[Object(o["createElementVNode"])("div",B,Object(o["toDisplayString"])(e.$t("device.maxSpeed")),1),Object(o["createElementVNode"])("div",I,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(r).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:t.maxSpeed})),1)])]),Object(o["createElementVNode"])("div",A,[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("div",U,Object(o["toDisplayString"])(e.$t("device.engineHours")),1),Object(o["createElementVNode"])("div",T,Object(o["toDisplayString"])(Math.round(t.engineHours/60/60/1e3))+" hs",1)]),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("div",F,Object(o["toDisplayString"])(e.$t("device.spentFuel")),1),Object(o["createElementVNode"])("div",L,Object(o["toDisplayString"])(t.spentFuel)+" L",1)])])],8,b))),128))])],64))}},H=(r("c63d"),r("6b0d")),J=r.n(H);const M=J()(R,[["__scopeId","data-v-6950bf9f"]]);t["default"]=M},c63d:function(e,t,r){"use strict";r("1d08")}}]);