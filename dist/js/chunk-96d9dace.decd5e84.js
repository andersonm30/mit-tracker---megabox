(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96d9dace"],{1323:function(e,t,o){"use strict";o.r(t);o("14d9"),o("b7ef");var a=o("7a23"),c=(o("c4aa"),o("797a"),o("efc7"),o("e7ce"),o("74fa"),o("c349")),n=o("1254"),l=o("5c12"),r=o("cf2e"),i=o("c9a1"),s=o("1dc4"),d=o("6605"),u=o("5502");const b=e=>(Object(a["pushScopeId"])("data-v-5040c2f0"),e=e(),Object(a["popScopeId"])(),e),m={class:"login"},p={id:"logo"},w={id:"login-form"},O={key:0,style:{"text-align":"center"}},j=b(()=>Object(a["createElementVNode"])("br",null,null,-1)),f=b(()=>Object(a["createElementVNode"])("br",null,null,-1)),g={style:{"margin-left":"10%"}},h={class:"label"},v={class:"label"},y=b(()=>Object(a["createElementVNode"])("i",{class:"far fa-eye"},null,-1)),V=[y],k=b(()=>Object(a["createElementVNode"])("i",{class:"far fa-eye-slash"},null,-1)),N=[k],E={style:{"margin-top":"10px",float:"left"}},I={style:{"margin-top":"10px",float:"right"}},P={data(){return{username:"",password:"",showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword}}};var D=Object.assign(P,{__name:"login",setup(e){const t=Object(u["b"])(),{push:o}=Object(d["d"])(),b=Object(d["c"])(),y=Object(a["inject"])("traccar"),k=Object(a["ref"])(null),P=Object(a["ref"])(null),D=Object(a["ref"])(!1),S=Object(a["ref"])(b.query.user||""),x=Object(a["ref"])(b.query.pass||"");Object(a["onMounted"])(()=>{"Share"===b.name?_():k.value.focus()});const _=()=>{y.login(b.params.token,b.params.token).then(e=>{t.commit("setAuth",e),t.dispatch("loadUserData").then(()=>{o("/devices/"+e.attributes.deviceId),t.commit("devices/setTrail",parseInt(e.attributes.deviceId)),t.commit("devices/setFollow",parseInt(e.attributes.deviceId))})}).catch(e=>{i["a"].confirm(Object(s["a"])("INVALID_SHARE")||e).then(()=>{}).catch(()=>{})})},B=()=>{let e=S.value;b.meta.isDriver&&(e="qrcode-"+e),y.login(e,x.value).then(e=>{function a(){t.dispatch("loadUserData");var e=/(iPhone|iPad|iPod);[^OS]*OS (\d)/,a=navigator.userAgent.match(e);b.query.to?window.location.href=window.location.protocol+"//"+window.location.host+b.query.to+"?time="+(new Date).getTime():a?b.meta.isDriver?window.location.href=window.location.protocol+"//"+window.location.host+"/qr-driver?time="+(new Date).getTime():window.location.href=window.location.protocol+"//"+window.location.host+"/home?time="+(new Date).getTime():b.meta.isDriver?window.location.href=window.location.protocol+"//"+window.location.host+"/qr-driver?time="+(new Date).getTime():o("/home")}console.log(e),D.value&&window.localStorage.setItem("rememberme",btoa(S.value+"|"+x.value)),t.commit("setAuth",e),U(e.id),a()}).catch(e=>{t.commit("server/setPage",!1),console.log(e),i["a"].confirm(Object(s["a"])(e)||e).then(()=>{}).catch(()=>{})})};function U(e){window.appInterface&&window.appInterface.updateUserId?(window.appInterface.updateUserId(e.toString()),console.log("userId enviado para o Android:",e)):console.warn("Função updateUserId não encontrada no appInterface")}return(e,o)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",m,[Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("img",{style:Object(a["normalizeStyle"])({width:Object(a["unref"])(t).getters["server/getLogoWidth"]}),src:"/tarkan/assets/custom/logoWhite.png"},null,4)]),Object(a["createElementVNode"])("div",w,["Share"===e.$route.name?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",O,[Object(a["createTextVNode"])(" Acessando compartilhamento, por favor aguarde..."),j,f,Object(a["createElementVNode"])("div",g,[Object(a["createVNode"])(Object(a["unref"])(n["a"]),{percentage:50,status:"warning",indeterminate:!0})])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",h,Object(a["toDisplayString"])(Object(a["unref"])(s["a"])("login.username")),1),Object(a["createVNode"])(Object(a["unref"])(c["a"]),{ref_key:"userinput",ref:k,modelValue:S.value,"onUpdate:modelValue":o[0]||(o[0]=e=>S.value=e),onKeydown:o[1]||(o[1]=Object(a["withKeys"])(e=>P.value.focus(),["enter"])),placeholder:Object(a["unref"])(s["a"])("login.your_email")},null,8,["modelValue","placeholder"])]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",v,Object(a["toDisplayString"])(Object(a["unref"])(s["a"])("login.password")),1),Object(a["createVNode"])(Object(a["unref"])(c["a"]),{ref_key:"passinput",ref:P,modelValue:x.value,"onUpdate:modelValue":o[4]||(o[4]=e=>x.value=e),onKeydown:o[5]||(o[5]=Object(a["withKeys"])(e=>B(),["enter"])),type:e.showPassword?"text":"password",placeholder:Object(a["unref"])(s["a"])("login.your_password")},{append:Object(a["withCtx"])(()=>[e.showPassword?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:0,onClick:o[2]||(o[2]=(...t)=>e.togglePasswordVisibility&&e.togglePasswordVisibility(...t))},V)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:1,onClick:o[3]||(o[3]=(...t)=>e.togglePasswordVisibility&&e.togglePasswordVisibility(...t))},N))]),_:1},8,["modelValue","type","placeholder"])]),Object(a["createElementVNode"])("div",E,[Object(a["createVNode"])(Object(a["unref"])(l["a"]),{modelValue:D.value,"onUpdate:modelValue":o[6]||(o[6]=e=>D.value=e),"inactive-text":"","active-text":Object(a["unref"])(s["a"])("rememberme"),"active-value":!0,"inactive-value":!1},null,8,["modelValue","active-text"])]),Object(a["createElementVNode"])("div",I,[Object(a["createVNode"])(Object(a["unref"])(r["a"]),{type:"primary",onClick:o[7]||(o[7]=e=>B())},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(Object(a["unref"])(s["a"])("login.signin")),1)]),_:1})])],64))])]))}}),S=(o("33ff"),o("6b0d")),x=o.n(S);const _=x()(D,[["__scopeId","data-v-5040c2f0"]]);t["default"]=_},"2b40":function(e,t,o){},"33ff":function(e,t,o){"use strict";o("6777")},6777:function(e,t,o){},efc7:function(e,t,o){"use strict";o("771d"),o("2b40")}}]);