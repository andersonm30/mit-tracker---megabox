(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45cf178b"],{"0722":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("b086"),a("db9a"),a("c349")),o=a("cf2e"),n=a("5502"),r=a("db9d"),d=a("e0ad"),i=a("d8e8"),u=a("91c0"),b=a("5c12"),s=a("16ee"),O=a("2295"),j=a("c9a1");const p=Object(c["createElementVNode"])("div",{style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},[Object(c["createElementVNode"])("div",{class:"modal-title"},"Cadastrar Atributo")],-1),f={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},m={style:{display:"flex"}},v={style:{flex:"1","margin-right":"5px"}},V={style:{flex:"1","margin-left":"5px"}},x=Object(c["createElementVNode"])("br",null,null,-1);var y={__name:"edit-attribute",setup(e,{expose:t}){const a={id:0,description:"",attribute:"",expression:"",type:"string"},y=Object(n["b"])(),N=Object(c["ref"])(null),h=Object(c["ref"])(!1),k=Object(c["ref"])("first"),g=Object(c["ref"])(!1),w=Object(c["ref"])(a),C=Object(c["ref"])(0),E=Object(c["ref"])("");let B=null;const _=()=>{window.$traccar.attributeTest(C.value,w.value).then(({data:e})=>{E.value=e}).catch(e=>{E.value=e.response.data})},T=()=>{B&&clearInterval(B),0!==C.value&&(B=setTimeout(()=>{_()},1e3))},S=()=>{w.value=JSON.parse(JSON.stringify(a)),h.value=!0};function A(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}const L=e=>{w.value=JSON.parse(JSON.stringify(a));for(let t of Object.keys(a))w.value[t]="expression"===t?A(e[t]):e[t];h.value=!0};t({newAttribute:S,editAttribute:L});const U=()=>{h.value=!1},D=()=>{j["a"].confirm("Deseja realmente excluir este atributo computado?","Tem certeza?").then(()=>{y.dispatch("attributes/delete",w.value.id).then(()=>{h.value=!1,Object(O["a"])({title:"Info",message:"Atributo computado deletado com suceso.",type:"info"})})})},z=()=>{Object(O["a"])({title:"Info",message:"Cadastrando seu atributo...",type:"info"});const e=JSON.parse(JSON.stringify(a));Object.assign(e,w.value),y.dispatch("attributes/save",e).then(async e=>{const t=N.value.selected;if(t.length>0)for(let a of t)console.log(a),Object(O["a"])({title:"Info",message:"Vinculando atributo ao dispositivo "+a.name,type:"info"}),await window.$traccar.linkObjects({deviceId:a.id,attributeId:e.id});Object(O["a"])({title:"Successo",message:"Atributo computado cadastrado com sucesso.",type:"success"}),h.value=!1})};return(e,t)=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(r["a"]),{"lock-scroll":!0,modelValue:h.value,"onUpdate:modelValue":t[14]||(t[14]=e=>h.value=e),title:"Teste"},{title:Object(c["withCtx"])(()=>[p]),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{type:"danger",onClick:t[0]||(t[0]=e=>D())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Excluir")]),_:1})]),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{type:"danger",plain:"",onClick:t[1]||(t[1]=e=>U())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Cancelar")]),_:1}),Object(c["createVNode"])(Object(c["unref"])(o["a"]),{type:"primary",onClick:t[2]||(t[2]=e=>z())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Salvar")]),_:1})])])]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(d["b"]),{modelValue:k.value,"onUpdate:modelValue":t[13]||(t[13]=e=>k.value=e)},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(d["a"]),{label:"Comando",name:"first"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(i["a"]),{"label-width":"120px","label-position":"top"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Descrição"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:w.value.description,"onUpdate:modelValue":t[3]||(t[3]=e=>w.value.description=e)},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Atributo"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:w.value.attribute,"onUpdate:modelValue":t[4]||(t[4]=e=>w.value.attribute=e)},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Tipo de Saída"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(u["c"]),{modelValue:w.value.type,"onUpdate:modelValue":t[5]||(t[5]=e=>w.value.type=e),onChange:t[6]||(t[6]=e=>_()),filterable:"",placeholder:"Tipo de Saída",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(u["a"]),{key:1,label:"Texto",value:"string"})),(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(u["a"]),{key:2,label:"Numérico",value:"number"})),(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(u["a"]),{key:3,label:"Lógico",value:"boolean"}))]),_:1},8,["modelValue"])]),_:1}),Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",v,[Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Expressão"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:w.value.expression,"onUpdate:modelValue":t[7]||(t[7]=e=>w.value.expression=e),autosize:{minRows:4},type:"textarea",placeholder:"Please input",onKeyup:t[8]||(t[8]=e=>T())},null,8,["modelValue"])]),_:1})]),Object(c["createElementVNode"])("div",V,[Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Testar Atributo em"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(u["c"]),{modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=e=>C.value=e),onChange:t[10]||(t[10]=e=>_()),"value-key":"id",filterable:"",placeholder:"Grupo",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(u["a"]),{label:"Não Testar",value:0}),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(y).state.devices.deviceList,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(u["a"]),{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Object(c["createVNode"])(Object(c["unref"])(i["b"]),{label:"Resultado"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{disabled:"",modelValue:E.value,"onUpdate:modelValue":t[11]||(t[11]=e=>E.value=e),autosize:{minRows:4},type:"textarea",placeholder:"Please input"},null,8,["modelValue"])]),_:1})])]),x,Object(c["createVNode"])(Object(c["unref"])(b["a"]),{modelValue:g.value,"onUpdate:modelValue":t[12]||(t[12]=e=>g.value=e),"active-text":"Aplicar este atributo aos meus favoritos"},null,8,["modelValue"])]),_:1})]),_:1}),Object(c["createVNode"])(Object(c["unref"])(d["a"]),{label:"Dispositivos",name:e.devices},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(s["a"]),{ref_key:"deviceList",ref:N},null,512)]),_:1},8,["name"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}};a("b08e");const N=y;var h=N;const k=e=>(Object(c["pushScopeId"])("data-v-b54d1fe6"),e=e(),Object(c["popScopeId"])(),e),g={style:{display:"flex","justify-content":"space-between","align-content":"space-between"}},w=k(()=>Object(c["createElementVNode"])("div",{style:{width:"30%"}},null,-1)),C=k(()=>Object(c["createElementVNode"])("i",{class:"fas fa-plus"},null,-1)),E={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"20px",height:"calc(100vh - 200px)"}},B=k(()=>Object(c["createElementVNode"])("div",{class:"deviceHead"},[Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",width:"calc(60% + 3.5px)"}},"Titulo"),Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",flex:"2"}},"Tipo")],-1)),_={style:{"overflow-x":"hidden","overflow-y":"scroll",height:"calc(100vh - 230px)"}},T=["onClick"],S={class:"name"},A={class:"name",style:{flex:"2"}},L={class:"name"},U={class:"name",style:{flex:"2"}};var D={__name:"computed",setup(e){const t=Object(n["b"])(),a=Object(c["ref"])(""),r=Object(c["ref"])(null),d=Object(c["computed"])(()=>""===a.value?t.state.attributes.attributesList:t.state.attributes.attributesList.filter(e=>e.description.toLowerCase().match(a.value.toLowerCase())));return(e,n)=>{const i=Object(c["resolveComponent"])("el-tooltip");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(h),{ref_key:"editAttributeRef",ref:r},null,512),Object(c["createElementVNode"])("div",g,[w,Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),placeholder:"Buscar Atributo",style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue"]),Object(c["unref"])(t).getters.advancedPermissions(65)?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,effect:"dark",content:"Cadastrar Atributo",placement:"bottom"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{type:"primary",onClick:n[1]||(n[1]=e=>r.value.newAttribute())},{default:Object(c["withCtx"])(()=>[C]),_:1})]),_:1})):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",E,[B,Object(c["createElementVNode"])("div",_,[Object(c["unref"])(t).getters.advancedPermissions(66)?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(Object(c["unref"])(d),e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,onClick:t=>r.value.editAttribute(e),class:"device"},[Object(c["createElementVNode"])("div",S,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",A,Object(c["toDisplayString"])(e.type),1)],8,T))),128)):(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:1},Object(c["renderList"])(Object(c["unref"])(d),e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,class:"device"},[Object(c["createElementVNode"])("div",L,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",U,Object(c["toDisplayString"])(e.type),1)]))),128))])])],64)}}},z=(a("3c7a"),a("6b0d")),I=a.n(z);const J=I()(D,[["__scopeId","data-v-b54d1fe6"]]);t["default"]=J},"0a69":function(e,t,a){"use strict";a("771d"),a("acdd")},"16ee":function(e,t,a){"use strict";a("14d9");var c=a("7a23"),l=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("91c0")),o=a("5502");const n={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"10px",height:"calc(70vh - 200px)"}},r={style:{padding:"7px",flex:"1"}},d=["onClick"],i=Object(c["createElementVNode"])("i",{class:"fas fa-minus-square"},null,-1),u=[i];var b={__name:"tab-devices",setup(e,{expose:t}){const a=Object(o["b"])(),i=Object(c["ref"])(null),b=Object(c["ref"])([]),s=()=>{b.value=[]};t({selected:b,clear:s});const O=e=>{b.value.splice(e,1)},j=e=>{const t=b.value.find(t=>t.id===e);if(!t){const t=a.getters["devices/getDevice"](e);t&&b.value.push(t)}i.value=null};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(l["c"]),{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),onChange:t[1]||(t[1]=e=>j(e)),"value-key":"id",filterable:"",placeholder:e.KT("device.devices"),size:"large","no-match-text":e.KT("NO_MATCH_TEXT"),"no-data-text":e.KT("NO_DATA_TEXT")},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(a).state.devices.deviceList,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(l["a"]),{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","no-match-text","no-data-text"]),Object(c["createElementVNode"])("div",n,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(b.value,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{style:{display:"flex","border-bottom":"silver 1px dotted"},key:e.id},[Object(c["createElementVNode"])("div",r,Object(c["toDisplayString"])(e.name),1),Object(c["createElementVNode"])("div",{style:{padding:"5px","padding-right":"10px","font-size":"18px"},onClick:e=>O(t)},u,8,d)]))),128))])],64))}};const s=b;t["a"]=s},"3c7a":function(e,t,a){"use strict";a("5cf05")},"3efe":function(e,t,a){},"5cf05":function(e,t,a){},acdd:function(e,t,a){},b086:function(e,t,a){"use strict";a("771d"),a("e476"),a("c4aa"),a("797a")},b08e:function(e,t,a){"use strict";a("3efe")},db9a:function(e,t,a){"use strict";a("771d"),a("ee9a"),a("e7ce")},e476:function(e,t,a){},ee9a:function(e,t,a){}}]);