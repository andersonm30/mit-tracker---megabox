(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad4e670a"],{"0400":function(e,t,a){"use strict";a.r(t);a("b7ef");var l=a("7a23"),c=a("5502"),n=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("db9d")),r=a("cf2e"),o=a("3ef4"),d=a("c9a1"),u=a("2295"),i=(a("14d9"),a("0a35"),a("0a69"),a("e0ad")),b=a("d8e8"),s=a("c349"),O=a("0291"),j=a("5c12"),m=a("91c0"),p=a("8430"),f=a("1dc4");a("5b81");const x=/DTSTART;(VALUE=DATE:(?<date>\d*)|TZID=(?<tzid>.*):(?<tzDate>\d*)T(?<tzTime>\d*))/gm,g=/DTEND;(VALUE=DATE:(?<date>\d*)|TZID=(?<tzid>.*):(?<tzDate>\d*)T(?<tzTime>\d*))/gm,v=/SUMMARY:([A-Z, 0-9a-z]*)/gm,y=/RRULE:(.*)/gm,V=/FREQ=([A-Z]*)/gm,N=/WKST=([A-Z]*)/gm,E=/UNTIL=([0-9]*)/gm,T=/COUNT=([0-9]*)/gm,k=/BYDAY=([A-Z,]*)/gm,D=/BYMONTHDAY=([0-9,]*)/gm;function h(e){let t={};t.summary=new RegExp(v).exec(e)[1];const a=new RegExp(x).exec(e);a[4]&&a[5]?(t.startDate=a[4].substring(6,8)+"/"+a[4].substring(4,6)+"/"+a[4].substring(0,4),t.startTime=a[5].substring(0,2)+":"+a[5].substring(2,4),t.startDateTime=new Date(a[4].substring(0,4)+"/"+a[4].substring(4,6)+"/"+a[4].substring(6,8)+" "+t.startTime)):(t.startDate=a[2].substring(6,8)+"/"+a[2].substring(4,6)+"/"+a[2].substring(0,4),t.startTime="00:00",t.startDateTime=new Date(a[2].substring(0,4)+"/"+a[2].substring(4,6)+"/"+a[2].substring(6,8)+" "+t.startTime));const l=new RegExp(g).exec(e);console.log(l),l[4]&&l[5]?(t.endDate=l[4].substring(6,8)+"/"+l[4].substring(4,6)+"/"+l[4].substring(0,4),t.endTime=l[5].substring(0,2)+":"+l[5].substring(2,4),t.endDateTime=new Date(l[4].substring(0,4)+"/"+l[4].substring(4,6)+"/"+l[4].substring(6,8)+" "+t.endTime)):(l[5]?t.endTime=l[5]:t.endTime="23:59",l[2]&&!l[4]?(t.endDate=l[2].substring(6,8)+"/"+l[2].substring(4,6)+"/"+l[2].substring(0,4),t.endDateTime=new Date(l[2].substring(0,4)+"/"+l[2].substring(4,6)+"/"+l[2].substring(6,8)+" "+t.endTime)):(t.endDate="",t.endDateTime=new Date(t.startDateTime),t.endDateTime.setHours(23),t.endDateTime.setMinutes(59)));const c=new RegExp(y).exec(e);if(c){t.rules={},t.rules.frequency=new RegExp(V).exec(c[1])[1];const e=new RegExp(N).exec(c[1]);t.rules.WKST=e?e[1]:"";const a=new RegExp(E).exec(c[1]);t.rules.until=a?new Date(1e3*a[1]):"";const l=new RegExp(T).exec(c[1]);t.rules.count=l?l[1]:"",""!==t.rules.until?t.rules.endMode=1:""!==t.rules.count?t.rules.endMode=2:t.rules.endMode=0;const n=new RegExp(k).exec(c[1]);t.rules.days=n?n[1].split(","):"";const r=new RegExp(D).exec(c[1]);t.rules.monthDay=r?r[1]:""}else t.rules=!1;return t}function C(e){const t=/BEGIN:VEVENT([\w\W]*?)END:VEVENT/gm;let a,l=[];while(null!==(a=t.exec(e)))l.push(h(a[0])),a.index===t.lastIndex&&t.lastIndex++;return l}function w(e){return C(e)}function B(e){let t="BEGIN:VCALENDAR\nPRODID:-//Tarkan//KoreAG//EN\nVERSION:2.0\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\nX-WR-CALNAME:TRACCAR\nX-WR-TIMEZONE:UTC\nBEGIN:VTIMEZONE\nTZID:America/Sao_Paulo\nX-LIC-LOCATION:America/Sao_Paulo\nBEGIN:STANDARD\nTZOFFSETFROM:-0300\nTZOFFSETTO:-0300\nTZNAME:-03\nDTSTART:19700101T000000\nEND:STANDARD\nEND:VTIMEZONE\n";return e.forEach(e=>{const a=new Date(e.startDateTime),l=new Date(e.endDateTime),c=a.toISOString().replaceAll("-","").replaceAll(":","").substr(0,15),n=l.toISOString().replaceAll("-","").replaceAll(":","").substr(0,15);if(t+="BEGIN:VEVENT\nDTSTART;TZID=America/Sao_Paulo:"+c+"\nDTEND;TZID=America/Sao_Paulo:"+n+"\n",e.rules){if(t+="RRULE:FREQ="+e.rules.frequency+";","WEEKLY"===e.rules.frequency?t+="BYDAY="+e.rules.days.join(",")+";":"MONTHLY"===e.rules.frequency&&(t+="BYMONTHDAY="+a.getDate()+";"),1===e.rules.expires)t+="COUNT="+e.rules.count+";";else if(2===e.rules.expires){const a=e.rules.until.toISOString().replaceAll("-","").split("T");t+="UNTIL="+a[0]+";"}t+="\n"}t+="DTSTAMP:20220128T131146Z\nUID:4ttr41esn4jnde6hfa80q7qq7p@google.com\nCREATED:20220128T131120Z\nDESCRIPTION:\nLAST-MODIFIED:20220128T131120Z\nLOCATION:\nSEQUENCE:0\nSTATUS:CONFIRMED\nSUMMARY:VAU\nTRANSP:OPAQUE\nEND:VEVENT\n"}),t+="END:VCALENDAR",t}var A=a("047a"),S=a("312d");const _={style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},L={class:"modal-title"},I={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},R={style:{display:"flex","justify-content":"flex-end","padding-bottom":"5px"}},F={style:{height:"calc(70vh - 200px)",border:"silver 1px solid","border-radius":"5px","margin-bottom":"20px",overflow:"auto"}},M={key:0},U={key:1},q=Object(l["createElementVNode"])("i",{class:"fas fa-minus-square"},null,-1),Y=[q],z=Object(l["createElementVNode"])("div",{style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},[Object(l["createElementVNode"])("div",{class:"modal-title"},"Adicionar Agendamento")],-1),Z={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},K={style:{padding:"10px"}},H={key:0,style:{padding:"10px","font-weight":"bold"}},P={style:{display:"flex"}},W=Object(l["createElementVNode"])("div",{style:{padding:"12px"}},"Domingo",-1),X={style:{display:"flex"}},G=Object(l["createElementVNode"])("div",{style:{padding:"12px"}},"Segunda-Feira",-1),J={style:{display:"flex"}},Q=Object(l["createElementVNode"])("div",{style:{padding:"12px"}},"Terça-Feira",-1),$={style:{display:"flex"}},ee=Object(l["createElementVNode"])("div",{style:{padding:"12px"}},"Quarta-Feira",-1),te={style:{display:"flex"}},ae=Object(l["createElementVNode"])("div",{style:{padding:"12px"}},"Quinta-Feira",-1),le={style:{display:"flex"}},ce=Object(l["createElementVNode"])("div",{style:{padding:"12px"}},"Sexta-Feira",-1),ne={style:{display:"flex"}},re=Object(l["createElementVNode"])("div",{style:{padding:"12px"}},"Sábado",-1);var oe={__name:"edit-calendar",setup(e,{expose:t}){const a=Object(c["b"])(),d=Object(l["ref"])(!1),x=Object(l["ref"])(null),g=Object(l["ref"])(""),v=Object(l["ref"])(!1),y=Object(l["ref"])(!1),V=Object(l["ref"])("first"),N=e=>w(atob(e)),E={id:0,attributes:{},name:"",data:""},T=Object(l["ref"])(E),k=Object(l["ref"])([]),D=Object(l["ref"])({}),h=()=>{D.value={},y.value=!0},C=(e,t)=>{t?D.value.rules.days.push(e):D.value.rules.days.splice(D.value.rules.days.findIndex(t=>t===e),1)},q=e=>{k.value.splice(k.value.findIndex(t=>t===e),1)},oe=()=>{k.value.push(D.value),y.value=!1},de=()=>{V.value="first",d.value=!1,g.value=Object(f["a"])("calendar.newCalendar"),T.value=JSON.parse(JSON.stringify(E)),k.value=[],v.value=!0},ue=e=>{if(0===e)return o["a"].error(Object(f["a"])("calendar.selectError")),!1;d.value=!0,g.value=Object(f["a"])("calendar.editCalendar"),V.value="first",T.value=JSON.parse(JSON.stringify(E));const t=a.getters["calendars/getCalendarById"](e);T.value.id=t.id,T.value.name=t.name,T.value.attributes=t.attributes,k.value=N(t.data),v.value=!0};t({newCalendar:de,editCalendar:ue});const ie=()=>{v.value=!1},be=async()=>{Object(u["a"])({title:Object(f["a"])("info"),message:Object(f["a"])("calendar.saving"),type:"info"}),T.value.data=btoa(B(k.value)),a.dispatch("calendars/save",T.value).then(async e=>{if(Object(u["a"])({title:Object(f["a"])("success"),message:Object(f["a"])("calendar.saved"),type:"info"}),!d.value){if(x.value.selected.length>0)for(let t of x.value.selected)Object(u["a"])({title:"Info",message:Object(f["a"])("calendar.linkToUser",t),type:"info"}),await window.$traccar.linkObjects({userId:t.id,calendarId:e.id});Object(u["a"])({title:Object(f["a"])("success"),message:Object(f["a"])("ALL_TASK_READY"),type:"success"})}v.value=!1}).catch(()=>{o["a"].error(Object(f["a"])("calendar.saveError"))}),v.value=!1};return(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["unref"])(n["a"]),{"lock-scroll":!0,modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=e=>v.value=e)},{title:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",_,[Object(l["createElementVNode"])("div",L,Object(l["toDisplayString"])(g.value),1)])]),footer:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",I,[Object(l["createVNode"])(Object(l["unref"])(r["a"]),{type:"danger",plain:"",onClick:t[0]||(t[0]=e=>ie())},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("cancel")),1)]),_:1}),Object(l["createVNode"])(Object(l["unref"])(r["a"]),{type:"primary",onClick:t[1]||(t[1]=e=>be())},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("save")),1)]),_:1})])]),default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(i["b"]),{modelValue:V.value,"onUpdate:modelValue":t[6]||(t[6]=e=>V.value=e)},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(i["a"]),{label:Object(l["unref"])(f["a"])("calendar.calendar"),name:"first"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(b["a"]),{"label-width":"120px","label-position":"top"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(b["b"]),{label:Object(l["unref"])(f["a"])("calendar.name")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(s["a"]),{modelValue:T.value.name,"onUpdate:modelValue":t[2]||(t[2]=e=>T.value.name=e)},null,8,["modelValue"])]),_:1},8,["label"]),Object(l["createElementVNode"])("div",R,[Object(l["createVNode"])(Object(l["unref"])(r["a"]),{onClick:t[3]||(t[3]=e=>h()),type:"primary"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("Adicionar Agendamento")]),_:1})]),Object(l["createElementVNode"])("div",F,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(k.value,(a,c)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e.k+"-"+c,style:{display:"flex","justify-content":"space-between",padding:"10px","border-bottom":"silver 1px dotted"}},[a.rules?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",M,["DAILY"===a.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createTextVNode"])(" Todos os dias ")],64)):"WEEKLY"===a.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createTextVNode"])(" Semanalmente "),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(a.rules.days,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{class:"day",style:{"margin-left":"4px","margin-top":"0px"},key:e.k+"-"+c+"-"+t},Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("weekDays."+t)),1))),128))],64)):"MONTHLY"===a.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:2},[Object(l["createTextVNode"])(" Todo dia "+Object(l["toDisplayString"])(new Date(a.startDateTime).getDate()),1)],64)):"YEARLY"===a.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[Object(l["createTextVNode"])(" Anualmente ")],64)):Object(l["createCommentVNode"])("",!0),a.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:4},[Object(l["createTextVNode"])(" das "+Object(l["toDisplayString"])(new Date(a.startDateTime).toLocaleTimeString())+" até "+Object(l["toDisplayString"])(new Date(a.endDateTime).toLocaleTimeString()),1)],64)):Object(l["createCommentVNode"])("",!0),a.rules&&a.rules.expires&&2===a.rules.expires?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:5},[Object(l["createTextVNode"])(" Expira em "+Object(l["toDisplayString"])(new Date(a.rules.until).toLocaleString()),1)],64)):Object(l["createCommentVNode"])("",!0),a.rules&&a.rules.expires&&1===a.rules.expires?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:6},[Object(l["createTextVNode"])(" Expira após "+Object(l["toDisplayString"])(a.rules.count)+" ocorrencias. ",1)],64)):Object(l["createCommentVNode"])("",!0)])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",U,Object(l["toDisplayString"])(new Date(a.startDateTime).toLocaleString())+" até "+Object(l["toDisplayString"])(new Date(a.endDateTime).toLocaleString()),1)),Object(l["createElementVNode"])("div",{style:{"padding-right":"10px","font-size":"18px"},onClick:t[4]||(t[4]=t=>q(e.k))},Y)]))),128))])]),_:1})]),_:1},8,["label"]),Object(l["createVNode"])(Object(l["unref"])(i["a"]),{label:Object(l["unref"])(f["a"])("attribute.attributes"),name:"fourth"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(A["a"]),{modelValue:T.value.attributes,"onUpdate:modelValue":t[5]||(t[5]=e=>T.value.attributes=e),type:"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),d.value?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(i["a"]),{key:0,label:Object(l["unref"])(f["a"])("user.users"),name:"users"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(S["a"]),{ref_key:"userList",ref:x},null,512)]),_:1},8,["label"]))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),Object(l["createVNode"])(Object(l["unref"])(n["a"]),{"lock-scroll":!0,width:"25%",modelValue:y.value,"onUpdate:modelValue":t[24]||(t[24]=e=>y.value=e)},{title:Object(l["withCtx"])(()=>[z]),footer:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",Z,[Object(l["createVNode"])(Object(l["unref"])(r["a"]),{type:"danger",plain:"",onClick:t[8]||(t[8]=e=>y.value=!1)},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("cancel")),1)]),_:1}),Object(l["createVNode"])(Object(l["unref"])(r["a"]),{type:"primary",onClick:t[9]||(t[9]=e=>oe())},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("calendar.confirmAdd")),1)]),_:1})])]),default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",K,[Object(l["createVNode"])(Object(l["unref"])(b["a"]),{"label-position":"top"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(b["b"]),{label:Object(l["unref"])(f["a"])("calendar.startDate")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(O["a"]),{modelValue:D.value.startDateTime,"onUpdate:modelValue":t[10]||(t[10]=e=>D.value.startDateTime=e),type:"datetime",size:"large",placeholder:Object(l["unref"])(f["a"])("calendar.startDate")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),Object(l["createVNode"])(Object(l["unref"])(b["b"]),{label:Object(l["unref"])(f["a"])("calendar.endDate")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(O["a"]),{modelValue:D.value.endDateTime,"onUpdate:modelValue":t[11]||(t[11]=e=>D.value.endDateTime=e),type:"datetime",size:"large",placeholder:Object(l["unref"])(f["a"])("calendar.endDate")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),Object(l["createVNode"])(Object(l["unref"])(b["b"]),{label:Object(l["unref"])(f["a"])("calendar.repeat")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(j["a"]),{onChange:t[12]||(t[12]=e=>D.value.rules=!0===e&&{frquency:"DAILY",expires:0,days:[]}),"model-value":D.value.rules&&!1!==D.value.rules,"inactive-text":Object(l["unref"])(f["a"])("no"),"active-text":Object(l["unref"])(f["a"])("yes")},null,8,["model-value","inactive-text","active-text"])]),_:1},8,["label"]),D.value.rules?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createVNode"])(Object(l["unref"])(b["b"]),{label:Object(l["unref"])(f["a"])("calendar.frequency")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(m["c"]),{modelValue:D.value.rules.frequency,"onUpdate:modelValue":t[13]||(t[13]=e=>D.value.rules.frequency=e),filterable:"",size:"large",placeholder:Object(l["unref"])(f["a"])("calendar.frequency"),"no-match-text":Object(l["unref"])(f["a"])("NO_MATCH_TEXT"),"no-data-text":Object(l["unref"])(f["a"])("NO_DATA_TEXT")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(m["a"]),{label:Object(l["unref"])(f["a"])("calendar.frequencyes.daily"),value:"DAILY"},null,8,["label"]),Object(l["createVNode"])(Object(l["unref"])(m["a"]),{label:Object(l["unref"])(f["a"])("calendar.frequencyes.weekly"),value:"WEEKLY"},null,8,["label"]),Object(l["createVNode"])(Object(l["unref"])(m["a"]),{label:Object(l["unref"])(f["a"])("calendar.frequencyes.monthly"),value:"MONTHLY"},null,8,["label"]),Object(l["createVNode"])(Object(l["unref"])(m["a"]),{label:Object(l["unref"])(f["a"])("calendar.frequencyes.yearly"),value:"YEARLY"},null,8,["label"])]),_:1},8,["modelValue","placeholder","no-match-text","no-data-text"])]),_:1},8,["label"]),D.value.rules&&"DAILY"===D.value.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",H,"Diariamente das "+Object(l["toDisplayString"])(new Date(D.value.startDateTime).toLocaleTimeString())+" até "+Object(l["toDisplayString"])(new Date(D.value.endDateTime).toLocaleTimeString()),1)):D.value.rules&&"WEEKLY"===D.value.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("div",P,[Object(l["createVNode"])(Object(l["unref"])(p["a"]),{onChange:t[14]||(t[14]=e=>C("SU",e))}),W]),Object(l["createElementVNode"])("div",X,[Object(l["createVNode"])(Object(l["unref"])(p["a"]),{onChange:t[15]||(t[15]=e=>C("MO",e))}),G]),Object(l["createElementVNode"])("div",J,[Object(l["createVNode"])(Object(l["unref"])(p["a"]),{onChange:t[16]||(t[16]=e=>C("TU",e))}),Q]),Object(l["createElementVNode"])("div",$,[Object(l["createVNode"])(Object(l["unref"])(p["a"]),{onChange:t[17]||(t[17]=e=>C("WE",e))}),ee]),Object(l["createElementVNode"])("div",te,[Object(l["createVNode"])(Object(l["unref"])(p["a"]),{onChange:t[18]||(t[18]=e=>C("TH",e))}),ae]),Object(l["createElementVNode"])("div",le,[Object(l["createVNode"])(Object(l["unref"])(p["a"]),{onChange:t[19]||(t[19]=e=>C("FR",e))}),ce]),Object(l["createElementVNode"])("div",ne,[Object(l["createVNode"])(Object(l["unref"])(p["a"]),{onChange:t[20]||(t[20]=e=>C("ST",e))}),re])],64)):Object(l["createCommentVNode"])("",!0),Object(l["createVNode"])(Object(l["unref"])(b["b"]),{label:Object(l["unref"])(f["a"])("calendar.expires")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(m["c"]),{modelValue:D.value.rules.expires,"onUpdate:modelValue":t[21]||(t[21]=e=>D.value.rules.expires=e),filterable:"",size:"large",placeholder:Object(l["unref"])(f["a"])("calendar.expires"),"no-match-text":Object(l["unref"])(f["a"])("NO_MATCH_TEXT"),"no-data-text":Object(l["unref"])(f["a"])("NO_DATA_TEXT")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(m["a"]),{label:Object(l["unref"])(f["a"])("calendar.expirations.never"),value:0},null,8,["label"]),Object(l["createVNode"])(Object(l["unref"])(m["a"]),{label:Object(l["unref"])(f["a"])("calendar.expirations.count"),value:1},null,8,["label"]),Object(l["createVNode"])(Object(l["unref"])(m["a"]),{label:Object(l["unref"])(f["a"])("calendar.expirations.until"),value:2},null,8,["label"])]),_:1},8,["modelValue","placeholder","no-match-text","no-data-text"])]),_:1},8,["label"]),D.value.rules&&1===D.value.rules.expires?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(b["b"]),{key:2,label:Object(l["unref"])(f["a"])("calendar.occurrencies")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(s["a"]),{modelValue:D.value.rules.count,"onUpdate:modelValue":t[22]||(t[22]=e=>D.value.rules.count=e)},null,8,["modelValue"])]),_:1},8,["label"])):D.value.rules&&2===D.value.rules.expires?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(b["b"]),{key:3,label:Object(l["unref"])(f["a"])("calendar.expiration")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(O["a"]),{modelValue:D.value.rules.until,"onUpdate:modelValue":t[23]||(t[23]=e=>D.value.rules.until=e),size:"large"},null,8,["modelValue"])]),_:1},8,["label"])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0)]),_:1})])]),_:1},8,["modelValue"])],64))}};a("f438");const de=oe;var ue=de;const ie={style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},be={class:"modal-title"},se={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"flex-start"}},Oe=Object(l["createElementVNode"])("i",{class:"fas fa-user-plus"},null,-1),je=Object(l["createElementVNode"])("i",{class:"fas fa-user-minus"},null,-1),me=Object(l["createElementVNode"])("i",{class:"fas fa-user-edit"},null,-1),pe={class:"itm",style:{display:"flex",background:"#eeeeee"}},fe={style:{width:"250px",padding:"10px","font-size":"12px"}},xe={style:{flex:"1",padding:"10px","font-size":"12px","text-align":"center"}},ge={style:{height:"calc(100vh - 300px)",overflow:"hidden","overflow-y":"scroll"}},ve=["onClick"],ye={style:{width:"250px",padding:"10px","font-size":"14px"}},Ve={style:{flex:"1",padding:"10px","font-size":"14px","text-align":"center",overflow:"hidden","white-space":"nowrap"}};var Ne={__name:"edit-calendars",setup(e,{expose:t}){const a=Object(c["b"])(),i=Object(l["ref"])(0),b=Object(l["ref"])(!1),s=Object(l["ref"])(null),O=(e,t)=>{window.$showTip(e,t)},j=(e,t)=>{window.$hideTip(e,t)},m=e=>w(atob(e)),p=()=>{if(0===i.value)return o["a"].error(Object(f["a"])("calendar.selectError")),!1;const e=a.getters["calendar/getCalendarById"](i.value);d["a"].confirm(Object(f["a"])("calendar.confirmDelete",e),Object(f["a"])("danger"),{confirmButtonText:Object(f["a"])("delete"),confirmButtonClass:"danger",cancelButtonText:Object(f["a"])("cancel"),type:"warning"}).then(()=>{a.dispatch("calendar/deleteCalendar",i.value).then(()=>{Object(u["a"])({title:Object(f["a"])("success"),message:Object(f["a"])("calendar.deleted"),type:"success"}),i.value=0}).catch(e=>{Object(u["a"])({title:Object(f["a"])("error"),message:e.response.data,type:"danger"})})}).catch(()=>{o["a"].error(Object(f["a"])("userCancel"))})},x=()=>{b.value=!0};return t({showCalendars:x}),(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["unref"])(ue),{ref_key:"editCalendarRef",ref:s},null,512),Object(l["createVNode"])(Object(l["unref"])(n["a"]),{"lock-scroll":!0,top:"50px",modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e)},{title:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",ie,[Object(l["createElementVNode"])("div",be,Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("calendar.title")),1)])]),footer:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",se,[Object(l["unref"])(a).getters.advancedPermissions(89)?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(r["a"]),{key:0,onMouseleave:j,onMouseenter:t[0]||(t[0]=Object(l["withModifiers"])(e=>O(e,Object(l["unref"])(f["a"])("calendar.add")),["stop"])),type:"primary",onClick:t[1]||(t[1]=e=>s.value.newCalendar())},{default:Object(l["withCtx"])(()=>[Oe]),_:1})):Object(l["createCommentVNode"])("",!0),Object(l["unref"])(a).getters.advancedPermissions(91)?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(r["a"]),{key:1,onMouseleave:j,onMouseenter:t[2]||(t[2]=Object(l["withModifiers"])(e=>O(e,Object(l["unref"])(f["a"])("calendar.remove")),["stop"])),type:"danger",plain:0===i.value,onClick:t[3]||(t[3]=e=>p())},{default:Object(l["withCtx"])(()=>[je]),_:1},8,["plain"])):Object(l["createCommentVNode"])("",!0),Object(l["unref"])(a).getters.advancedPermissions(90)?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(r["a"]),{key:2,onMouseleave:j,onMouseenter:t[4]||(t[4]=Object(l["withModifiers"])(e=>O(e,Object(l["unref"])(f["a"])("calendar.edit")),["stop"])),type:"warning",plain:0===i.value,onClick:t[5]||(t[5]=e=>{s.value.editCalendar(i.value)})},{default:Object(l["withCtx"])(()=>[me]),_:1},8,["plain"])):Object(l["createCommentVNode"])("",!0)])]),default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",pe,[Object(l["createElementVNode"])("div",fe,Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("calendar.name")),1),Object(l["createElementVNode"])("div",xe,Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("calendar.data")),1)]),Object(l["createElementVNode"])("div",ge,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(a).state.calendars.calendarList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["itm",{tr1:t%2,tr2:!(t%2),selected:i.value===e.id}]),key:t,onClick:t=>i.value=i.value!==e.id?e.id:0,style:{display:"flex"}},[Object(l["createElementVNode"])("div",ye,Object(l["toDisplayString"])(e.name),1),Object(l["createElementVNode"])("div",Ve,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(m(e.data),(e,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{class:"calendars",key:t+"-"+a},["DAILY"===e.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createTextVNode"])(" Todos os dias ")],64)):"WEEKLY"===e.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createTextVNode"])(" Semanalmente "),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.rules.days,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{class:"day",key:t+"-"+a+"-"+e},Object(l["toDisplayString"])(Object(l["unref"])(f["a"])("weekDays."+e)),1))),128))],64)):"MONTHLY"===e.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:2},[Object(l["createTextVNode"])(" Todo dia "+Object(l["toDisplayString"])(e.rules.monthDay),1)],64)):"YEARLY"===e.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[Object(l["createTextVNode"])(" Anualmente ")],64)):(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:4},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(new Date(e.startDateTime).toLocaleString())+" até "+Object(l["toDisplayString"])(new Date(e.endDateTime).toLocaleString()),1)],64)),e.rules.frequency?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:5},[Object(l["createTextVNode"])(" ás "+Object(l["toDisplayString"])(new Date(e.startDateTime).toLocaleTimeString())+" até "+Object(l["toDisplayString"])(new Date(e.endDateTime).toLocaleTimeString()),1)],64)):Object(l["createCommentVNode"])("",!0)]))),128))])],10,ve))),128))])]),_:1},8,["modelValue"])],64))}};a("d3a3");const Ee=Ne;t["default"]=Ee},"047a":function(e,t,a){"use strict";var l=a("7a23"),c=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("91c0")),n=a("c349"),r=a("cf2e");const o={style:{display:"flex"}},d={style:{flex:"1"}},u={style:{flex:"1","margin-left":"5px"}},i={style:{padding:"4px"}},b={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"5px","margin-bottom":"15px",height:"calc(70vh - 200px)"}},s={style:{padding:"7px",flex:"1"}},O={style:{padding:"2px",flex:"1"}},j=["onChange","value"],m=["onClick"],p=Object(l["createElementVNode"])("i",{class:"fas fa-minus-square"},null,-1),f=[p];var x={__name:"tab-attributes",props:["modelValue","type"],emits:["update:modelValue"],setup(e,{emit:t}){const a=e,p={device:["lockOnExit","speedLimit"],user:["telegramChatId"],geofence:["color","lockOnExit","speedLimit"]},x=Object(l["ref"])({name:"",value:""}),g=Object(l["ref"])(p),v=Object(l["computed"])(()=>g.value[a.type]||[]),y=(e,l)=>{let c=a.modelValue;c[e]=l.srcElement.value,t("update:modelValue",c)},V=Object(l["computed"])(()=>{let e={},t=a.modelValue?Object.keys(a.modelValue):[];for(var l of t)l.match("tarkan.")||(e[l]=a.modelValue[l]);return e}),N=()=>{let e=a.modelValue;e[x.value.name]=x.value.value,t("update:modelValue",e),x.value={name:"",value:""}},E=e=>{delete a.modelValue[e],t("update:modelValue",a.modelValue)};return(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createElementVNode"])("div",o,[Object(l["createElementVNode"])("div",d,[Object(l["createVNode"])(Object(l["unref"])(c["c"]),{modelValue:x.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>x.value.name=e),"value-key":"id","allow-create":"",filterable:"",placeholder:e.KT("attribute.attribute"),size:"large","no-match-text":e.KT("NO_MATCH_TEXT"),"no-data-text":e.KT("NO_DATA_TEXT")},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(v),t=>(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(c["a"]),{key:t,label:e.$t("attribute."+t),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","no-match-text","no-data-text"])]),Object(l["createElementVNode"])("div",u,[Object(l["createVNode"])(Object(l["unref"])(n["a"]),{modelValue:x.value.value,"onUpdate:modelValue":t[1]||(t[1]=e=>x.value.value=e),placeholder:"Valor do Atributo"},null,8,["modelValue"])]),Object(l["createElementVNode"])("div",i,[Object(l["createVNode"])(Object(l["unref"])(r["a"]),{type:"primary",onClick:t[2]||(t[2]=e=>N()),size:"small"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("Adicionar Atributo")]),_:1})])]),Object(l["createElementVNode"])("div",b,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(V),(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,style:{display:"flex","border-bottom":"silver 1px dotted"}},[Object(l["createElementVNode"])("div",s,Object(l["toDisplayString"])(e.$t("attribute."+a)),1),Object(l["createElementVNode"])("div",O,[Object(l["createElementVNode"])("input",{style:{width:"100%",border:"silver 1px solid",height:"23px","border-radius":"5px",padding:"2px"},onChange:e=>y(a,e),value:t},null,40,j)]),Object(l["createElementVNode"])("div",{style:{padding:"5px","padding-right":"10px","font-size":"18px"},onClick:e=>E(a)},f,8,m)]))),128))])],64))}};const g=x;t["a"]=g},"07f5":function(e,t,a){},"0a69":function(e,t,a){"use strict";a("771d"),a("acdd")},"312d":function(e,t,a){"use strict";a("14d9");var l=a("7a23"),c=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("91c0")),n=a("5502");const r={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"10px",height:"calc(70vh - 200px)"}},o={style:{padding:"7px",flex:"1"}},d=["onClick"],u=Object(l["createElementVNode"])("i",{class:"fas fa-minus-square"},null,-1),i=[u];var b={__name:"tab-users",setup(e,{expose:t}){const a=Object(n["b"])(),u=Object(l["ref"])(null),b=Object(l["ref"])([]),s=()=>{b.value=[]};t({selected:b,clear:s});const O=e=>{b.value.splice(e,1)},j=e=>{const t=b.value.find(t=>t.id===e);if(!t){const t=a.getters["users/getUser"](e);t&&b.value.push(t)}u.value=null};return(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["unref"])(c["c"]),{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),onChange:t[1]||(t[1]=e=>j(e)),"value-key":"id",filterable:"",placeholder:e.KT("user.users"),size:"large","no-match-text":e.KT("NO_MATCH_TEXT"),"no-data-text":e.KT("NO_DATA_TEXT")},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(a).state.users.userList,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(c["a"]),{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","no-match-text","no-data-text"]),Object(l["createElementVNode"])("div",r,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(b.value,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{style:{display:"flex","border-bottom":"silver 1px dotted"},key:e.id},[Object(l["createElementVNode"])("div",o,Object(l["toDisplayString"])(e.name),1),Object(l["createElementVNode"])("div",{style:{padding:"5px","padding-right":"10px","font-size":"18px"},onClick:e=>O(t)},i,8,d)]))),128))])],64))}};const s=b;t["a"]=s},"8c61":function(e,t,a){},acdd:function(e,t,a){},d3a3:function(e,t,a){"use strict";a("07f5")},f438:function(e,t,a){"use strict";a("8c61")}}]);