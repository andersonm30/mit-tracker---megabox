(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33fbcf41"],{"2b40":function(e,t,r){},"6f4d":function(e,t,r){},"96ec":function(e,t,r){"use strict";r.r(t);r("14d9");var o=r("7a23"),c=(r("797a"),r("5959"),r("bc43"),r("7aa1"),r("c49e"),r("cc66"),r("10c7"),r("314f"),r("efc7"),r("5c12")),a=r("cf2e"),l=r("5502"),i=r("4d0b"),n=r("21a6");const d=e=>(Object(o["pushScopeId"])("data-v-4a0ffe24"),e=e(),Object(o["popScopeId"])(),e),s={style:{display:"flex","justify-content":"flex-end"}},p={style:{"margin-right":"10px","margin-top":"10px"}},b={style:{"margin-top":"20px"}},j={key:0,class:"reportBlock",style:{padding:"10px"}},O={key:1,class:"reportBlock",style:{padding:"10px"}},g=["set","onClick"],m={style:{color:"var(--el-text-color-primary)","font-weight":"bold","font-size":"16px",padding:"10px"}},x={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between","min-height":"53px"}},v={style:{"text-align":"right",padding:"10px","font-size":"11px",color:"#5b5b5b",position:"relative",width:"70px"}},u=d(()=>Object(o["createElementVNode"])("div",{style:{position:"absolute",width:"20px",height:"20px","font-size":"16px","text-align":"center",right:"-10px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},[Object(o["createElementVNode"])("i",{class:"fas fa-flag"})],-1)),f={style:{position:"absolute",right:"15px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},y=d(()=>Object(o["createElementVNode"])("br",null,null,-1)),V={style:{padding:"10px","font-size":"14px",flex:"1"}},N={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},h={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},E={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},S={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},k={style:{flex:"1","text-align":"center"}},D={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},w={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},B={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},T={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},z={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},$={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},A={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},I={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},U={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},C={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},L={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},_={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},F={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},R={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},M={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},Y={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},J={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},G={style:{"text-align":"right",padding:"10px","font-size":"11px",color:"#5b5b5b",position:"relative",width:"70px"}},X=d(()=>Object(o["createElementVNode"])("div",{style:{position:"absolute",width:"20px",height:"20px","font-size":"16px","text-align":"center",right:"-10px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},[Object(o["createElementVNode"])("i",{class:"fas fa-flag-checkered"})],-1)),q={style:{position:"absolute",right:"15px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},H=d(()=>Object(o["createElementVNode"])("br",null,null,-1)),K={style:{padding:"10px","font-size":"14px",flex:"1"}};var P={__name:"reportTravels",setup(e){const t=Object(o["inject"])("showRouteMarkers"),r=Object(o["ref"])(0),d=Object(l["b"])(),P=Object(o["inject"])("updateRoute"),Q=Object(o["ref"])({date:[0,0],deviceId:[],showMarkers:!0,groupId:[]}),W=Object(o["ref"])([]),Z=window.$traccar,ee=e=>{Q.value=e},te=(e=0)=>{d.dispatch("devices/setDeviceFilter",e)},re=e=>{Z.loadRoute(e.deviceId,e.startTime,e.endTime).then(({data:t})=>{let o=[];t.forEach(e=>{o.push([e.latitude,e.longitude,e.id,e.course])}),te(e.deviceId),P(o),r.value=!1})},oe=(e=!1)=>{r.value=1,Z.getReportTravels(Q.value.deviceId,Q.value.groupId,new Date(Q.value.date[0]).toISOString(),new Date(Q.value.date[1]).toISOString(),e).then(t=>{e?(r.value=0,"application/pdf"===t["headers"]["content-type"]?Object(n["saveAs"])(new Blob([t.data],{type:"application/pdf"}),"resume.pdf"):Object(n["saveAs"])(new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),"travels.xlsx")):(r.value=2,W.value=t.data)})};return(e,l)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(Object(o["unref"])(i["a"]),{onChange:l[0]||(l[0]=e=>ee(e))}),Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",p,[Object(o["createVNode"])(Object(o["unref"])(c["a"]),{modelValue:Object(o["unref"])(t),"onUpdate:modelValue":l[1]||(l[1]=e=>Object(o["isRef"])(t)?t.value=e:null),"active-text":e.$t("report.showMarkers")},null,8,["modelValue","active-text"])]),Object(o["createVNode"])(Object(o["unref"])(a["a"]),{type:"info",onClick:l[2]||(l[2]=e=>oe(!0))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("report.export")),1)]),_:1}),Object(o["createVNode"])(Object(o["unref"])(a["a"]),{type:"primary",onClick:l[3]||(l[3]=e=>oe())},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("report.load")),1)]),_:1})]),Object(o["createElementVNode"])("div",b,[1===r.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",j,Object(o["toDisplayString"])(e.$t("LOADING")),1)):Object(o["createCommentVNode"])("",!0),2===r.value&&0===W.value.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",O,Object(o["toDisplayString"])(e.$t("NO_DATA_TEXT")),1)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(W.value,(t,r)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"reportBlock",key:r,set:e.device=Object(o["unref"])(d).getters["devices/getDevice"](t.deviceId),onClick:e=>re(t)},[Object(o["createElementVNode"])("div",m,Object(o["toDisplayString"])(e.device.name),1),Object(o["createElementVNode"])("div",x,[Object(o["createElementVNode"])("div",v,[u,Object(o["createElementVNode"])("div",f,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(new Date(t.startTime).toLocaleDateString()),1),y,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(new Date(t.startTime).toLocaleTimeString()),1)])]),Object(o["createElementVNode"])("div",V,[t.startAddress?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.startAddress),1)],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.startLat)+", "+Object(o["toDisplayString"])(t.startLon),1)],64))])]),Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("div",E,Object(o["toDisplayString"])(e.$t("device.startOdometer")),1),Object(o["createElementVNode"])("div",S,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(d).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.startOdometer})),1)]),Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("div",D,Object(o["toDisplayString"])(e.$t("device.endOdometer")),1),Object(o["createElementVNode"])("div",w,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(d).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.endOdometer})),1)])]),Object(o["createElementVNode"])("div",B,[Object(o["createElementVNode"])("div",T,[Object(o["createElementVNode"])("div",z,Object(o["toDisplayString"])(e.$t("device.averageSpeed")),1),Object(o["createElementVNode"])("div",$,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(d).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:t.averageSpeed})),1)]),Object(o["createElementVNode"])("div",A,[Object(o["createElementVNode"])("div",I,Object(o["toDisplayString"])(e.$t("device.maxSpeed")),1),Object(o["createElementVNode"])("div",U,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(d).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:t.maxSpeed})),1)])]),Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("div",L,[Object(o["createElementVNode"])("div",_,Object(o["toDisplayString"])(e.$t("device.duration")),1),Object(o["createElementVNode"])("div",F,Object(o["toDisplayString"])(Math.round(t.duration/60/60/1e3))+" hs",1)]),Object(o["createElementVNode"])("div",R,[Object(o["createElementVNode"])("div",M,Object(o["toDisplayString"])(e.$t("device.distance")),1),Object(o["createElementVNode"])("div",Y,Object(o["toDisplayString"])(e.$t("units."+Object(o["unref"])(d).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.distance})),1)]),Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",J,[Object(o["createElementVNode"])("div",G,[X,Object(o["createElementVNode"])("div",q,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(new Date(t.endTime).toLocaleDateString()),1),H,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(new Date(t.endTime).toLocaleTimeString()),1)])]),Object(o["createElementVNode"])("div",K,[t.endAddress?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.endAddress),1)],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.endLat)+", "+Object(o["toDisplayString"])(t.endLon),1)],64))])])],8,g))),128))])],64))}},Q=(r("c4dd"),r("6b0d")),W=r.n(Q);const Z=W()(P,[["__scopeId","data-v-4a0ffe24"]]);t["default"]=Z},c4dd:function(e,t,r){"use strict";r("6f4d")},efc7:function(e,t,r){"use strict";r("771d"),r("2b40")}}]);