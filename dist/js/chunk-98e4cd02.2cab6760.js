(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98e4cd02"],{"039f":function(e,t,a){},"10c7":function(e,t,a){"use strict";a("771d"),a("c002")},"18c3":function(e,t,a){},"2b40":function(e,t,a){},"58f3":function(e,t,a){},"7aa1":function(e,t,a){"use strict";a("771d"),a("f0b6")},"7b66":function(e,t,a){"use strict";a("18c3")},"7eca":function(e,t,a){},"8fd1":function(e,t,a){},"9d28":function(e,t,a){"use strict";a("771d"),a("7eca")},c002:function(e,t,a){},c49e:function(e,t,a){"use strict";a("771d"),a("8fd1")},cc66:function(e,t,a){"use strict";a("771d"),a("c4aa"),a("e20d"),a("10c7"),a("58f3"),a("9d28"),a("dbe6"),a("039f")},e20d:function(e,t,a){},efc7:function(e,t,a){"use strict";a("771d"),a("2b40")},f07b:function(e,t,a){"use strict";a.r(t);a("14d9");var c=a("7a23"),l=(a("797a"),a("5959"),a("bc43"),a("7aa1"),a("c49e"),a("cc66"),a("10c7"),a("efc7"),a("c4aa"),a("74fa"),a("d8e8")),o=a("91c0"),r=a("c349"),i=a("cf2e"),n=a("5c12"),d=a("5502"),s=a("6605");const b=e=>(Object(c["pushScopeId"])("data-v-e8547dae"),e=e(),Object(c["popScopeId"])(),e),u={class:"form-group"},p=b(()=>Object(c["createElementVNode"])("label",{for:"theInputDevice"},"SELECIONE O DISPOSITIVO",-1)),O={style:{display:"flex"}},j=b(()=>Object(c["createElementVNode"])("div",{style:{width:"100px"}},null,-1)),v={class:"form-group"},f=b(()=>Object(c["createElementVNode"])("label",{for:"theInputDateTime"},"Data Hora Inicial",-1)),m={class:"form-group"},g=b(()=>Object(c["createElementVNode"])("label",{for:"theInputDateTime"},"Data Hora Final",-1)),x={style:{display:"flex","justify-content":"flex-end","margin-top":"3px"}},h=b(()=>Object(c["createElementVNode"])("i",{class:"fas fa-file-pdf"},null,-1)),V=b(()=>Object(c["createElementVNode"])("i",{class:"fas fa-file-excel"},null,-1)),y=b(()=>Object(c["createElementVNode"])("i",{class:"fas fa-chart-bar"},null,-1)),N={class:"form-group",style:{"margin-trim":"8px","margin-top":"8px"}},w=b(()=>Object(c["createElementVNode"])("br",null,null,-1)),E=b(()=>Object(c["createElementVNode"])("br",null,null,-1)),k=b(()=>Object(c["createElementVNode"])("br",null,null,-1)),D={style:{display:"flex","flex-direction":"column",border:"var(--el-border-color-light) 1px solid","margin-top":"20px","border-radius":"10px"}},I={key:0,style:{"text-align":"center",padding:"40px"}},S={key:1,style:{"text-align":"center",padding:"40px"}},T={key:1,style:{"text-align":"center",padding:"40px"}},B={key:0,style:{"border-bottom":"silver 1px dotted",display:"flex"}},C={style:{"text-align":"right",padding:"10px","font-size":"11px",color:"#5b5b5b",position:"relative",width:"70px"}},$=b(()=>Object(c["createElementVNode"])("div",{style:{position:"absolute","border-right":"#cbcbcb 1px dashed",width:"1px",height:"55%",right:"3px",bottom:"0%",transform:"translate(-55%,0)"}},null,-1)),_=b(()=>Object(c["createElementVNode"])("div",{style:{position:"absolute",width:"20px",height:"20px","font-size":"16px","text-align":"center",right:"-10px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},[Object(c["createElementVNode"])("i",{class:"fas fa-flag"})],-1)),L={style:{position:"absolute",right:"15px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},A=b(()=>Object(c["createElementVNode"])("br",null,null,-1)),U={style:{padding:"10px","font-size":"14px",flex:"1"}},z={style:{padding:"10px",width:"70px","text-align":"right","font-size":"12px","margin-right":"1px"}},M=b(()=>Object(c["createElementVNode"])("i",{class:"fas fa-tachometer-alt"},null,-1)),F={key:1,style:{overflow:"auto",height:"calc(100vh - 300px)"}},P={key:0,style:{display:"flex","border-bottom":"silver 1px dotted"}},R={style:{"text-align":"right",padding:"10px","font-size":"11px",color:"#5b5b5b",position:"relative",width:"70px"}},q=b(()=>Object(c["createElementVNode"])("div",{style:{position:"absolute","border-right":"#cbcbcb 1px dashed",width:"1px",height:"100%",right:"3px",bottom:"0%",transform:"translate(-55%,0)"}},null,-1)),H=b(()=>Object(c["createElementVNode"])("div",{style:{position:"absolute",background:"#05a7e3",width:"10px",height:"10px",right:"0px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},null,-1)),Y={style:{position:"absolute",right:"15px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},G=b(()=>Object(c["createElementVNode"])("br",null,null,-1)),J={style:{padding:"10px","font-size":"12px",flex:"1"}},X=["href"],K=b(()=>Object(c["createElementVNode"])("i",{class:"fas fa-external-link-alt"},null,-1)),Q={style:{padding:"10px","font-size":"12px",width:"70px","text-align":"right"}},W=b(()=>Object(c["createElementVNode"])("i",{class:"fas fa-tachometer-alt"},null,-1)),Z={key:2,style:{"border-top":"silver 1px dotted",display:"flex"}},ee={style:{"text-align":"right",padding:"10px","font-size":"11px",color:"#5b5b5b",position:"relative",width:"70px"}},te=b(()=>Object(c["createElementVNode"])("div",{style:{position:"absolute","border-right":"#cbcbcb 1px dashed",width:"1px",height:"55%",right:"3px",top:"0%",transform:"translate(-55%,0)"}},null,-1)),ae=b(()=>Object(c["createElementVNode"])("div",{style:{position:"absolute",width:"20px",height:"20px","font-size":"16px","text-align":"center",right:"-10px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},[Object(c["createElementVNode"])("i",{class:"fas fa-flag"})],-1)),ce={style:{position:"absolute",right:"15px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},le=b(()=>Object(c["createElementVNode"])("br",null,null,-1)),oe={style:{padding:"10px","font-size":"14px",flex:"1"}},re={style:{padding:"10px","font-size":"12px",width:"70px","text-align":"right","margin-right":"1px"}},ie=b(()=>Object(c["createElementVNode"])("i",{class:"fas fa-tachometer-alt"},null,-1));var ne={__name:"history",setup(e){const t=Object(c["inject"])("show-graphics"),a=Object(c["ref"])(!1),b=new Date,ne=new Date;b.setHours(0),b.setMinutes(0);const de=Object(c["inject"])("showRouteMarkers"),se=(e,t)=>{window.$showTip(e,t)},be=(e,t)=>{window.$hideTip(e,t)},ue=Object(c["ref"])({deviceId:"",date:[b,ne]}),pe=Object(d["b"])(),Oe=Object(s["c"])(),je=()=>{const e=ue.value.deviceId,t=ue.value.date[0],a=ue.value.date[1];pe.dispatch("reports/updateReportData",{deviceId:e,date:[t,a]})};Object(c["watch"])(ue,()=>{je()},{deep:!0}),Object(c["onMounted"])(()=>{Oe.query.deviceId&&(ue.value.deviceId=parseInt(Oe.query.deviceId),Ne())}),Object(c["onBeforeUnmount"])(()=>{pe.dispatch("devices/resetDeviceStates")}),Object(c["watch"])(()=>Oe.query.deviceId,()=>{Oe.query.deviceId&&(ue.value.deviceId=parseInt(Oe.query.deviceId),Ne())});const ve=Object(c["inject"])("updateRoute"),fe=Object(c["inject"])("showCalorLayer"),me=Object(c["inject"])("hideCalorLayer"),ge=Object(c["inject"])("showPercursoLayer"),xe=Object(c["inject"])("hidePercursoLayer"),he=Object(c["ref"])([]),Ve=()=>{0===he.value.length?Ne(!0):t.value.showGraphic(he.value)},ye=(e=0)=>{pe.dispatch("devices/setDeviceFilter",e)},Ne=(e=!1,t=!1,l=!1)=>{const o=window.$traccar;a.value=!0,o.loadRoute(ue.value.deviceId,ue.value.date[0],ue.value.date[1],l).then(o=>{if(t){a.value=0;const e=new Date(ue.value.date[0]).toISOString(),t=new Date(ue.value.date[1]).toISOString(),c=ue.value.deviceId,l=`relatorio_percurso_pdf.php?deviceid=${c}&data_inicial=${e}&data_final=${t}`;return window.open(l,"_blank"),void(a.value=!1)}if(l){const e=new Date(ue.value.date[0]).toISOString(),t=new Date(ue.value.date[1]).toISOString(),c=ue.value.deviceId,l=`relatorio_percurso_excel.php?deviceid=${c}&data_inicial=${e}&data_final=${t}`;return window.open(l,"_blank"),void(a.value=!1)}{const t=o.data;he.value=t;let l=[];t.forEach(e=>{l.push([e.latitude,e.longitude,e.id,e.course])}),ve(l),Object(c["nextTick"])(()=>{ye(ue.value.deviceId)}),a.value=!1,e&&t.length>0&&Ve()}})},we=()=>{pe.state.devices.toggleCalor?me():fe(),pe.commit("devices/toggleCalor")},Ee=()=>{pe.state.devices.showPercurso?xe():ge(),pe.commit("devices/togglePercurso")};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(l["a"]),null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(l["b"]),null,{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",u,[p,Object(c["createVNode"])(Object(c["unref"])(o["c"]),{modelValue:ue.value.deviceId,"onUpdate:modelValue":t[0]||(t[0]=e=>ue.value.deviceId=e),"value-key":"id",filterable:"",placeholder:e.$t("device.device"),size:"large","no-data-text":e.$t("NO_DATA_TEXT"),"no-match-text":e.$t("NO_MATCH_TEXT")},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(pe).state.devices.deviceList,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(o["a"]),{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","no-data-text","no-match-text"])])]),_:1}),Object(c["createElementVNode"])("div",O,[j,Object(c["createElementVNode"])("div",v,[f,Object(c["createVNode"])(Object(c["unref"])(r["a"]),{modelValue:ue.value.date[0],"onUpdate:modelValue":t[1]||(t[1]=e=>ue.value.date[0]=e),type:"datetime-local",placeholder:"DATA HORA INICIAL"},null,8,["modelValue"])]),Object(c["createElementVNode"])("div",m,[g,Object(c["createVNode"])(Object(c["unref"])(r["a"]),{modelValue:ue.value.date[1],"onUpdate:modelValue":t[2]||(t[2]=e=>ue.value.date[1]=e),type:"datetime-local",placeholder:"DATA HORA FINAL"},null,8,["modelValue"])])]),Object(c["createElementVNode"])("div",x,[Object(c["createVNode"])(Object(c["unref"])(i["a"]),{type:"info",onClick:t[3]||(t[3]=e=>Ne(!1,!0,!1))},{default:Object(c["withCtx"])(()=>[h,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.$t("report.pdf")),1)]),_:1}),Object(c["createVNode"])(Object(c["unref"])(i["a"]),{type:"info",onClick:t[4]||(t[4]=e=>Ne(!1,!1,!0))},{default:Object(c["withCtx"])(()=>[V,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.$t("report.excel")),1)]),_:1}),Object(c["createVNode"])(Object(c["unref"])(i["a"]),{onMouseleave:be,onMouseenter:t[5]||(t[5]=Object(c["withModifiers"])(t=>se(t,e.$t("device.routes")),["stop"])),type:"primary",onClick:t[6]||(t[6]=e=>Ne())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("report.show")),1)]),_:1}),Object(c["createVNode"])(Object(c["unref"])(i["a"]),{onMouseleave:be,onMouseenter:t[7]||(t[7]=Object(c["withModifiers"])(t=>se(t,e.$t("device.graphic")),["stop"])),type:"info",onClick:t[8]||(t[8]=e=>Ve())},{default:Object(c["withCtx"])(()=>[y]),_:1})]),Object(c["createElementVNode"])("div",N,[Object(c["createVNode"])(Object(c["unref"])(n["a"]),{modelValue:Object(c["unref"])(de),"onUpdate:modelValue":t[9]||(t[9]=e=>Object(c["isRef"])(de)?de.value=e:null),"active-text":e.$t("report.showMarkers")},null,8,["modelValue","active-text"]),Object(c["createVNode"])(Object(c["unref"])(n["a"]),{plain:"",onClick:we,"active-text":e.$t("report.showMapadeCalor"),modelValue:Object(c["unref"])(pe).state.devices.showCalor,"onUpdate:modelValue":t[10]||(t[10]=e=>Object(c["unref"])(pe).state.devices.showCalor=e)},null,8,["active-text","modelValue"]),Object(c["createVNode"])(Object(c["unref"])(n["a"]),{plain:"",onClick:Ee,"active-text":e.$t("report.showPercurso"),modelValue:Object(c["unref"])(pe).state.devices.showPercurso,"onUpdate:modelValue":t[11]||(t[11]=e=>Object(c["unref"])(pe).state.devices.showPercurso=e)},null,8,["active-text","modelValue"])]),w,E,k]),_:1}),Object(c["createElementVNode"])("div",D,[a.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[1===a.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",I,Object(c["toDisplayString"])(e.$t("LOADING")),1)):Object(c["createCommentVNode"])("",!0),3===a.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",S,Object(c["toDisplayString"])(e.$t("ExportOK")),1)):Object(c["createCommentVNode"])("",!0)],64)):0===he.value.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",T,Object(c["toDisplayString"])(e.$t("route.empty")),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:2},[he.value.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",B,[Object(c["createElementVNode"])("div",C,[$,_,Object(c["createTextVNode"])(),Object(c["createElementVNode"])("div",L,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(new Date(he.value[0].fixTime).toLocaleDateString()),1),A,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(new Date(he.value[0].fixTime).toLocaleTimeString()),1)])]),Object(c["createElementVNode"])("div",U,Object(c["toDisplayString"])(he.value[0].address),1),Object(c["createElementVNode"])("div",z,[M,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.$t("units."+Object(c["unref"])(pe).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:he.value[0].speed})),1)])])):Object(c["createCommentVNode"])("",!0),he.value.length>2?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",F,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(he.value,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:t.id},[a>0&&a<he.value.length-1?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",P,[Object(c["createElementVNode"])("div",R,[q,H,Object(c["createElementVNode"])("div",Y,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(new Date(t.fixTime).toLocaleDateString()),1),G,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(new Date(t.fixTime).toLocaleTimeString()),1)])]),Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("a",{target:"_blank",style:{"text-decoration":"none",color:"var(--el-text-color-primary)"},href:"https://maps.google.com/?q="+t.latitude+","+t.longitude},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.address||t.latitude+","+t.longitude)+" ",1),K],8,X)]),Object(c["createElementVNode"])("div",Q,[W,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.$t("units."+Object(c["unref"])(pe).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:t.speed})),1)])])):Object(c["createCommentVNode"])("",!0)],64))),128))])):Object(c["createCommentVNode"])("",!0),he.value.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Z,[Object(c["createElementVNode"])("div",ee,[te,ae,Object(c["createElementVNode"])("div",ce,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(new Date(he.value[he.value.length-1].fixTime).toLocaleDateString()),1),le,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(new Date(he.value[he.value.length-1].fixTime).toLocaleTimeString()),1)])]),Object(c["createElementVNode"])("div",oe,Object(c["toDisplayString"])(he.value[he.value.length-1].address),1),Object(c["createElementVNode"])("div",re,[ie,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.$t("units."+Object(c["unref"])(pe).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:he.value[he.value.length-1].speed})),1)])])):Object(c["createCommentVNode"])("",!0)],64))])],64))}},de=(a("7b66"),a("6b0d")),se=a.n(de);const be=se()(ne,[["__scopeId","data-v-e8547dae"]]);t["default"]=be},f0b6:function(e,t,a){}}]);