(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9948c26"],{"0a69":function(e,t,c){"use strict";c("771d"),c("acdd")},1158:function(e,t,c){"use strict";c("bfed")},5639:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),s=(c("c4aa"),c("797a"),c("efc7"),c("cc66"),c("10c7"),c("751f"),c("858d"),c("4180"),c("0a35"),c("0a69"),c("3ef4")),l=c("db9d"),o=c("c349"),n=c("cf2e"),r=c("5502"),i=c("c9a1"),d=c("2295");const u={style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},b={class:"modal-title",style:{display:"flex",width:"calc(100% - 50px)"}},j=Object(a["createElementVNode"])("i",{class:"fas fa-user-plus"},null,-1),O={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"flex-start"}},p=Object(a["createElementVNode"])("i",{class:"fas fa-user-minus"},null,-1),f=Object(a["createElementVNode"])("i",{class:"fas fa-user-edit"},null,-1),m=Object(a["createElementVNode"])("i",{class:"fas fa-clipboard-list"},null,-1),v=["set"],k=Object(a["createElementVNode"])("i",{class:"fas fa-users"},null,-1),y=Object(a["createElementVNode"])("i",{class:"fas fa-car"},null,-1),h=Object(a["createElementVNode"])("i",{class:"fas fa-draw-polygon"},null,-1),g=Object(a["createElementVNode"])("i",{class:"far fa-object-group"},null,-1),w=Object(a["createElementVNode"])("i",{class:"far fa-envelope"},null,-1),x=Object(a["createElementVNode"])("i",{class:"far fa-calendar-alt"},null,-1),V=Object(a["createElementVNode"])("i",{class:"fas fa-server"},null,-1),B=Object(a["createElementVNode"])("i",{class:"far fa-keyboard"},null,-1),E={class:"itm",style:{display:"flex",background:"#eeeeee"}},N={key:0},C=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-down"},null,-1),M=[C],T={key:1},P=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-up"},null,-1),K=[P],_={key:2},D=Object(a["createElementVNode"])("i",{style:{color:"silver"},class:"fas fa-sort-alpha-down"},null,-1),S=[D],z={key:0},U=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-down"},null,-1),I=[U],L={key:1},$=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-up"},null,-1),A=[$],J={key:2},F=Object(a["createElementVNode"])("i",{style:{color:"silver"},class:"fas fa-sort-alpha-down"},null,-1),q=[F],G={key:0},H=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-down"},null,-1),Q=[H],R={key:1},W=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-up"},null,-1),X=[W],Y={key:2},Z=Object(a["createElementVNode"])("i",{style:{color:"silver"},class:"fas fa-sort-alpha-down"},null,-1),ee=[Z],te={key:0},ce=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-down"},null,-1),ae=[ce],se={key:1},le=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-up"},null,-1),oe=[le],ne={key:2},re=Object(a["createElementVNode"])("i",{style:{color:"silver"},class:"fas fa-sort-alpha-down"},null,-1),ie=[re],de={key:0},ue=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-down"},null,-1),be=[ue],je={key:1},Oe=Object(a["createElementVNode"])("i",{class:"fas fa-sort-alpha-up"},null,-1),pe=[Oe],fe={key:2},me=Object(a["createElementVNode"])("i",{style:{color:"silver"},class:"fas fa-sort-alpha-down"},null,-1),ve=[me],ke={style:{height:"calc(100vh - 300px)",overflow:"hidden","overflow-y":"scroll"}},ye=["onClick"],he={style:{width:"30px",padding:"10px","font-size":"14px"}},ge={style:{flex:"1",padding:"10px","font-size":"14px"}},we={style:{flex:"1",padding:"10px","font-size":"14px","text-align":"center"}},xe={style:{width:"90px",padding:"10px","font-size":"14px","text-align":"center"}},Ve={style:{width:"90px",padding:"10px","font-size":"14px","text-align":"center"}};var Be={__name:"edit-users",setup(e,{expose:t}){const c=(e,t)=>{window.$showTip(e,t)},C=(e,t)=>{window.$hideTip(e,t)},P=Object(r["b"])(),D=Object(a["ref"])(""),U=Object(a["ref"])(0),$=Object(a["ref"])(!1),F=Object(a["inject"])("edit-user"),H=Object(a["inject"])("link-objects"),W=Object(a["inject"])("log-objects"),Z=Object(a["ref"])("id-asc"),ce=e=>{const t=Z.value.split("-");t[0]===e?Z.value=e+"-"+("asc"===t[1]?"desc":"asc"):Z.value=e+"-asc"},le=Object(a["computed"])(()=>{const e=Z.value.split("-");return[...P.getters["users/getUsers"]].filter(e=>{for(let t of Object.keys(e))if(String(e[t]).toLowerCase().match(D.value.toLowerCase()))return!0;for(let t of Object.keys(e.attributes))if(String(e.attributes[t]).toLowerCase().match(D.value.toLowerCase()))return!0;return!1}).sort((t,c)=>{if("administrator"===e[0]||"disabled"===e[0])return"asc"===e[1]?!0===t[e[0]]&&!1===c[e[0]]?1:-1:!0===t[e[0]]&&!1===c[e[0]]?-1:1;if("name"===e[0]){if("asc"===e[1])return t[e[0]].localeCompare(c[e[0]]);{const a=t[e[0]].localeCompare(c[e[0]]);return 1===a?-1:-1===a?1:0}}return t[e[0]]&&c[e[0]]?"created_at"===e[0]?new Date(t[e[0]])<new Date(c[e[0]])?"asc"===e[1]?1:-1:new Date(t[e[0]])>new Date(c[e[0]])?"desc"===e[1]?1:-1:0:t[e[0]]>c[e[0]]?"asc"===e[1]?1:-1:t[e[0]]<c[e[0]]?"desc"===e[1]?1:-1:0:"desc"===e[1]?1:-1})}),re=()=>{if(0===U.value)return s["a"].error("Você precisa selecionar um usuário"),!1;if(U.value===P.state.auth.id)return s["a"].error("Você não pode se deletar!"),!1;const e=P.getters["users/getUser"](U.value);if(e.id<P.state.auth.id&&e.administrator)return s["a"].error("Você não pode deletar um admin superior a você!"),!1;i["a"].confirm('Você está excluindo o usuário "'+e.name+'", deseja continuar?',"Perigo!",{confirmButtonText:"Excluir",confirmButtonClass:"danger",cancelButtonText:"Cancelar",type:"warning"}).then(()=>{P.dispatch("users/deleteUser",U.value).then(()=>{Object(d["a"])({title:"Successo",message:"Usuário deletado com sucesso.",type:"success"}),U.value=0}).catch(e=>{Object(d["a"])({title:"Erro",message:e.response.data,type:"danger"})})}).catch(()=>{s["a"].error("Ação cancelada pelo usuário")})},ue=()=>{$.value=!0};return t({showUsers:ue}),(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(l["a"]),{"lock-scroll":!0,top:"50px",width:"60%",modelValue:$.value,"onUpdate:modelValue":t[30]||(t[30]=e=>$.value=e),title:"Teste"},{title:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("div",b,[Object(a["createVNode"])(Object(a["unref"])(o["a"]),{modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=e=>D.value=e),placeholder:e.KT("user.search"),style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue","placeholder"]),Object(a["unref"])(P).getters.advancedPermissions(17)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:0,onMouseleave:C,onMouseenter:t[1]||(t[1]=Object(a["withModifiers"])(t=>c(t,e.KT("user.add")),["stop"])),type:"primary",onClick:t[2]||(t[2]=e=>Object(a["unref"])(F).newUser())},{default:Object(a["withCtx"])(()=>[j]),_:1})):Object(a["createCommentVNode"])("",!0)])])]),footer:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",O,[Object(a["unref"])(P).getters.advancedPermissions(19)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:0,onMouseleave:C,onMouseenter:t[3]||(t[3]=Object(a["withModifiers"])(t=>c(t,e.KT("user.remove")),["stop"])),type:"danger",plain:0===U.value,onClick:t[4]||(t[4]=e=>re())},{default:Object(a["withCtx"])(()=>[p]),_:1},8,["plain"])):Object(a["createCommentVNode"])("",!0),Object(a["unref"])(P).getters.advancedPermissions(18)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:1,onMouseleave:C,onMouseenter:t[5]||(t[5]=Object(a["withModifiers"])(t=>c(t,e.KT("user.edit")),["stop"])),type:"warning",plain:0===U.value,onClick:t[6]||(t[6]=e=>{Object(a["unref"])(F).editUser(U.value)})},{default:Object(a["withCtx"])(()=>[f]),_:1},8,["plain"])):Object(a["createCommentVNode"])("",!0),Object(a["unref"])(P).state.server.isPlus&&Object(a["unref"])(P).state.auth.administrator?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:2,onMouseleave:C,onMouseenter:t[7]||(t[7]=Object(a["withModifiers"])(t=>c(t,e.KT("user.logs")),["stop"])),plain:"",disabled:0===U.value,onClick:t[8]||(t[8]=e=>{Object(a["unref"])(W).showLogs({userId:U.value})})},{default:Object(a["withCtx"])(()=>[m]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",{style:{"margin-left":"5px","margin-right":"5px"},set:e.user=Object(a["unref"])(P).getters["users/getUser"](U.value)},[Object(a["unref"])(P).getters.advancedPermissions(16)&&Object(a["unref"])(P).getters.advancedPermissions(18)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:0,onMouseleave:C,onMouseenter:t[9]||(t[9]=Object(a["withModifiers"])(t=>c(t,e.KT("user.users")),["stop"])),plain:"",disabled:0===U.value||!(e.user&&(-1===e.user.userLimit||e.user.userLimit>0)),onClick:t[10]||(t[10]=e=>{Object(a["unref"])(H).showObjects({userId:U.value,type:"users"})})},{default:Object(a["withCtx"])(()=>[k]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0)],8,v),Object(a["unref"])(P).getters.advancedPermissions(18)&&Object(a["unref"])(P).getters.advancedPermissions(8)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:3,onMouseleave:C,onMouseenter:t[11]||(t[11]=Object(a["withModifiers"])(t=>c(t,e.KT("device.devices")),["stop"])),plain:"",disabled:0===U.value,onClick:t[12]||(t[12]=e=>{Object(a["unref"])(H).showObjects({userId:U.value,type:"devices"})})},{default:Object(a["withCtx"])(()=>[y]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0),Object(a["unref"])(P).getters.advancedPermissions(18)&&Object(a["unref"])(P).getters.advancedPermissions(40)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:4,onMouseleave:C,onMouseenter:t[13]||(t[13]=Object(a["withModifiers"])(t=>c(t,e.KT("geofence.geofences")),["stop"])),plain:"",disabled:0===U.value,onClick:t[14]||(t[14]=e=>{Object(a["unref"])(H).showObjects({userId:U.value,type:"geofences"})})},{default:Object(a["withCtx"])(()=>[h]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0),Object(a["unref"])(P).getters.advancedPermissions(18)&&Object(a["unref"])(P).getters.advancedPermissions(48)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:5,onMouseleave:C,onMouseenter:t[15]||(t[15]=Object(a["withModifiers"])(t=>c(t,e.KT("group.groups")),["stop"])),plain:"",disabled:0===U.value,onClick:t[16]||(t[16]=e=>{Object(a["unref"])(H).showObjects({userId:U.value,type:"groups"})})},{default:Object(a["withCtx"])(()=>[g]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0),Object(a["unref"])(P).getters.advancedPermissions(18)&&Object(a["unref"])(P).getters.advancedPermissions(32)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:6,onMouseleave:C,onMouseenter:t[17]||(t[17]=Object(a["withModifiers"])(t=>c(t,e.KT("notification.notifications")),["stop"])),plain:"",disabled:0===U.value,onClick:t[18]||(t[18]=e=>{Object(a["unref"])(H).showObjects({userId:U.value,type:"notifications"})})},{default:Object(a["withCtx"])(()=>[w]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0),Object(a["unref"])(P).getters.advancedPermissions(18)&&Object(a["unref"])(P).getters.advancedPermissions(88)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:7,onMouseleave:C,onMouseenter:t[19]||(t[19]=Object(a["withModifiers"])(t=>c(t,e.KT("calendar.calendars")),["stop"])),plain:"",disabled:0===U.value,onClick:t[20]||(t[20]=e=>{Object(a["unref"])(H).showObjects({userId:U.value,type:"calendars"})})},{default:Object(a["withCtx"])(()=>[x]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0),Object(a["unref"])(P).getters.advancedPermissions(18)&&Object(a["unref"])(P).getters.advancedPermissions(64)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:8,onMouseleave:C,onMouseenter:t[21]||(t[21]=Object(a["withModifiers"])(t=>c(t,e.KT("attribute.computedAttributes")),["stop"])),plain:"",disabled:0===U.value,onClick:t[22]||(t[22]=e=>{Object(a["unref"])(H).showObjects({userId:U.value,type:"attributes"})})},{default:Object(a["withCtx"])(()=>[V]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0),Object(a["unref"])(P).getters.advancedPermissions(18)&&Object(a["unref"])(P).getters.advancedPermissions(56)?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{key:9,onMouseleave:C,onMouseenter:t[23]||(t[23]=Object(a["withModifiers"])(t=>c(t,e.KT("command.savedCommands")),["stop"])),plain:"",disabled:0===U.value,onClick:t[24]||(t[24]=e=>{Object(a["unref"])(H).showObjects({userId:U.value,type:"commands"})})},{default:Object(a["withCtx"])(()=>[B]),_:1},8,["disabled"])):Object(a["createCommentVNode"])("",!0)])]),default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",E,[Object(a["createElementVNode"])("div",{onClick:t[25]||(t[25]=e=>ce("id")),style:{padding:"10px",width:"30px","font-size":"12px"}},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.KT("user.id"))+" ",1),"id-asc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",N,M)):"id-desc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",T,K)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",_,S))]),Object(a["createElementVNode"])("div",{onClick:t[26]||(t[26]=e=>ce("name")),style:{flex:"1",padding:"10px","font-size":"12px"}},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.KT("user.name"))+" ",1),"name-asc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",z,I)):"name-desc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",L,A)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",J,q))]),Object(a["createElementVNode"])("div",{onClick:t[27]||(t[27]=e=>ce("email")),style:{flex:"1",padding:"10px","font-size":"12px","text-align":"center"}},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.KT("user.email"))+" ",1),"email-asc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",G,Q)):"email-desc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",R,X)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Y,ee))]),Object(a["createElementVNode"])("div",{onClick:t[28]||(t[28]=e=>ce("administrator")),style:{width:"90px",padding:"10px","font-size":"12px","text-align":"center"}},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.KT("user.admin"))+" ",1),"administrator-asc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",te,ae)):"administrator-desc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",se,oe)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",ne,ie))]),Object(a["createElementVNode"])("div",{onClick:t[29]||(t[29]=e=>ce("disabled")),style:{width:"92px",padding:"10px","font-size":"12px","text-align":"center"}},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.KT("user.disabled"))+" ",1),"disabled-asc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",de,be)):"disabled-desc"===Z.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",je,pe)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",fe,ve))])]),Object(a["createElementVNode"])("div",ke,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object(a["unref"])(le),(t,c)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:Object(a["normalizeClass"])(["itm",{tr1:c%2,tr2:!(c%2),selected:U.value===t.id}]),key:c,onClick:e=>U.value=U.value!==t.id?t.id:0,style:{display:"flex"}},[Object(a["createElementVNode"])("div",he,Object(a["toDisplayString"])(t.id),1),Object(a["createElementVNode"])("div",ge,Object(a["toDisplayString"])(t.name),1),Object(a["createElementVNode"])("div",we,Object(a["toDisplayString"])(t.email),1),Object(a["createElementVNode"])("div",xe,Object(a["toDisplayString"])(t.administrator?e.$t("yes"):e.$t("no")),1),Object(a["createElementVNode"])("div",Ve,Object(a["toDisplayString"])(t.disabled?e.$t("yes"):e.$t("no")),1)],10,ye))),128))])]),_:1},8,["modelValue"]))}};c("1158");const Ee=Be;t["default"]=Ee},acdd:function(e,t,c){},bfed:function(e,t,c){}}]);