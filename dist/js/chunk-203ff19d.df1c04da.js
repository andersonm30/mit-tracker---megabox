(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-203ff19d"],{"0a69":function(e,t,a){"use strict";a("771d"),a("acdd")},"85c5":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),o=a("5502"),i=a("c9a1"),n=a("2295"),r=a("c0db"),l=(a("c4aa"),a("797a"),a("efc7"),a("cc66"),a("10c7"),a("751f"),a("858d"),a("4180"),a("0a35"),a("0a69"),a("3ef4")),s=a("db9d"),d=a("c349"),p=a("cf2e");const u={style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},b={class:"modal-title",style:{display:"flex",width:"calc(100% - 50px)"}},j=Object(c["createElementVNode"])("i",{class:"fas fa-user-plus"},null,-1),O={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"flex-start"}},m=Object(c["createElementVNode"])("i",{class:"fas fa-user-minus"},null,-1),f=Object(c["createElementVNode"])("i",{class:"fas fa-user-edit"},null,-1),x={class:"itm",style:{display:"flex",background:"#eeeeee"}},v={style:{flex:"1",padding:"10px","font-size":"12px"}},g={style:{flex:"1",padding:"10px","font-size":"12px","text-align":"center"}},h={style:{width:"90px",padding:"10px","font-size":"12px","text-align":"center"}},y={style:{width:"182px",padding:"10px","font-size":"12px","text-align":"center"}},k={style:{width:"202px",padding:"10px","font-size":"12px","text-align":"center"}},w={style:{height:"calc(100vh - 300px)",overflow:"hidden","overflow-y":"scroll"}},V=["onClick"],E={style:{flex:"1",padding:"10px","font-size":"14px"}},N={style:{flex:"1",padding:"10px","font-size":"14px","text-align":"center"}},C={style:{width:"90px",padding:"10px","font-size":"14px","text-align":"center"}},B={style:{width:"180px",padding:"10px","font-size":"14px","text-align":"center"}},S={style:{width:"220px","font-size":"14px","text-align":"center"}},T=["onClick"];var D={__name:"edit-shares",setup(e,{expose:t}){const a=(e,t)=>{window.$showTip(e,t)},D=(e,t)=>{window.$hideTip(e,t)},z=Object(o["b"])(),K=Object(c["ref"])(""),M=Object(c["ref"])(0),_=Object(c["ref"])(!1),F=Object(c["inject"])("edit-share"),L=Object(c["ref"])(window.location.protocol+"//"+r["a"][1]+"/share/"),P=e=>{var t;return(null===(t=z.getters["devices/getDevice"](e))||void 0===t?void 0:t.name)||"Device #"+e},I=async e=>{try{await navigator.clipboard.writeText(e),Object(n["a"])({title:"Sucesso",message:"Link copiado para a área de transferência!",type:"success"})}catch(t){Object(n["a"])({title:"Erro",message:"Falha ao copiar o link.",type:"error"})}},J=()=>{if(0===M.value)return l["a"].error("Você precisa selecionar um usuário"),!1;if(M.value===z.state.auth.id)return l["a"].error("Você não pode se deletar!"),!1;const e=z.getters["shares/getShare"](M.value);if(e.id<z.state.auth.id)return l["a"].error("Você não pode deletar um admin superior a você!"),!1;i["a"].confirm('Você está excluindo o compartilhamento "'+e.name+'", deseja continuar?',"Perigo!",{confirmButtonText:"Excluir",confirmButtonClass:"danger",cancelButtonText:"Cancelar",type:"warning"}).then(()=>{z.dispatch("shares/delete",M.value).then(()=>{Object(n["a"])({title:"Sucesso",message:"Compartilhamento deletado com sucesso.",type:"success"}),M.value=0}).catch(e=>{Object(n["a"])({title:"Erro",message:e.response.data,type:"danger"})})}).catch(()=>{l["a"].error("Ação cancelada pelo usuário")})},U=()=>{_.value=!0};return t({showShares:U}),(e,t)=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(s["a"]),{"lock-scroll":!0,top:"50px",width:"60%",modelValue:_.value,"onUpdate:modelValue":t[7]||(t[7]=e=>_.value=e),title:"Teste"},{title:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",b,[Object(c["createVNode"])(Object(c["unref"])(d["a"]),{modelValue:K.value,"onUpdate:modelValue":t[0]||(t[0]=e=>K.value=e),placeholder:e.KT("user.search"),style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue","placeholder"]),Object(c["unref"])(z).getters.advancedPermissions(25)?(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(p["a"]),{key:0,onMouseleave:D,onMouseenter:t[1]||(t[1]=Object(c["withModifiers"])(t=>a(t,e.KT("share.add")),["stop"])),type:"primary",onClick:t[2]||(t[2]=e=>Object(c["unref"])(F).newShare())},{default:Object(c["withCtx"])(()=>[j]),_:1})):Object(c["createCommentVNode"])("",!0)])])]),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",O,[Object(c["unref"])(z).getters.advancedPermissions(27)?(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(p["a"]),{key:0,onMouseleave:D,onMouseenter:t[3]||(t[3]=Object(c["withModifiers"])(t=>a(t,e.KT("share.remove")),["stop"])),type:"danger",plain:0===M.value,onClick:t[4]||(t[4]=e=>J())},{default:Object(c["withCtx"])(()=>[m]),_:1},8,["plain"])):Object(c["createCommentVNode"])("",!0),Object(c["unref"])(z).getters.advancedPermissions(26)?(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(p["a"]),{key:1,onMouseleave:D,onMouseenter:t[5]||(t[5]=Object(c["withModifiers"])(t=>a(t,e.KT("share.edit")),["stop"])),type:"warning",plain:0===M.value,onClick:t[6]||(t[6]=e=>Object(c["unref"])(F).editShare(M.value))},{default:Object(c["withCtx"])(()=>[f]),_:1},8,["plain"])):Object(c["createCommentVNode"])("",!0)])]),default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",x,[Object(c["createElementVNode"])("div",v,Object(c["toDisplayString"])(e.KT("user.name")),1),Object(c["createElementVNode"])("div",g,Object(c["toDisplayString"])(e.KT("user.device")),1),Object(c["createElementVNode"])("div",h,Object(c["toDisplayString"])(e.KT("user.limitCommands")),1),Object(c["createElementVNode"])("div",y,Object(c["toDisplayString"])(e.KT("user.expirationTime")),1),Object(c["createElementVNode"])("div",k,Object(c["toDisplayString"])(e.KT("user.shareLink")),1)]),Object(c["createElementVNode"])("div",w,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(z).state.shares.list,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:Object(c["normalizeClass"])(["itm",{tr1:t%2,tr2:!(t%2),selected:M.value===e.id}]),key:t,onClick:t=>M.value=M.value!==e.id?e.id:0,style:{display:"flex"}},[Object(c["createElementVNode"])("div",E,Object(c["toDisplayString"])(e.name),1),Object(c["createElementVNode"])("div",N,[P(e.deviceId)?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(P(e.deviceId)),1)],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[Object(c["createTextVNode"])(" Device #"+Object(c["toDisplayString"])(e.deviceId),1)],64))]),Object(c["createElementVNode"])("div",C,Object(c["toDisplayString"])(e.limitCommands?"Não":"Sim"),1),Object(c["createElementVNode"])("div",B,Object(c["toDisplayString"])(new Date(e.expirationTime).toLocaleString()),1),Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("span",{onClick:t=>I(L.value+e.token),style:{cursor:"pointer",color:"blue","text-decoration":"underline"}},Object(c["toDisplayString"])(L.value+e.token),9,T)])],10,V))),128))])]),_:1},8,["modelValue"]))}};a("be16");const z=D;t["default"]=z},acdd:function(e,t,a){},be16:function(e,t,a){"use strict";a("fb9c")},fb9c:function(e,t,a){}}]);