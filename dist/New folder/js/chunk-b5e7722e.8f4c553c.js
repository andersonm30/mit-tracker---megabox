(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5e7722e"],{"0a69":function(e,t,c){"use strict";c("771d"),c("acdd")},"5c12":function(e,t,c){"use strict";c.d(t,"a",(function(){return C}));var a=c("a3ae"),l=c("7a23"),o=c("7d20"),i=c("443c"),n=c("8afb"),r=c("54bb"),d=c("7bc7"),b=c("a3d3"),u=c("f04b"),s=c("546d"),v=c("c23a");const O="ElSwitch";var j=Object(l["defineComponent"])({name:O,components:{ElIcon:r["a"],Loading:d["Loading"]},props:u["b"],emits:u["a"],setup(e,{emit:t}){const{formItem:c}=Object(s["a"])(),a=Object(v["a"])(Object(l["computed"])(()=>e.loading)),r=Object(l["ref"])(!1!==e.modelValue),d=Object(l["ref"])(),u=Object(l["ref"])();Object(l["watch"])(()=>e.modelValue,()=>{r.value=!0}),Object(l["watch"])(()=>e.value,()=>{r.value=!1});const j=Object(l["computed"])(()=>r.value?e.modelValue:e.value),m=Object(l["computed"])(()=>j.value===e.activeValue);[e.activeValue,e.inactiveValue].includes(j.value)||(t(b["c"],e.inactiveValue),t(b["a"],e.inactiveValue),t(b["b"],e.inactiveValue)),Object(l["watch"])(m,()=>{var t;d.value.checked=m.value,(e.activeColor||e.inactiveColor)&&h(),e.validateEvent&&(null==(t=null==c?void 0:c.validate)||t.call(c,"change"))});const p=()=>{const c=m.value?e.inactiveValue:e.activeValue;t(b["c"],c),t(b["a"],c),t(b["b"],c),Object(l["nextTick"])(()=>{d.value.checked=m.value})},f=()=>{if(a.value)return;const{beforeChange:t}=e;if(!t)return void p();const c=t(),l=[Object(o["isPromise"])(c),Object(i["g"])(c)].some(e=>e);l||Object(n["b"])(O,"beforeChange must return type `Promise<boolean>` or `boolean`"),Object(o["isPromise"])(c)?c.then(e=>{e&&p()}).catch(e=>{Object(n["a"])(O,"some error occurred: "+e)}):c&&p()},h=()=>{const t=m.value?e.activeColor:e.inactiveColor,c=u.value;e.borderColor?c.style.borderColor=e.borderColor:e.borderColor||(c.style.borderColor=t),c.style.backgroundColor=t,c.children[0].style.color=t},k=()=>{var e,t;null==(t=null==(e=d.value)?void 0:e.focus)||t.call(e)};return Object(l["onMounted"])(()=>{(e.activeColor||e.inactiveColor||e.borderColor)&&h(),d.value.checked=m.value}),{input:d,core:u,switchDisabled:a,checked:m,handleChange:p,switchValue:f,focus:k}}});const m=["aria-checked","aria-disabled"],p=["id","name","true-value","false-value","disabled"],f=["aria-hidden"],h={key:0,class:"el-switch__inner"},k=["aria-hidden"],V=["aria-hidden"],g={class:"el-switch__action"},y=["aria-hidden"];function x(e,t,c,a,o,i){const n=Object(l["resolveComponent"])("el-icon"),r=Object(l["resolveComponent"])("loading");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["el-switch",{"is-disabled":e.switchDisabled,"is-checked":e.checked}]),role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled,onClick:t[2]||(t[2]=Object(l["withModifiers"])((...t)=>e.switchValue&&e.switchValue(...t),["prevent"]))},[Object(l["createElementVNode"])("input",{id:e.id,ref:"input",class:"el-switch__input",type:"checkbox",name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled,onChange:t[0]||(t[0]=(...t)=>e.handleChange&&e.handleChange(...t)),onKeydown:t[1]||(t[1]=Object(l["withKeys"])((...t)=>e.switchValue&&e.switchValue(...t),["enter"]))},null,40,p),e.inlinePrompt||!e.inactiveIcon&&!e.inactiveText?Object(l["createCommentVNode"])("v-if",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:Object(l["normalizeClass"])(["el-switch__label","el-switch__label--left",e.checked?"":"is-active"])},[e.inactiveIcon?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["resolveDynamicComponent"])(e.inactiveIcon)))]),_:1})):Object(l["createCommentVNode"])("v-if",!0),!e.inactiveIcon&&e.inactiveText?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:1,"aria-hidden":e.checked},Object(l["toDisplayString"])(e.inactiveText),9,f)):Object(l["createCommentVNode"])("v-if",!0)],2)),Object(l["createElementVNode"])("span",{ref:"core",class:"el-switch__core",style:Object(l["normalizeStyle"])({width:(e.width||40)+"px"})},[e.inlinePrompt?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",h,[e.activeIcon||e.inactiveIcon?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[e.activeIcon?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,class:Object(l["normalizeClass"])(["is-icon",e.checked?"is-show":"is-hide"])},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["resolveDynamicComponent"])(e.activeIcon)))]),_:1},8,["class"])):Object(l["createCommentVNode"])("v-if",!0),e.inactiveIcon?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:1,class:Object(l["normalizeClass"])(["is-icon",e.checked?"is-hide":"is-show"])},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["resolveDynamicComponent"])(e.inactiveIcon)))]),_:1},8,["class"])):Object(l["createCommentVNode"])("v-if",!0)],64)):e.activeText||e.inactiveIcon?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[e.activeText?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:Object(l["normalizeClass"])(["is-text",e.checked?"is-show":"is-hide"]),"aria-hidden":!e.checked},Object(l["toDisplayString"])(e.activeText.substr(0,1)),11,k)):Object(l["createCommentVNode"])("v-if",!0),e.inactiveText?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:1,class:Object(l["normalizeClass"])(["is-text",e.checked?"is-hide":"is-show"]),"aria-hidden":e.checked},Object(l["toDisplayString"])(e.inactiveText.substr(0,1)),11,V)):Object(l["createCommentVNode"])("v-if",!0)],64)):Object(l["createCommentVNode"])("v-if",!0)])):Object(l["createCommentVNode"])("v-if",!0),Object(l["createElementVNode"])("div",g,[e.loading?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,class:"is-loading"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r)]),_:1})):Object(l["createCommentVNode"])("v-if",!0)])],4),e.inlinePrompt||!e.activeIcon&&!e.activeText?Object(l["createCommentVNode"])("v-if",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:1,class:Object(l["normalizeClass"])(["el-switch__label","el-switch__label--right",e.checked?"is-active":""])},[e.activeIcon?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["resolveDynamicComponent"])(e.activeIcon)))]),_:1})):Object(l["createCommentVNode"])("v-if",!0),!e.activeIcon&&e.activeText?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:1,"aria-hidden":!e.checked},Object(l["toDisplayString"])(e.activeText),9,y)):Object(l["createCommentVNode"])("v-if",!0)],2))],10,m)}j.render=x,j.__file="packages/components/switch/src/switch.vue";const C=Object(a["a"])(j)},"5c3a":function(e,t,c){"use strict";c("7579")},7579:function(e,t,c){},acdd:function(e,t,c){},d8ce:function(e,t,c){"use strict";c.r(t);c("5b81");var a=c("7a23"),l=(c("c4aa"),c("797a"),c("efc7"),c("cc66"),c("10c7"),c("751f"),c("858d"),c("4180"),c("0a35"),c("0a69"),c("2295")),o=c("c9a1"),i=c("3ef4"),n=c("db9d"),r=c("cf2e"),d=c("d8e8"),b=c("e0ad"),u=c("c349"),s=c("5c12"),v=c("91c0"),O=c("5502"),j=c("1dc4");const m={style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},p={class:"modal-title"},f={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},h={style:{display:"flex"}},k={style:{flex:"1","margin-right":"5px"}},V={style:{"margin-top":"15px","font-weight":"bold","border-bottom":"silver 1px dotted","padding-bottom":"5px"}},g={style:{display:"flex","margin-top":"5px","align-content":"space-between","justify-content":"space-between","padding-top":"3px","padding-bottom":"3px","border-bottom":"1px dotted","border-color":"var(--el-color-info-light)"}},y={style:{flex:"1","margin-left":"5px","text-align":"center"}},x=["src"],C=Object(a["createElementVNode"])("br",null,null,-1),w=Object(a["createElementVNode"])("br",null,null,-1);var N={__name:"qr-device",setup(e,{expose:t}){const c=Object(O["b"])(),N=Object(a["ref"])(!1),B=Object(a["ref"])("first"),_=Object(a["ref"])(""),D=Object(a["ref"])(null),E=Object(a["ref"])(0),I=Object(a["ref"])(!1),S=Object(a["reactive"])({name:[{required:!0,message:Object(j["a"])("device.form.nameEmpty"),trigger:"blur"}],uniqueId:[{required:!0,message:Object(j["a"])("device.form.uniqueIdEmpty"),trigger:"blur"}]}),T=Object(a["ref"])(0),q=Object(a["ref"])(100),M=Object(a["ref"])(100),z=Object(a["ref"])(0),U=Object(a["ref"])(100),F=Object(a["ref"])(100),J=Object(a["ref"])(defaultDeviceData),P=()=>{const e=J.value.attributes["tarkan.color"],t=J.value.attributes["tarkan.color_extra"];if(e){const e=J.value.attributes["tarkan.color"].split("|");T.value=parseInt(e[0]?e[0]:0),q.value=parseInt(e[1]?100*e[1]:100),M.value=parseInt(e[2]?100*e[2]:100)}else T.value=0,q.value=0,M.value=180;if(t){const e=J.value.attributes["tarkan.color_extra"].split("|");z.value=parseInt(e[0]?e[0]:0),U.value=parseInt(e[1]?100*e[1]:100),F.value=parseInt(e[2]?100*e[2]:100)}else z.value=0,U.value=0,F.value=180},L=()=>{B.value="first",_.value=Object(j["a"])("device.add"),J.value=JSON.parse(JSON.stringify(defaultDeviceData)),N.value=!0,E.value=0},R=e=>{B.value="first",_.value=Object(j["a"])("device.manageQrCode"),J.value=JSON.parse(JSON.stringify(defaultDeviceData));const t=c.getters["devices/getDevice"](e);for(let c of Object.keys(defaultDeviceData))J.value[c]="attributes"===c?null===t[c]?{}:JSON.parse(JSON.stringify(t[c])):null===t[c]?"":t[c];P();const a=c.getters["devices/getPosition"](t.id);E.value=a?a.attributes["totalDistance"]:0;const l=document.location.protocol+"//"+document.location.host+"/qr-driver/scan/"+J.value.id;I.value="https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl="+l+"&chld=H|1",N.value=!0},$=e=>fetch(e).then(e=>e.blob()).then(e=>URL.createObjectURL(e)),A=async()=>{const e=document.location.protocol+"//"+document.location.host+"/qr-driver/scan/"+J.value.id;var t=document.createElement("a");t.setAttribute("href",await $("https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl="+e+"&chld=H|1")),t.setAttribute("download",J.value.id+"-"+J.value.name+".png"),document.body.appendChild(t),t.click(),t.remove()};t({newDevice:L,editDevice:R});const K=()=>{N.value=!1},H=()=>{D.value.validate(e=>{e?(J.value.attributes["tarkan.color"]=T.value+"|"+(q.value/100).toFixed(2)+"|"+(M.value/100).toFixed(2),J.value.attributes["tarkan.color_extra"]=z.value+"|"+(U.value/100).toFixed(2)+"|"+(F.value/100).toFixed(2),Object(l["a"])({title:Object(j["a"])("info"),message:Object(j["a"])("device.saving"),type:"info"}),J.value.uniqueId=J.value.uniqueId.trim(),c.dispatch("devices/save",J.value).then(e=>{c.dispatch("devices/accumulators",{deviceId:e.id,totalDistance:E.value}),Object(l["a"])({title:Object(j["a"])("success"),message:Object(j["a"])("device.saved"),type:"info"}),N.value=!1}).catch(e=>{const t=e.response.data.split("-")[0].trim().replaceAll(" ","_").toUpperCase();o["a"].alert(Object(j["a"])("device.error."+t),Object(j["a"])("device.saveError"),{confirmButtonText:"OK"})})):i["a"].error(Object(j["a"])("device.error.checkForm"))})};return(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["unref"])(n["a"]),{"lock-scroll":!0,modelValue:N.value,"onUpdate:modelValue":t[8]||(t[8]=e=>N.value=e)},{title:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("div",p,Object(a["toDisplayString"])(_.value),1)])]),footer:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",f,[Object(a["createVNode"])(Object(a["unref"])(r["a"]),{type:"danger",plain:"",onClick:t[0]||(t[0]=e=>K())},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(Object(a["unref"])(j["a"])("cancel")),1)]),_:1}),Object(a["createVNode"])(Object(a["unref"])(r["a"]),{type:"primary",onClick:t[1]||(t[1]=e=>H())},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(Object(a["unref"])(j["a"])("save")),1)]),_:1})])]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(d["a"]),{ref_key:"formRef",ref:D,model:J.value,rules:S,"label-width":"120px","label-position":"top"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(b["b"]),{modelValue:B.value,"onUpdate:modelValue":t[7]||(t[7]=e=>B.value=e)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(b["a"]),{label:Object(a["unref"])(j["a"])("device.device"),name:"first"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",k,[Object(a["createVNode"])(Object(a["unref"])(d["b"]),{label:Object(a["unref"])(j["a"])("device.imei"),prop:"uniqueId"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(u["a"]),{disabled:"",modelValue:J.value.uniqueId,"onUpdate:modelValue":t[2]||(t[2]=e=>J.value.uniqueId=e)},null,8,["modelValue"])]),_:1},8,["label"]),Object(a["createVNode"])(Object(a["unref"])(d["b"]),{label:Object(a["unref"])(j["a"])("device.name"),prop:"name"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(u["a"]),{disabled:"",modelValue:J.value.name,"onUpdate:modelValue":t[3]||(t[3]=e=>J.value.name=e)},null,8,["modelValue"])]),_:1},8,["label"]),Object(a["createElementVNode"])("div",V,Object(a["toDisplayString"])(e.$t("driver.qrDriver.behaviorRules")),1),Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.$t("driver.qrDriver.lockDevice")),1),Object(a["createVNode"])(Object(a["unref"])(s["a"]),{modelValue:J.value["attributes"]["tarkan.driverLockDevice"],"onUpdate:modelValue":t[4]||(t[4]=e=>J.value["attributes"]["tarkan.driverLockDevice"]=e),"inactive-text":e.$t("no"),"active-text":e.$t("yes"),"active-value":1,"inactive-value":0},null,8,["modelValue","inactive-text","active-text"])]),Object(a["createVNode"])(Object(a["unref"])(d["b"]),{label:Object(a["unref"])(j["a"])("driver.qrDriver.lockDeviceTimeout"),prop:"name"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(v["b"]),{size:"large",modelValue:J.value["attributes"]["tarkan.lockDeviceTimeout"],"onUpdate:modelValue":t[5]||(t[5]=e=>J.value["attributes"]["tarkan.lockDeviceTimeout"]=e)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(v["a"]),{value:1,label:"1 Minuto"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("1 Minuto")]),_:1}),Object(a["createVNode"])(Object(a["unref"])(v["a"]),{value:2,label:"2 Minutos"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("2 Minutos")]),_:1}),Object(a["createVNode"])(Object(a["unref"])(v["a"]),{value:3,label:"3 Minutos"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("3 Minutos")]),_:1}),Object(a["createVNode"])(Object(a["unref"])(v["a"]),{value:4,label:"4 Minutos"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("4 Minutos")]),_:1}),Object(a["createVNode"])(Object(a["unref"])(v["a"]),{value:5,label:"5 Minutos"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("5 Minutos")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),Object(a["createElementVNode"])("div",y,[I.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("img",{key:0,src:I.value},null,8,x)):Object(a["createCommentVNode"])("",!0),C,Object(a["createVNode"])(Object(a["unref"])(r["a"]),{onClick:t[6]||(t[6]=e=>A()),type:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Download")]),_:1}),w])])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]))}};c("5c3a");const B=N;t["default"]=B},f04b:function(e,t,c){"use strict";c.d(t,"a",(function(){return r})),c.d(t,"b",(function(){return n}));var a=c("bc34"),l=c("a3d3"),o=c("443c"),i=c("7d20");const n=Object(a["b"])({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:Object(a["d"])([String,Object]),default:""},inactiveIcon:{type:Object(a["d"])([String,Object]),default:""},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:Object(a["d"])(Function)}}),r={[l["c"]]:e=>Object(o["g"])(e)||Object(i["isString"])(e)||Object(o["j"])(e),[l["a"]]:e=>Object(o["g"])(e)||Object(i["isString"])(e)||Object(o["j"])(e),[l["b"]]:e=>Object(o["g"])(e)||Object(i["isString"])(e)||Object(o["j"])(e)}}}]);