{"version":3,"sources":["webpack:///./src/tarkan/components/views/edit-command.vue?6271","webpack:///./src/templates/commands.vue?d44b","webpack:///./src/tarkan/components/views/edit-command.vue","webpack:///./src/tarkan/components/views/edit-command.vue?7e8f","webpack:///./src/templates/commands.vue","webpack:///./src/templates/commands.vue?897c"],"names":["defaultGeofenceData","i18nInstance","t","$s","store","deviceList","show","tab","changeNative","types","actions","type","window","$traccar","getTypeCommands","then","data","value","formData","newCommand","JSON","parse","stringify","editCommand","command","Object","assign","doCancel","doDelete","confirm","dispatch","id","title","message","doSave","tmp","selectedDevices","selected","length","device","console","log","name","linkObjects","deviceId","commandId","__exports__","query","editCommandRef","filteredDevices","state","commands","commandList","filter","d","description","toLowerCase","match"],"mappings":"2IAAA,W,yDCAA,W,+wBCgFMA,EAAsB,CAC1B,GAAM,EACN,SAAY,EACZ,YAAe,GACf,KAAQ,GACR,WAAc,IAUVC,EAAe,iBAEfC,EAAI,SAACC,GACT,OAAOF,EAAaC,EAAEC,IAAOA,GAGzBC,EAAQ,iBAIRC,EAAa,iBAAI,MACjBC,EAAO,kBAAI,GACXC,EAAM,iBAAI,SAEVC,EAAe,kBAAI,GACnBC,EAAQ,iBAAI,IACZC,EAAU,iBAAI,CAAC,CAACC,KAAM,cAAc,CAACA,KAAM,kBAEjD,wBAAU,WACRC,OAAOC,SAASC,kBAAkBC,MAAK,YAAU,IAARC,EAAQ,EAARA,KACvCP,EAAMQ,MAAQD,QAOlB,IAAME,EAAW,iBAAIlB,GAKfmB,EAAa,WAEfD,EAASD,MAAQG,KAAKC,MAAMD,KAAKE,UAAUtB,IAC3CM,EAAKW,OAAQ,GAGXM,EAAc,SAACC,GAGnBN,EAASD,MAAQG,KAAKC,MAAMD,KAAKE,UAAUtB,IAG3CyB,OAAOC,OAAOR,EAASD,MAAMG,KAAKC,MAAMD,KAAKE,UAAUE,KAEvDlB,EAAKW,OAAQ,GAGf,EAAa,CACXE,aACAI,gBAMF,IAAMI,EAAW,WACfrB,EAAKW,OAAQ,GAITW,EAAW,WACf,OAAaC,QAAQ,yCAAyC,gBAAgBd,MAAK,WACjFX,EAAM0B,SAAS,kBAAkBZ,EAASD,MAAMc,IAAIhB,MAAK,WACvDT,EAAKW,OAAQ,EACb,eAAe,CACbe,MAAO,OACPC,QAAS,+BACTtB,KAAM,gBAMRuB,EAAS,WAEb,eAAe,CACbF,MAAO,OACPC,QAAS,6BACTtB,KAAM,SAGR,IAAMwB,EAAMf,KAAKC,MAAMD,KAAKE,UAAUtB,IAEtCyB,OAAOC,OAAOS,EAAIjB,EAASD,OAI3Bb,EAAM0B,SAAS,gBAAgBK,GAAKpB,KAApC,yDAAyC,WAAOC,GAAP,gGACjCoB,EAAkB/B,EAAWY,MAAMoB,WAEtCD,EAAgBE,OAAO,GAHa,kCAInBF,GAJmB,gEAI7BG,EAJ6B,QAMnCC,QAAQC,IAAIF,GAEZ,eAAe,CACbP,MAAO,OACPC,QAAS,qCAAqCM,EAAOG,KACrD/B,KAAM,SAX2B,UAc7BC,OAAOC,SAAS8B,YAAY,CAACC,SAAUL,EAAOR,GAAGc,UAAW7B,EAAKe,KAdpC,kJAoBvC,eAAe,CACbC,MAAO,WACPC,QAAS,gDACTtB,KAAM,YAGRL,EAAKW,OAAQ,EA1B0B,gEAAzC,wD,w5ICnLF,MAAM6B,EAAc,EAEL,Q,qgCCoCf,IAAM1C,EAAQ,iBAER2C,EAAQ,iBAAI,IACZC,EAAiB,iBAAI,MAKrBC,EAAkB,uBAAS,WAC/B,MAAmB,KAAhBF,EAAM9B,MACAb,EAAM8C,MAAMC,SAASC,YAErBhD,EAAM8C,MAAMC,SAASC,YAAYC,QAAO,SAACC,GAC9C,OAAOA,EAAEC,YAAYC,cAAcC,MAAMV,EAAM9B,MAAMuC,qB,++CClD3D,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD","file":"js/chunk-c36e2468.1b038fc2.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./edit-command.vue?vue&type=style&index=0&id=daadabfc&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./commands.vue?vue&type=style&index=0&id=3daa2fc6&scoped=true&lang=css\"","<template>\r\n  <el-dialog :lock-scroll=\"true\" v-model=\"show\" title=\"Teste\">\r\n\r\n    <template v-slot:title>\r\n      <div  style=\"border-bottom: #e0e0e0 1px solid;padding: 20px;\">\r\n        <div class=\"modal-title\" >Cadastrar Comando</div>\r\n      </div>\r\n    </template>\r\n    <template v-slot:footer>\r\n      <div  style=\"border-top: #e0e0e0 1px solid;padding: 20px;display: flex;justify-content: space-between\">\r\n        <div><el-button  type=\"danger\" @click=\"doDelete()\">Excluir</el-button></div>\r\n        <div><el-button type=\"danger\" plain @click=\"doCancel()\">Cancelar</el-button>\r\n          <el-button type=\"primary\" @click=\"doSave()\">Salvar</el-button></div>\r\n      </div>\r\n    </template>\r\n\r\n    <el-tabs v-model=\"tab\">\r\n      <el-tab-pane label=\"Comando\" name=\"first\">\r\n        <el-form label-width=\"120px\" label-position=\"top\">\r\n          <el-form-item label=\"Nome do Comando\" >\r\n            <el-input v-model=\"formData.description\"></el-input>\r\n          </el-form-item>\r\n\r\n\r\n          <el-form-item label=\"Tipo de Comando\" >\r\n            <el-select v-model=\"formData.type\" :value-key=\"'id'\" filterable placeholder=\"Tipo de Comando\" :size=\"'large'\" :no-data-text=\"'Nenhum tipo disponível'\">\r\n              <el-option\r\n                  v-for=\"item in types\"\r\n                  :key=\"item.type\"\r\n                  :label=\"t('actions.'+item.type)\"\r\n                  :value=\"item.type\"\r\n              >\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n\r\n          <el-form-item v-if=\"formData.type==='custom'\" label=\"Enviar\" >\r\n            <el-input v-model=\"formData.attributes['data']\"></el-input>\r\n          </el-form-item>\r\n\r\n\r\n          <br>\r\n          <el-switch\r\n              v-model=\"changeNative\"\r\n              active-text=\"Substituir um comando nativo por este comando.\"\r\n          >\r\n          </el-switch>\r\n          <el-form-item v-if=\"changeNative\" label=\"Qual ação você deseja substituir?\" >\r\n            <el-select v-model=\"formData.attributes['tarkan.changeNative']\" :value-key=\"'id'\" filterable placeholder=\"Grupo\" :size=\"'large'\" :no-data-text=\"'Nenhum tipo disponível'\">\r\n              <el-option\r\n                  v-for=\"item in actions\"\r\n                  :key=\"item.type\"\r\n                  :label=\"t('actions.'+item.type)\"\r\n                  :value=\"item.type\"\r\n              >\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n\r\n\r\n\r\n\r\n\r\n        </el-form>\r\n\r\n\r\n      </el-tab-pane>\r\n\r\n      <el-tab-pane label=\"Dispositivos\" :name=\"devices\">\r\n        <tab-devices ref=\"deviceList\"></tab-devices>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </el-dialog>\r\n</template>\r\n\r\n\r\n<script setup>\r\n\r\nimport TabDevices from \"./tab-devices\";\r\n\r\nconst defaultGeofenceData = {\r\n  \"id\": 0,\r\n  \"deviceId\": 0,\r\n  \"description\": \"\",\r\n  \"type\": \"\",\r\n  \"attributes\": { }\r\n}\r\n\r\n\r\nimport {ElMessageBox, ElNotification} from 'element-plus';\r\nimport {ref, defineExpose, onMounted} from 'vue';\r\nimport {useStore} from 'vuex'\r\n\r\nimport {useI18n} from \"vue3-i18n\";\r\n\r\nconst i18nInstance = useI18n();\r\n\r\nconst t = ($s)=>{\r\n  return i18nInstance.t($s) || $s;\r\n}\r\n\r\nconst store = useStore();\r\n\r\nimport {ElDialog,ElForm,ElFormItem,ElInput} from 'element-plus'\r\n\r\nconst deviceList = ref(null);\r\nconst show = ref(false);\r\nconst tab = ref('first');\r\n\r\nconst changeNative = ref(false);\r\nconst types = ref([]);\r\nconst actions = ref([{type: 'engineStop'},{type: 'engineResume'}]);\r\n\r\nonMounted(()=>{\r\n  window.$traccar.getTypeCommands().then(({data})=>{\r\n    types.value = data;\r\n  });\r\n})\r\n\r\n\r\n\r\n// eslint-disable-next-line no-undef\r\nconst formData = ref(defaultGeofenceData);\r\n\r\n\r\n\r\n\r\nconst newCommand = ()=>{\r\n  // eslint-disable-next-line no-undef\r\n    formData.value = JSON.parse(JSON.stringify(defaultGeofenceData));\r\n    show.value = true;\r\n}\r\n\r\nconst editCommand = (command)=>{\r\n\r\n  // eslint-disable-next-line no-undef\r\n  formData.value = JSON.parse(JSON.stringify(defaultGeofenceData));\r\n\r\n\r\n  Object.assign(formData.value,JSON.parse(JSON.stringify(command)));\r\n\r\n  show.value = true;\r\n}\r\n\r\ndefineExpose({\r\n  newCommand,\r\n  editCommand\r\n});\r\n\r\n\r\n\r\n\r\nconst doCancel = ()=>{\r\n  show.value = false;\r\n}\r\n\r\n\r\nconst doDelete = ()=>{\r\n  ElMessageBox.confirm('Deseja realmente excluir este comando?','Tem certeza?').then(()=>{\r\n    store.dispatch(\"commands/delete\",formData.value.id).then(()=>{\r\n      show.value = false;\r\n      ElNotification({\r\n        title: 'Info',\r\n        message: 'Comando deletado com suceso.',\r\n        type: 'info',\r\n      });\r\n    })\r\n  });\r\n}\r\n\r\nconst doSave = ()=>{\r\n\r\n  ElNotification({\r\n    title: 'Info',\r\n    message: 'Cadastrando seu comando...',\r\n    type: 'info',\r\n  });\r\n\r\n  const tmp = JSON.parse(JSON.stringify(defaultGeofenceData));\r\n\r\n  Object.assign(tmp,formData.value);\r\n\r\n\r\n\r\n  store.dispatch(\"commands/save\",tmp).then(async (data)=>{\r\n    const selectedDevices = deviceList.value.selected;\r\n\r\n    if(selectedDevices.length>0) {\r\n      for(let device of selectedDevices){\r\n\r\n        console.log(device);\r\n\r\n        ElNotification({\r\n          title: 'Info',\r\n          message: 'Vinculando comando ao dispositivo '+device.name,\r\n          type: 'info',\r\n        });\r\n\r\n        await window.$traccar.linkObjects({deviceId: device.id,commandId: data.id});\r\n\r\n      }\r\n    }\r\n\r\n\r\n    ElNotification({\r\n      title: 'Successo',\r\n      message: 'Comando personalizado cadastrado com sucesso.',\r\n      type: 'success',\r\n    });\r\n\r\n    show.value = false;\r\n\r\n  })\r\n\r\n\r\n\r\n\r\n  /*\r\n\r\n  tmp.name = formData.value.name;\r\n  tmp.area = getParsedArea();\r\n\r\n  store.dispatch(\"geofences/save\",tmp).then(()=>{\r\n      show.value = false;\r\n  })*/\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n.el-button-group{\r\n  display: flex !important;\r\n}\r\n\r\n.el-button-group .el-button--large{\r\n  flex: 1 !important;\r\n}\r\n\r\n.el-select.el-select--large{\r\n  width: 100%;\r\n}\r\n\r\n.el-dialog__header,.el-dialog__body,.el-dialog__footer{\r\n  padding: 0px !important;\r\n}\r\n\r\n.el-dialog__footer{\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-tabs__nav-wrap{\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n}\r\n\r\n.el-tabs__content{\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n}\r\n\r\n.el-form--label-top .el-form-item__label{\r\n  padding: 0px !important;\r\n  margin-bottom: -5px !important;\r\n}\r\n.el-form-item{\r\n  margin-bottom: 5px !Important;\r\n}\r\n\r\n.isCar{\r\n  border: #05a7e3 1px solid !important;\r\n}\r\n</style>","import script from \"./edit-command.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./edit-command.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./edit-command.vue?vue&type=style&index=0&id=daadabfc&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n\r\n  <edit-command ref=\"editCommandRef\"></edit-command>\r\n\r\n  <div style=\"display: flex;justify-content: space-between;align-content: space-between;\">\r\n    <div style=\"width: 30%;\"></div>\r\n\r\n    <el-input v-model=\"query\" placeholder=\"Buscar Comando\" style=\"--el-input-border-radius: 5px;margin-right: 5px;\"></el-input>\r\n\r\n    <el-tooltip\r\n        effect=\"dark\"\r\n        content=\"Cadastrar Comando\"\r\n        placement=\"bottom\"\r\n    >\r\n      <el-button type=\"primary\" @click=\"editCommandRef.newCommand()\"><i class=\"fas fa-plus\"></i></el-button>\r\n    </el-tooltip>\r\n\r\n  </div>\r\n\r\n  <div style=\"border: silver 1px solid; border-radius: 5px;margin-top: 20px;height: calc(100vh - 200px);\">\r\n    <div class=\"device\">\r\n      <div class=\"name\" style=\"font-size: 12px;font-weight: 100;padding: 5px;width: calc(60% + 3.5px)\">Titulo</div>\r\n      <div class=\"name\" style=\"font-size: 12px;font-weight: 100;padding: 5px;flex: 2;\">Tipo</div>\r\n    </div>\r\n    <div style=\"overflow-x: hidden;overflow-y: scroll;height: calc(100vh - 230px);\">\r\n\r\n      <div v-for=\"(device) in filteredDevices\" :key=\"device.id\" @click=\"editCommandRef.editCommand(device)\" class=\"device\">\r\n\r\n        <div class=\"name\" >{{device.description}}</div>\r\n        <div  class=\"name\" style=\"flex: 2;\">\r\n          {{device.type}}\r\n        </div>\r\n      </div></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport {ref,computed} from 'vue';\r\nimport {useStore} from \"vuex\"\r\nimport EditCommand from \"../tarkan/components/views/edit-command\";\r\n\r\nconst store = useStore();\r\n\r\nconst query = ref('');\r\nconst editCommandRef = ref(null);\r\n\r\n\r\n\r\n\r\nconst filteredDevices = computed(()=>{\r\n  if(query.value === ''){\r\n    return store.state.commands.commandList;\r\n  }else {\r\n    return store.state.commands.commandList.filter((d) => {\r\n      return d.description.toLowerCase().match(query.value.toLowerCase());\r\n    });\r\n  }\r\n\r\n})\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.device{\r\n  border-bottom: silver 1px solid;\r\n  display: flex;\r\n  flex-direction: row;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  margin-right: -1px;\r\n}\r\n.device:first-child{\r\n  background: rgba(0,0,0,0.03)\r\n}\r\n\r\n.device:hover{\r\n  background: rgba(0,0,0,0.03);\r\n}\r\n\r\n\r\n\r\n.device .name{\r\n  font-size: 12px;\r\n  padding: 7px;\r\n  text-align: left;\r\n  line-height: 14px;\r\n  font-weight: 800;\r\n  border-right: silver 1px dotted;\r\n  width: 60%;\r\n}\r\n\r\n.icons{\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row-reverse;\r\n  flex: 1;\r\n  font-size: 11px;\r\n}\r\n\r\n.icons div{\r\n  display: flex;\r\n  justify-content: center;\r\n  flex: 1;\r\n  border-right: silver 1px dotted;\r\n  padding: 7px;\r\n  font-size: 11px;\r\n}\r\n.icons div i{\r\n  font-size: 14px;\r\n}\r\n\r\n.icons div:first-child{\r\n  border-right: none;\r\n}\r\n\r\n.icons div span{\r\n  display: flex;\r\n  padding: 2px;\r\n  padding-left: 5px;\r\n}\r\n\r\n.subtitle{\r\n  margin-top: 20px;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  text-transform: uppercase;\r\n  color: var(--text-black);\r\n}\r\n\r\n.subtitle i{\r\n  font-size: 12px;\r\n  margin-right: 3px;\r\n}\r\n\r\n.updated{\r\n  font-size: 12px;\r\n  margin-top: 5px;\r\n  color: var(--text-silver);\r\n}\r\n\r\n.address{\r\n  color: var(--text-blue);\r\n  font-size: 15px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n  padding: 10px;\r\n  line-height: 20px;\r\n}\r\n\r\n</style>","import script from \"./commands.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./commands.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./commands.vue?vue&type=style&index=0&id=3daa2fc6&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\Vue3\\\\tarkan-basic\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3daa2fc6\"]])\n\nexport default __exports__"],"sourceRoot":""}