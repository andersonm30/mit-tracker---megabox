(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c6137fc"],{7166:function(e,t,n){"use strict";n.r(t);var o=n("9558"),c=(n("ac1f"),n("a1f0"),n("4de4"),n("d3b7"),n("b64b"),n("466d"),n("5319"),n("25f0"),n("a434"),n("b0c0"),n("7a23")),a=n("5502"),r=function(e){return Object(c["pushScopeId"])("data-v-6f41cb9e"),e=e(),Object(c["popScopeId"])(),e},i={style:{display:"flex","justify-content":"space-between","align-content":"space-between"}},l=r((function(){return Object(c["createElementVNode"])("div",{style:{width:"30%"}},null,-1)})),s=r((function(){return Object(c["createElementVNode"])("i",{class:"fas fa-folder-plus"},null,-1)})),u=r((function(){return Object(c["createElementVNode"])("i",{class:"fas fa-plus"},null,-1)})),d={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"20px",height:"calc(100vh - 200px)"}},f=Object(c["createStaticVNode"])('<div class="device" data-v-6f41cb9e><div class="name" style="font-size:12px;box-sizing:border-box;font-weight:100;padding:5px;flex:1;" data-v-6f41cb9e>Titulo</div><div class="name" style="font-size:12px;box-sizing:border-box;font-weight:100;padding:5px;width:45px;" data-v-6f41cb9e>Status</div><div class="name" style="font-size:12px;box-sizing:border-box;font-weight:100;padding:5px;width:100px;text-align:center;" data-v-6f41cb9e>Atualização</div><div class="icons" style="font-size:12px;font-weight:100;margin-right:-2px;" data-v-6f41cb9e> </div></div>',1),b=["onClick","onContextmenu","set"],p={class:"name",style:{flex:"1"}},j={class:"name",style:{width:"45px","text-align":"center","font-size":"18px","box-sizing":"border-box",overflow:"hidden"}},O={key:0,style:{color:"green"},class:"fas fa-check-circle"},v={key:1,style:{color:"red"},class:"fas fa-exclamation-circle"},m={key:2,class:"fas fa-question-circle",style:{color:"orange"}},g={class:"name",style:{width:"100px","box-sizing":"border-box",overflow:"hidden","white-space":"nowrap","text-align":"center"}},h={key:0,class:"icons"},k=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"red"}},[Object(c["createElementVNode"])("i",{class:"fas fa-exclamation-triangle"})],-1)})),x=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"silver"}},[Object(c["createElementVNode"])("i",{class:"fas fa-exclamation-triangle"})],-1)})),y=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"green"}},[Object(c["createElementVNode"])("i",{class:"fas fa-key"})],-1)})),w=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"red"}},[Object(c["createElementVNode"])("i",{class:"fas fa-key"})],-1)})),E=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"silver"}},[Object(c["createElementVNode"])("i",{class:"fas fa-key"})],-1)})),V=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"red"}},[Object(c["createElementVNode"])("i",{class:"fas fa-lock"})],-1)})),N=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"green"}},[Object(c["createElementVNode"])("i",{class:"fas fa-lock-open"})],-1)})),C=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"silver"}},[Object(c["createElementVNode"])("i",{class:"fas fa-lock-open"})],-1)})),B=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"black"}},[Object(c["createElementVNode"])("i",{class:"fas fa-angle-double-right"})],-1)})),D=r((function(){return Object(c["createElementVNode"])("div",{style:{color:"silver"}},[Object(c["createElementVNode"])("i",{class:"fas fa-angle-double-right"})],-1)})),_={setup:function(e){var t=Object(a["b"])(),n=Object(c["inject"])("markerContext"),r=Object(c["inject"])("markerClick"),_=Object(c["ref"])(""),M=Object(c["inject"])("edit-device"),S=Object(c["inject"])("edit-group"),z=Object(c["ref"])(0);setInterval((function(){z.value=new Date}),1e3);var T=Object(c["ref"])(null),L=Object(c["ref"])(0),I=Object(c["ref"])(0);Object(c["onMounted"])((function(){var e=T.value;I.value=Math.floor(e.clientHeight/33)+3,L.value=Math.floor(e.scrollTop/33)}));var A=function(e){var t=e.target;I.value=Math.floor(t.clientHeight/33)+3,L.value=Math.floor(t.scrollTop/33)},R=function(e,t){var n=Math.round((new Date(t).getTime()-new Date(e).getTime())/1e3);if(n<0)return"agora mesmo";if(n>86400){var o=Math.round(n/86400);return o+" dias"}if(n>3600){var c=Math.round(n/3600);return c+" horas"}if(n>60){var a=Math.round(n/60);return a+" minutos"}return n+" segundos"},q=Object(c["computed"])((function(){if(""===_.value)return t.state.devices.deviceList;var e=_.value.toLowerCase().matchAll(Object(o["a"])(/(.*?):(\+|\x2D|=)([0-9]*) (dias|minutos|horas|segundos)/gi,{sinal:2,tempo:3,filtro:4})),n=e.next();return t.state.devices.deviceList.filter((function(e){if(e.icon.remove(),n.value&&"dias"===n.value.groups.filtro){var t=86400*parseInt(n.value.groups.tempo),o=Math.round(((new Date).getTime()-new Date(e.lastUpdate).getTime())/1e3);if(console.log(t),console.log(o),"+"===n.value.groups.sinal&&o>=t)return e.icon.addToMap(),!0;if("-"===n.value.groups.sinal&&o<=t)return e.icon.addToMap(),!0;if("="===n.value.groups.sinal)return!1}for(var c=0,a=Object.keys(e);c<a.length;c++){var r=a[c];if("status"===r&&String(e[r]).toLowerCase().replace("unknown","desconhecido").match(_.value.toLowerCase()))return e.icon.addToMap(),!0;if(String(e[r]).toLowerCase().match(_.value.toLowerCase()))return e.icon.addToMap(),!0}for(var i=0,l=Object.keys(e.attributes);i<l.length;i++){var s=l[i];if(e.attributes[s].toString().toLowerCase().match(_.value.toLowerCase()))return e.icon.addToMap(),!0}return!1}))})),F=Object(c["computed"])((function(){var e=Object.assign([],q.value);return e.splice(0,I.value+L.value)}));return function(e,o){var a=Object(c["resolveComponent"])("el-input"),L=Object(c["resolveComponent"])("el-button"),I=Object(c["resolveComponent"])("el-tooltip");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",i,[l,Object(c["createVNode"])(a,{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=function(e){return _.value=e}),placeholder:"Buscar veiculo",style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue"]),Object(c["createVNode"])(I,{effect:"dark",content:"Cadastrar Grupo",placement:"bottom"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(L,{type:"primary",onClick:o[1]||(o[1]=function(e){return Object(c["unref"])(S).newGroup()}),plain:""},{default:Object(c["withCtx"])((function(){return[s]})),_:1})]})),_:1}),Object(c["createVNode"])(I,{effect:"dark",content:"Cadastrar Dispositivo",placement:"bottom"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(L,{type:"primary",onClick:o[2]||(o[2]=function(e){return Object(c["unref"])(M).newDevice()})},{default:Object(c["withCtx"])((function(){return[u]})),_:1})]})),_:1})]),Object(c["createElementVNode"])("div",d,[f,Object(c["createElementVNode"])("div",{ref_key:"realDevices",ref:T,onScroll:o[3]||(o[3]=function(e){return A(e)}),style:{"overflow-x":"hidden","overflow-y":"scroll",height:"calc(100vh - 230px)"}},[Object(c["createElementVNode"])("div",{class:"fakeScroll",style:Object(c["normalizeStyle"])({height:33*Object(c["unref"])(q).length+"px"})},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(F),(function(o){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:o.id,class:Object(c["normalizeClass"])(["device",{isDisabled:o.disabled}]),onClick:function(e){return Object(c["unref"])(r)(o.id)},onContextmenu:Object(c["withModifiers"])((function(e){return Object(c["unref"])(n)(e,o.id)}),["prevent"]),set:e.position=Object(c["unref"])(t).getters["devices/getPosition"](o.id)},[Object(c["createElementVNode"])("div",p,Object(c["toDisplayString"])(o.name),1),Object(c["createElementVNode"])("div",j,[Object(c["createVNode"])(I,{content:o.disabled?"Desabilitado":"online"===o.status?"Online":"offline"===o.status?"Offline":"Desconhecido"},{default:Object(c["withCtx"])((function(){return["online"===o.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("i",O)):"offline"===o.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("i",v)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("i",m))]})),_:2},1032,["content"])]),Object(c["createElementVNode"])("div",g,Object(c["toDisplayString"])(R(o.lastUpdate,z.value)),1),e.position?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",h,[e.position.attributes.alarm?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:0,content:e.position.attributes.alarm},{default:Object(c["withCtx"])((function(){return[k]})),_:1},8,["content"])):(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:1,content:"Nenhum Alerta"},{default:Object(c["withCtx"])((function(){return[x]})),_:1})),!0===e.position.attributes.ignition?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:2,content:"Ligada"},{default:Object(c["withCtx"])((function(){return[y]})),_:1})):!1===e.position.attributes.ignition?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:3,content:"Desligada"},{default:Object(c["withCtx"])((function(){return[w]})),_:1})):(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:4,content:"Desconhecido"},{default:Object(c["withCtx"])((function(){return[E]})),_:1})),!0===e.position.attributes.blocked?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:5,content:"Bloqueado"},{default:Object(c["withCtx"])((function(){return[V]})),_:1})):!1===e.position.attributes.blocked?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:6,content:"Desbloqueado"},{default:Object(c["withCtx"])((function(){return[N]})),_:1})):(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:7,content:"Desconhecido"},{default:Object(c["withCtx"])((function(){return[C]})),_:1})),e.position.attributes.motion?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:8,content:"Movendo"},{default:Object(c["withCtx"])((function(){return[B]})),_:1})):(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:9,content:"Parado"},{default:Object(c["withCtx"])((function(){return[D]})),_:1}))])):Object(c["createCommentVNode"])("",!0)],42,b)})),128))],4)],544)])],64)}}},M=(n("ec6a"),n("6b0d")),S=n.n(M);const z=S()(_,[["__scopeId","data-v-6f41cb9e"]]);t["default"]=z},a1f0:function(e,t,n){"use strict";var o=n("23e7"),c=n("da84"),a=n("c65b"),r=n("e330"),i=n("9ed3"),l=n("1d80"),s=n("50c4"),u=n("577e"),d=n("825a"),f=n("c6b6"),b=n("3a9b"),p=n("44e7"),j=n("ad6d"),O=n("dc4a"),v=n("6eeb"),m=n("d039"),g=n("b622"),h=n("4840"),k=n("8aa5"),x=n("14c3"),y=n("69f3"),w=n("c430"),E=g("matchAll"),V="RegExp String",N=V+" Iterator",C=y.set,B=y.getterFor(N),D=RegExp.prototype,_=c.TypeError,M=r(j),S=r("".indexOf),z=r("".matchAll),T=!!z&&!m((function(){z("a",/./)})),L=i((function(e,t,n,o){C(this,{type:N,regexp:e,string:t,global:n,unicode:o,done:!1})}),V,(function(){var e=B(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,o=x(t,n);return null===o?{value:void 0,done:e.done=!0}:e.global?(""===u(o[0])&&(t.lastIndex=k(n,s(t.lastIndex),e.unicode)),{value:o,done:!1}):(e.done=!0,{value:o,done:!1})})),I=function(e){var t,n,o,c,a,r,i=d(this),l=u(e);return t=h(i,RegExp),n=i.flags,void 0===n&&b(D,i)&&!("flags"in D)&&(n=M(i)),o=void 0===n?"":u(n),c=new t(t===RegExp?i.source:i,o),a=!!~S(o,"g"),r=!!~S(o,"u"),c.lastIndex=s(i.lastIndex),new L(c,l,a,r)};o({target:"String",proto:!0,forced:T},{matchAll:function(e){var t,n,o,c,r=l(this);if(null!=e){if(p(e)&&(t=u(l("flags"in D?e.flags:M(e))),!~S(t,"g")))throw _("`.matchAll` does not allow non-global regexes");if(T)return z(r,e);if(o=O(e,E),void 0===o&&w&&"RegExp"==f(e)&&(o=I),o)return a(o,e,r)}else if(T)return z(r,e);return n=u(r),c=new RegExp(e,"g"),w?a(I,c,n):c[E](n)}}),w||E in D||v(D,E,I)},a2ca:function(e,t,n){},ec6a:function(e,t,n){"use strict";n("a2ca")}}]);
//# sourceMappingURL=chunk-4c6137fc.77a47757.js.map