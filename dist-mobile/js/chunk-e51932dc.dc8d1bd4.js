(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e51932dc"],{"0722":function(e,t,n){"use strict";n.r(t);n("4de4"),n("d3b7"),n("ac1f"),n("466d"),n("a4d3"),n("e01a");var c=n("7a23"),a=n("5502"),r=n("b85c"),l=n("1da1"),o=(n("96cf"),n("e9c4"),n("b0c0"),n("16ee")),u=n("c9a1"),i=n("2295"),d=n("db9d"),b=n("d8e8"),s=n("c349"),f=Object(c["createElementVNode"])("div",{style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},[Object(c["createElementVNode"])("div",{class:"modal-title"},"Cadastrar Atributo")],-1),p={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},O=Object(c["createTextVNode"])("Excluir"),j=Object(c["createTextVNode"])("Cancelar"),v=Object(c["createTextVNode"])("Salvar"),m={style:{display:"flex"}},V={style:{flex:"1","margin-right":"5px"}},x={style:{flex:"1","margin-left":"5px"}},h=Object(c["createElementVNode"])("br",null,null,-1),N={setup:function(e,t){var n=t.expose,N={id:0,description:"",attribute:"",expression:"",type:"string"},w=Object(a["b"])(),y=Object(c["ref"])(null),C=Object(c["ref"])(!1),g=Object(c["ref"])("first"),k=Object(c["ref"])(!1),E=Object(c["ref"])(N),_=Object(c["ref"])(0),S=Object(c["ref"])(""),A=null,B=function(){window.$traccar.attributeTest(_.value,E.value).then((function(e){var t=e.data;S.value=t})).catch((function(e){S.value=e.response.data}))},T=function(){A&&clearInterval(A),0!==_.value&&(A=setTimeout((function(){B()}),1e3))},J=function(){E.value=JSON.parse(JSON.stringify(N)),C.value=!0},I=function(e){E.value=JSON.parse(JSON.stringify(defaultDeviceData)),Object.assign(E.value,JSON.parse(JSON.stringify(e))),C.value=!0};n({newAttribute:J,editAttribute:I});var U=function(){C.value=!1},L=function(){u["a"].confirm("Deseja realmente excluir este atributo computado?","Tem certeza?").then((function(){w.dispatch("attributes/delete",E.value.id).then((function(){C.value=!1,Object(i["a"])({title:"Info",message:"Atributo computado deletado com suceso.",type:"info"})}))}))},D=function(){Object(i["a"])({title:"Info",message:"Cadastrando seu atributo...",type:"info"});var e=JSON.parse(JSON.stringify(N));Object.assign(e,E.value),w.dispatch("attributes/save",e).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,c,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=y.value.selected,!(n.length>0)){e.next=21;break}c=Object(r["a"])(n),e.prev=3,c.s();case 5:if((a=c.n()).done){e.next=13;break}return l=a.value,console.log(l),Object(i["a"])({title:"Info",message:"Vinculando atributo ao dispositivo "+l.name,type:"info"}),e.next=11,window.$traccar.linkObjects({deviceId:l.id,attributeId:t.id});case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](3),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:Object(i["a"])({title:"Successo",message:"Atributo computado cadastrado com sucesso.",type:"success"}),C.value=!1;case 23:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}())};return function(e,t){var n=Object(c["resolveComponent"])("el-button"),a=Object(c["resolveComponent"])("el-option"),r=Object(c["resolveComponent"])("el-select"),l=Object(c["resolveComponent"])("el-switch"),u=Object(c["resolveComponent"])("el-tab-pane"),i=Object(c["resolveComponent"])("el-tabs");return Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(d["a"]),{"lock-scroll":!0,modelValue:C.value,"onUpdate:modelValue":t[12]||(t[12]=function(e){return C.value=e}),title:"Teste"},{title:Object(c["withCtx"])((function(){return[f]})),footer:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(n,{type:"danger",onClick:t[0]||(t[0]=function(e){return L()})},{default:Object(c["withCtx"])((function(){return[O]})),_:1})]),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(n,{type:"danger",plain:"",onClick:t[1]||(t[1]=function(e){return U()})},{default:Object(c["withCtx"])((function(){return[j]})),_:1}),Object(c["createVNode"])(n,{type:"primary",onClick:t[2]||(t[2]=function(e){return D()})},{default:Object(c["withCtx"])((function(){return[v]})),_:1})])])]})),default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(i,{modelValue:g.value,"onUpdate:modelValue":t[11]||(t[11]=function(e){return g.value=e})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(u,{label:"Comando",name:"first"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(b["a"]),{"label-width":"120px","label-position":"top"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(b["b"]),{label:"Descrição"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(s["a"]),{modelValue:E.value.description,"onUpdate:modelValue":t[3]||(t[3]=function(e){return E.value.description=e})},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(Object(c["unref"])(b["b"]),{label:"Atributo"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(s["a"]),{modelValue:E.value.attribute,"onUpdate:modelValue":t[4]||(t[4]=function(e){return E.value.attribute=e})},null,8,["modelValue"])]})),_:1}),Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",V,[Object(c["createVNode"])(Object(c["unref"])(b["b"]),{label:"Expressão"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(s["a"]),{modelValue:E.value.expression,"onUpdate:modelValue":t[5]||(t[5]=function(e){return E.value.expression=e}),autosize:{minRows:4},type:"textarea",placeholder:"Please input",onKeyup:t[6]||(t[6]=function(e){return T()})},null,8,["modelValue"])]})),_:1})]),Object(c["createElementVNode"])("div",x,[Object(c["createVNode"])(Object(c["unref"])(b["b"]),{label:"Testar Atributo em"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{modelValue:_.value,"onUpdate:modelValue":t[7]||(t[7]=function(e){return _.value=e}),onChange:t[8]||(t[8]=function(e){return B()}),"value-key":"id",filterable:"",placeholder:"Grupo",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{label:"Não Testar",value:0}),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(w).state.devices.deviceList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(Object(c["unref"])(b["b"]),{label:"Resultado"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(s["a"]),{disabled:"",modelValue:S.value,"onUpdate:modelValue":t[9]||(t[9]=function(e){return S.value=e}),autosize:{minRows:4},type:"textarea",placeholder:"Please input"},null,8,["modelValue"])]})),_:1})])]),h,Object(c["createVNode"])(l,{modelValue:k.value,"onUpdate:modelValue":t[10]||(t[10]=function(e){return k.value=e}),"active-text":"Aplicar este atributo aos meus favoritos"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(c["createVNode"])(u,{label:"Dispositivos",name:e.devices},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{ref_key:"deviceList",ref:y},null,512)]})),_:1},8,["name"])]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"])}}};n("3a94");const w=N;var y=w,C=function(e){return Object(c["pushScopeId"])("data-v-2e95c581"),e=e(),Object(c["popScopeId"])(),e},g={style:{display:"flex","justify-content":"space-between","align-content":"space-between"}},k=C((function(){return Object(c["createElementVNode"])("div",{style:{width:"30%"}},null,-1)})),E=C((function(){return Object(c["createElementVNode"])("i",{class:"fas fa-plus"},null,-1)})),_={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"20px",height:"calc(100vh - 200px)"}},S=C((function(){return Object(c["createElementVNode"])("div",{class:"device"},[Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",width:"calc(60% + 3.5px)"}},"Titulo"),Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",flex:"2"}},"Tipo")],-1)})),A={style:{"overflow-x":"hidden","overflow-y":"scroll",height:"calc(100vh - 230px)"}},B=["onClick"],T={class:"name"},J={class:"name",style:{flex:"2"}},I={setup:function(e){var t=Object(a["b"])(),n=Object(c["ref"])(""),r=Object(c["ref"])(null),l=Object(c["computed"])((function(){return""===n.value?t.state.attributes.attributesList:t.state.attributes.attributesList.filter((function(e){return e.description.toLowerCase().match(n.value.toLowerCase())}))}));return function(e,t){var a=Object(c["resolveComponent"])("el-input"),o=Object(c["resolveComponent"])("el-button"),u=Object(c["resolveComponent"])("el-tooltip");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(y),{ref_key:"editAttributeRef",ref:r},null,512),Object(c["createElementVNode"])("div",g,[k,Object(c["createVNode"])(a,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.value=e}),placeholder:"Buscar Atributo",style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue"]),Object(c["createVNode"])(u,{effect:"dark",content:"Cadastrar Atributo",placement:"bottom"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{type:"primary",onClick:t[1]||(t[1]=function(e){return r.value.newAttribute()})},{default:Object(c["withCtx"])((function(){return[E]})),_:1})]})),_:1})]),Object(c["createElementVNode"])("div",_,[S,Object(c["createElementVNode"])("div",A,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(l),(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,onClick:function(t){return r.value.editAttribute(e)},class:"device"},[Object(c["createElementVNode"])("div",T,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",J,Object(c["toDisplayString"])(e.type),1)],8,B)})),128))])])],64)}}},U=(n("3477"),n("6b0d")),L=n.n(U);const D=L()(I,[["__scopeId","data-v-2e95c581"]]);t["default"]=D},"2b71":function(e,t,n){},3477:function(e,t,n){"use strict";n("2b71")},"3a94":function(e,t,n){"use strict";n("ea3d")},ea3d:function(e,t,n){}}]);
//# sourceMappingURL=chunk-e51932dc.dc8d1bd4.js.map