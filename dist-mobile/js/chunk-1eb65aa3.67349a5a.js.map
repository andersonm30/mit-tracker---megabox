{"version":3,"sources":["webpack:///./src/tarkan/components/views/edit-geofence.vue?d8aa","webpack:///./src/templates/geofence.vue","webpack:///./src/templates/geofence.vue?59f1","webpack:///./src/templates/geofence.vue?f89a","webpack:///./src/tarkan/components/views/edit-geofence.vue","webpack:///./src/tarkan/components/views/edit-geofence.vue?d2bf"],"names":["store","query","editGeofenceRef","filteredDevices","value","state","geofences","fenceList","filter","d","name","toLowerCase","match","__exports__","defaultGeofenceData","type","attributes","defaultTraccarGeofenceData","show","tab","title","formData","doDelete","confirm","then","dispatch","id","message","newGeofence","JSON","parse","stringify","editGeofence","geofence","defaultDeviceData","Object","assign","doEditArea","doCancel","getParsedArea","params","mapPointEditingParams","tmp","forEach","p","substring","length","doSave","area"],"mappings":"kHAAA,W,28BCwCA,IAAMA,EAAQ,iBAERC,EAAQ,iBAAI,IACZC,EAAkB,iBAAI,MAGtBC,EAAkB,uBAAS,WAC/B,MAAmB,KAAhBF,EAAMG,MACAJ,EAAMK,MAAMC,UAAUC,UAEtBP,EAAMK,MAAMC,UAAUC,UAAUC,QAAO,SAACC,GAC7C,OAAOA,EAAEC,KAAKC,cAAcC,MAAMX,EAAMG,MAAMO,qB,k6CC7CpD,MAAME,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,gB,2DCRf,W,q1BCmEMC,EAAsB,CAC1BJ,KAAM,GACNK,KAAM,aACNC,WAAY,IAGRC,EAA6B,CACjC,GAAM,EACN,KAAQ,GACR,YAAe,GACf,KAAQ,GACR,WAAc,EACd,WAAc,IAMVjB,EAAQ,iBAKRkB,EAAO,kBAAI,GACXC,EAAM,iBAAI,SAGVC,EAAQ,iBAAI,IAGZC,EAAW,iBAAIP,GAIfQ,EAAW,WACf,OAAaC,QAAQ,0CAA0C,gBAAgBC,MAAK,WAClFxB,EAAMyB,SAAS,mBAAmBJ,EAASjB,MAAMsB,IAAIF,MAAK,WACxDN,EAAKd,OAAQ,EACb,eAAe,CACbgB,MAAO,OACPO,QAAS,gCACTZ,KAAM,gBAMRa,EAAc,WAClBR,EAAMhB,MAAQ,qBAGZiB,EAASjB,MAAQyB,KAAKC,MAAMD,KAAKE,UAAUjB,IAC3CI,EAAKd,OAAQ,GAGX4B,EAAe,SAACC,GAEpBb,EAAMhB,MAAQ,kBAEdiB,EAASjB,MAAQyB,KAAKC,MAAMD,KAAKE,UAAUG,oBAG3CC,OAAOC,OAAOf,EAASjB,MAAMyB,KAAKC,MAAMD,KAAKE,UAAUE,KAEvDf,EAAKd,OAAQ,GAGf,EAAa,CACXwB,cACAI,iBAIF,IAAMK,EAAa,WACjBrC,EAAMyB,SAAS,0BAA0BJ,EAASjB,MAAMW,OAGpDuB,EAAW,WACfpB,EAAKd,OAAQ,GAGTmC,EAAgB,WAClB,IAAMxB,EAAOM,EAASjB,MAAMW,KACtByB,EAASxC,EAAMK,MAAMC,UAAUmC,sBACrC,GAAU,WAAP1B,EACD,MAAO,WAAWyB,EAAO,GAAG,IAAIA,EAAO,GAAG,KAAKA,EAAO,GAAG,IACrD,GAAU,eAAPzB,EAAoB,CAC3B,IAAI2B,EAAM,eAUV,OARAF,EAAOG,SAAQ,SAACC,GACdF,GAAKE,EAAE,GAAG,IAAIA,EAAE,GAAG,QAGrBF,EAAMA,EAAIG,UAAU,EAAEH,EAAII,OAAO,GAEjCJ,GAAM,IAECA,EACH,GAAU,YAAP3B,EAAiB,CACxB,IAAI,EAAM,YAUV,OARAyB,EAAOG,SAAQ,SAACC,GACd,GAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,QAGrB,EAAM,EAAIC,UAAU,EAAE,EAAIC,OAAO,GAEjC,GAAM,KAEC,IAMPC,EAAS,WAEb,IAAML,EAAMb,KAAKC,MAAMD,KAAKE,UAAUd,IAEtCyB,EAAIhC,KAAOW,EAASjB,MAAMM,KAC1BgC,EAAIM,KAAOT,IAEXvC,EAAMyB,SAAS,iBAAiBiB,GAAKlB,MAAK,WACtCN,EAAKd,OAAQ,M,qvHCzLnB,MAAMS,EAAc,EAEL","file":"js/chunk-1eb65aa3.67349a5a.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./edit-geofence.vue?vue&type=style&index=0&id=55b808ee&lang=css\"","<template>\r\n\r\n  <edit-geofence ref=\"editGeofenceRef\"></edit-geofence>\r\n\r\n  <div style=\"display: flex;justify-content: space-between;align-content: space-between;\">\r\n    <div style=\"width: 30%;\"></div>\r\n\r\n    <el-input v-model=\"query\" placeholder=\"Buscar Geocerca\" style=\"--el-input-border-radius: 5px;margin-right: 5px;\"></el-input>\r\n\r\n    <el-tooltip\r\n        effect=\"dark\"\r\n        content=\"Cadastrar Geocerca\"\r\n        placement=\"bottom\"\r\n    >\r\n      <el-button type=\"primary\" @click=\"editGeofenceRef.newGeofence()\"><i class=\"fas fa-plus\"></i></el-button>\r\n    </el-tooltip>\r\n\r\n  </div>\r\n\r\n  <div style=\"border: silver 1px solid; border-radius: 5px;margin-top: 20px;height: calc(100vh - 200px);\">\r\n    <div class=\"device\">\r\n      <div class=\"name\" style=\"font-size: 12px;font-weight: 100;padding: 5px;\">Titulo</div>\r\n    </div>\r\n    <div style=\"overflow-x: hidden;overflow-y: scroll;height: calc(100vh - 230px);\">\r\n\r\n      <div v-for=\"(device) in filteredDevices\" :key=\"device.id\" class=\"device\" @click=\"editGeofenceRef.editGeofence(device)\">\r\n\r\n        <div class=\"name\" >{{device.name}}</div>\r\n\r\n      </div></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport {ref,computed} from 'vue';\r\nimport {useStore} from \"vuex\"\r\nimport EditGeofence from \"../tarkan/components/views/edit-geofence\";\r\n\r\nconst store = useStore();\r\n\r\nconst query = ref('');\r\nconst editGeofenceRef = ref(null);\r\n\r\n\r\nconst filteredDevices = computed(()=>{\r\n  if(query.value === ''){\r\n    return store.state.geofences.fenceList;\r\n  }else {\r\n    return store.state.geofences.fenceList.filter((d) => {\r\n      return d.name.toLowerCase().match(query.value.toLowerCase());\r\n    });\r\n  }\r\n\r\n})\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.device{\r\n  border-bottom: silver 1px solid;\r\n  display: flex;\r\n  flex-direction: row;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  margin-right: -1px;\r\n}\r\n.device:first-child{\r\n  background: rgba(0,0,0,0.03)\r\n}\r\n\r\n.device:hover{\r\n  background: rgba(0,0,0,0.03);\r\n}\r\n\r\n\r\n\r\n.device .name{\r\n  font-size: 12px;\r\n  padding: 7px;\r\n  text-align: left;\r\n  line-height: 14px;\r\n  font-weight: 800;\r\n  border-right: silver 1px dotted;\r\n  width: 100%;\r\n}\r\n\r\n.icons{\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row-reverse;\r\n  flex: 1;\r\n  font-size: 11px;\r\n}\r\n\r\n.icons div{\r\n  display: flex;\r\n  justify-content: center;\r\n  flex: 1;\r\n  border-right: silver 1px dotted;\r\n  padding: 7px;\r\n  font-size: 11px;\r\n}\r\n.icons div i{\r\n  font-size: 14px;\r\n}\r\n\r\n.icons div:first-child{\r\n  border-right: none;\r\n}\r\n\r\n.icons div span{\r\n  display: flex;\r\n  padding: 2px;\r\n  padding-left: 5px;\r\n}\r\n\r\n.subtitle{\r\n  margin-top: 20px;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  text-transform: uppercase;\r\n  color: var(--text-black);\r\n}\r\n\r\n.subtitle i{\r\n  font-size: 12px;\r\n  margin-right: 3px;\r\n}\r\n\r\n.updated{\r\n  font-size: 12px;\r\n  margin-top: 5px;\r\n  color: var(--text-silver);\r\n}\r\n\r\n.address{\r\n  color: var(--text-blue);\r\n  font-size: 15px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n  padding: 10px;\r\n  line-height: 20px;\r\n}\r\n\r\n</style>","import script from \"./geofence.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./geofence.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./geofence.vue?vue&type=style&index=0&id=d729f63a&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\Vue3\\\\tarkan-basic\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d729f63a\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./geofence.vue?vue&type=style&index=0&id=d729f63a&scoped=true&lang=css\"","<template>\r\n  <el-dialog :lock-scroll=\"true\" v-model=\"show\">\r\n\r\n    <template v-slot:title>\r\n      <div  style=\"border-bottom: #e0e0e0 1px solid;padding: 20px;\">\r\n        <div class=\"modal-title\" >{{title}}</div>\r\n      </div>\r\n    </template>\r\n    <template v-slot:footer>\r\n      <div  style=\"border-top: #e0e0e0 1px solid;padding: 20px;display: flex;justify-content: space-between\">\r\n        <div><el-button  type=\"danger\" @click=\"doDelete()\">Excluir</el-button></div>\r\n        <div><el-button type=\"danger\" plain @click=\"doCancel()\">Cancelar</el-button>\r\n          <el-button type=\"primary\" @click=\"doSave()\">Salvar</el-button></div>\r\n      </div>\r\n    </template>\r\n\r\n    <el-tabs v-model=\"tab\">\r\n      <el-tab-pane label=\"Geocerca\" name=\"first\">\r\n        <el-form label-width=\"120px\" label-position=\"top\">\r\n          <el-form-item label=\"Nome da Geocerca\" >\r\n            <el-input v-model=\"formData.name\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"Tipo de Cerca\" >\r\n            <el-button-group size=\"large\">\r\n              <el-button type=\"primary\" :plain=\"!(formData.type==='LINESTRING')\" @click=\"formData.type='LINESTRING'\">LINHA</el-button>\r\n              <el-button type=\"primary\" :plain=\"!(formData.type==='CIRCLE')\" @click=\"formData.type='CIRCLE'\">CIRCULO</el-button>\r\n              <el-button type=\"primary\" :plain=\"!(formData.type==='POLYGON')\" @click=\"formData.type='POLYGON'\">POLIGONO</el-button>\r\n            </el-button-group>\r\n\r\n          </el-form-item>\r\n\r\n\r\n          <div style=\"display: flex;flex-direction: row;\">\r\n              <div style=\"flex: 1;\">\r\n\r\n                <el-form-item label=\"Área Total\" >\r\n                  <el-input disabled :value=\"store.getters['geofences/getTotalArea']\"></el-input>\r\n                </el-form-item>\r\n\r\n              </div>\r\n\r\n            <div style=\"padding-top: 35px;margin-left: 10px;\">\r\n              <el-button type=\"primary\" @click=\"doEditArea()\">Editar Área</el-button>\r\n            </div>\r\n\r\n          </div>\r\n\r\n\r\n\r\n        </el-form>\r\n\r\n\r\n      </el-tab-pane>\r\n\r\n      <el-tab-pane label=\"Atributos\" name=\"attributes\">\r\n        <tab-attributes v-model=\"formData.attributes\"></tab-attributes>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </el-dialog>\r\n</template>\r\n\r\n\r\n<script setup>\r\n\r\n\r\nimport TabAttributes from \"./tab-attributes\";\r\n\r\nconst defaultGeofenceData = {\r\n  name: '',\r\n  type: 'LINESTRING',\r\n  attributes: []\r\n}\r\n\r\nconst defaultTraccarGeofenceData = {\r\n  \"id\": 0,\r\n  \"name\": \"\",\r\n  \"description\": \"\",\r\n  \"area\": \"\",\r\n  \"calendarId\": 0,\r\n  \"attributes\": { }\r\n}\r\n\r\nimport {ref,defineExpose} from 'vue';\r\nimport {useStore} from 'vuex'\r\n\r\nconst store = useStore();\r\n\r\nimport {ElDialog, ElForm, ElFormItem, ElInput, ElMessageBox, ElNotification} from 'element-plus'\r\n\r\n\r\nconst show = ref(false);\r\nconst tab = ref('first');\r\n\r\n\r\nconst title = ref('');\r\n\r\n// eslint-disable-next-line no-undef\r\nconst formData = ref(defaultGeofenceData);\r\n\r\n\r\n\r\nconst doDelete = ()=>{\r\n  ElMessageBox.confirm('Deseja realmente excluir esta geocerca?','Tem certeza?').then(()=>{\r\n    store.dispatch(\"geofences/delete\",formData.value.id).then(()=>{\r\n      show.value = false;\r\n      ElNotification({\r\n        title: 'Info',\r\n        message: 'Geocerca deletada com suceso.',\r\n        type: 'info',\r\n      });\r\n    })\r\n  });\r\n}\r\n\r\nconst newGeofence = ()=>{\r\n  title.value = 'Cadastrar Geocerca';\r\n\r\n  // eslint-disable-next-line no-undef\r\n    formData.value = JSON.parse(JSON.stringify(defaultGeofenceData));\r\n    show.value = true;\r\n}\r\n\r\nconst editGeofence = (geofence)=>{\r\n\r\n  title.value = 'Editar Geocerca';\r\n  // eslint-disable-next-line no-undef\r\n  formData.value = JSON.parse(JSON.stringify(defaultDeviceData));\r\n\r\n\r\n  Object.assign(formData.value,JSON.parse(JSON.stringify(geofence)));\r\n\r\n  show.value = true;\r\n}\r\n\r\ndefineExpose({\r\n  newGeofence,\r\n  editGeofence\r\n});\r\n\r\n\r\nconst doEditArea = ()=>{\r\n  store.dispatch(\"geofences/enableEditing\",formData.value.type)\r\n}\r\n\r\nconst doCancel = ()=>{\r\n  show.value = false;\r\n}\r\n\r\nconst getParsedArea = ()=>{\r\n    const type = formData.value.type;\r\n    const params = store.state.geofences.mapPointEditingParams;\r\n    if(type==='CIRCLE'){\r\n      return 'CIRCLE ('+params[0]+' '+params[1]+', '+params[2]+')';\r\n    }else if(type==='LINESTRING'){\r\n      let tmp = 'LINESTRING ('\r\n\r\n      params.forEach((p)=>{\r\n        tmp+=p[0]+' '+p[1]+', ';\r\n      })\r\n\r\n      tmp = tmp.substring(0,tmp.length-2);\r\n\r\n      tmp+= ')';\r\n\r\n      return tmp;\r\n    }else if(type==='POLYGON'){\r\n      let tmp = 'POLYGON(('\r\n\r\n      params.forEach((p)=>{\r\n        tmp+=p[0]+' '+p[1]+', ';\r\n      })\r\n\r\n      tmp = tmp.substring(0,tmp.length-2);\r\n\r\n      tmp+= '))';\r\n\r\n      return tmp;\r\n    }\r\n\r\n\r\n}\r\n\r\nconst doSave = ()=>{\r\n\r\n  const tmp = JSON.parse(JSON.stringify(defaultTraccarGeofenceData));\r\n\r\n  tmp.name = formData.value.name;\r\n  tmp.area = getParsedArea();\r\n\r\n  store.dispatch(\"geofences/save\",tmp).then(()=>{\r\n      show.value = false;\r\n  })\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n.el-button-group{\r\n  display: flex !important;\r\n}\r\n\r\n.el-button-group .el-button--large{\r\n  flex: 1 !important;\r\n}\r\n\r\n.el-select.el-select--large{\r\n  width: 100%;\r\n}\r\n\r\n.el-dialog__header,.el-dialog__body,.el-dialog__footer{\r\n  padding: 0px !important;\r\n}\r\n\r\n.el-dialog__footer{\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-tabs__nav-wrap{\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n}\r\n\r\n.el-tabs__content{\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n}\r\n\r\n.el-form--label-top .el-form-item__label{\r\n  padding: 0px !important;\r\n  margin-bottom: -5px !important;\r\n}\r\n.el-form-item{\r\n  margin-bottom: 5px !Important;\r\n}\r\n\r\n.isCar{\r\n  border: #05a7e3 1px solid !important;\r\n}\r\n</style>","import script from \"./edit-geofence.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./edit-geofence.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./edit-geofence.vue?vue&type=style&index=0&id=55b808ee&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}