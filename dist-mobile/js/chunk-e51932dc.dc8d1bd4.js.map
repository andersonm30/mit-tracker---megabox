{"version":3,"sources":["webpack:///./src/tarkan/components/views/edit-attribute.vue","webpack:///./src/tarkan/components/views/edit-attribute.vue?5255","webpack:///./src/templates/computed.vue","webpack:///./src/templates/computed.vue?4f7a","webpack:///./src/templates/computed.vue?a984","webpack:///./src/tarkan/components/views/edit-attribute.vue?d705"],"names":["defaultGeofenceData","store","deviceList","show","tab","changeNative","formData","deviceId","resultExp","timer","testExp","window","$traccar","attributeTest","value","then","data","catch","r","response","expChanged","clearInterval","setTimeout","newAttribute","JSON","parse","stringify","editAttribute","attribute","defaultDeviceData","Object","assign","doCancel","doDelete","confirm","dispatch","id","title","message","type","doSave","tmp","selectedDevices","selected","length","device","console","log","name","linkObjects","attributeId","__exports__","query","editAttributeRef","filteredDevices","state","attributes","attributesList","filter","d","description","toLowerCase","match"],"mappings":"k8BAsGMA,EAAsB,CAC1B,GAAK,EACL,YAAc,GACd,UAAY,GACZ,WAAa,GACb,KAAO,UAWHC,EAAQ,iBAIRC,EAAa,iBAAI,MACjBC,EAAO,kBAAI,GACXC,EAAM,iBAAI,SAEVC,EAAe,kBAAI,GAKnBC,EAAW,iBAAIN,GACfO,EAAW,iBAAI,GACfC,EAAY,iBAAI,IAElBC,EAAQ,KAENC,EAAU,WACdC,OAAOC,SAASC,cAAcN,EAASO,MAAMR,EAASQ,OAAOC,MAAK,YAAU,IAARC,EAAQ,EAARA,KAClER,EAAUM,MAAQE,KACjBC,OAAM,SAACC,GACRV,EAAUM,MAAQI,EAAEC,SAASH,SAI3BI,EAAa,WACZX,GACDY,cAAcZ,GAGI,IAAjBF,EAASO,QAEVL,EAAQa,YAAW,WAChBZ,MACA,OAIHa,EAAe,WAEjBjB,EAASQ,MAAQU,KAAKC,MAAMD,KAAKE,UAAU1B,IAC3CG,EAAKW,OAAQ,GAGXa,EAAgB,SAACC,GAGrBtB,EAASQ,MAAQU,KAAKC,MAAMD,KAAKE,UAAUG,oBAG3CC,OAAOC,OAAOzB,EAASQ,MAAMU,KAAKC,MAAMD,KAAKE,UAAUE,KAEvDzB,EAAKW,OAAQ,GAGf,EAAa,CACXS,eACAI,kBAMF,IAAMK,EAAW,WACf7B,EAAKW,OAAQ,GAGTmB,EAAW,WACf,OAAaC,QAAQ,oDAAoD,gBAAgBnB,MAAK,WAC5Fd,EAAMkC,SAAS,oBAAoB7B,EAASQ,MAAMsB,IAAIrB,MAAK,WACzDZ,EAAKW,OAAQ,EACb,eAAe,CACbuB,MAAO,OACPC,QAAS,0CACTC,KAAM,gBAORC,EAAS,WAEb,eAAe,CACbH,MAAO,OACPC,QAAS,8BACTC,KAAM,SAGR,IAAME,EAAMjB,KAAKC,MAAMD,KAAKE,UAAU1B,IAEtC8B,OAAOC,OAAOU,EAAInC,EAASQ,OAI3Bb,EAAMkC,SAAS,kBAAkBM,GAAK1B,KAAtC,yDAA2C,WAAOC,GAAP,gGAInC0B,EAAkBxC,EAAWY,MAAM6B,WAEtCD,EAAgBE,OAAO,GANe,kCAOrBF,GAPqB,gEAO/BG,EAP+B,QASrCC,QAAQC,IAAIF,GAEZ,eAAe,CACbR,MAAO,OACPC,QAAS,sCAAsCO,EAAOG,KACtDT,KAAM,SAd6B,UAiB/B5B,OAAOC,SAASqC,YAAY,CAAC1C,SAAUsC,EAAOT,GAAGc,YAAalC,EAAKoB,KAjBpC,kJAuBzC,eAAe,CACbC,MAAO,WACPC,QAAS,6CACTC,KAAM,YAGRpC,EAAKW,OAAQ,EA7B4B,gEAA3C,wD,k8IClNF,MAAMqC,EAAc,EAEL,Q,qgCCoCf,IAAMlD,EAAQ,iBAERmD,EAAQ,iBAAI,IACZC,EAAmB,iBAAI,MAKvBC,EAAkB,uBAAS,WAC/B,MAAmB,KAAhBF,EAAMtC,MACAb,EAAMsD,MAAMC,WAAWC,eAEvBxD,EAAMsD,MAAMC,WAAWC,eAAeC,QAAO,SAACC,GACnD,OAAOA,EAAEC,YAAYC,cAAcC,MAAMV,EAAMtC,MAAM+C,qB,u/CClD3D,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,gB,2DCRf,W,oCCAA,W","file":"js/chunk-e51932dc.dc8d1bd4.js","sourcesContent":["<template>\r\n  <el-dialog :lock-scroll=\"true\" v-model=\"show\" title=\"Teste\">\r\n\r\n    <template v-slot:title>\r\n      <div  style=\"border-bottom: #e0e0e0 1px solid;padding: 20px;\">\r\n        <div class=\"modal-title\" >Cadastrar Atributo</div>\r\n      </div>\r\n    </template>\r\n    <template v-slot:footer>\r\n      <div  style=\"border-top: #e0e0e0 1px solid;padding: 20px;display: flex;justify-content: space-between\">\r\n        <div><el-button  type=\"danger\" @click=\"doDelete()\">Excluir</el-button></div>\r\n        <div><el-button type=\"danger\" plain @click=\"doCancel()\">Cancelar</el-button>\r\n        <el-button type=\"primary\" @click=\"doSave()\">Salvar</el-button></div>\r\n      </div>\r\n    </template>\r\n\r\n    <el-tabs v-model=\"tab\">\r\n      <el-tab-pane label=\"Comando\" name=\"first\">\r\n        <el-form label-width=\"120px\" label-position=\"top\">\r\n          <el-form-item label=\"Descrição\" >\r\n            <el-input v-model=\"formData.description\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"Atributo\" >\r\n            <el-input v-model=\"formData.attribute\"></el-input>\r\n          </el-form-item>\r\n\r\n          <div style=\"display: flex;\">\r\n            <div style=\"flex: 1;margin-right: 5px;\">\r\n            <el-form-item label=\"Expressão\">\r\n              <el-input\r\n                  v-model=\"formData.expression\"\r\n                  :autosize=\"{minRows: 4}\"\r\n                  type=\"textarea\"\r\n                  placeholder=\"Please input\"\r\n                  @keyup=\"expChanged()\"\r\n              />\r\n            </el-form-item>\r\n              </div>\r\n\r\n            <div style=\"flex: 1;margin-left: 5px;\">\r\n\r\n              <el-form-item label=\"Testar Atributo em\">\r\n              <el-select v-model=\"deviceId\" @change=\"testExp()\" :value-key=\"'id'\" filterable placeholder=\"Grupo\" :size=\"'large'\" :no-data-text=\"'Nenhum tipo disponível'\">\r\n                <el-option\r\n                    label=\"Não Testar\"\r\n                    :value=\"0\"\r\n\r\n                >\r\n                </el-option>\r\n                <el-option\r\n                    v-for=\"item in store.state.devices.deviceList\"\r\n                    :key=\"item.id\"\r\n                    :label=\"item.name\"\r\n                    :value=\"item.id\"\r\n\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n              </el-form-item>\r\n            <el-form-item label=\"Resultado\">\r\n              <el-input\r\n                  disabled\r\n                  v-model=\"resultExp\"\r\n                  :autosize=\"{minRows: 4}\"\r\n                  type=\"textarea\"\r\n                  placeholder=\"Please input\"\r\n              />\r\n            </el-form-item>\r\n              </div>\r\n          </div>\r\n\r\n\r\n          <br>\r\n          <el-switch\r\n              v-model=\"changeNative\"\r\n              active-text=\"Aplicar este atributo aos meus favoritos\"\r\n          >\r\n          </el-switch>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        </el-form>\r\n\r\n\r\n      </el-tab-pane>\r\n\r\n      <el-tab-pane label=\"Dispositivos\" :name=\"devices\">\r\n        <tab-devices ref=\"deviceList\"></tab-devices>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </el-dialog>\r\n</template>\r\n\r\n\r\n<script setup>\r\n\r\nimport TabDevices from \"./tab-devices\";\r\n\r\nconst defaultGeofenceData = {\r\n  \"id\":0,\r\n  \"description\":\"\",\r\n  \"attribute\":\"\",\r\n  \"expression\":\"\",\r\n  \"type\":\"string\"}\r\n\r\n\r\nimport {ElMessageBox, ElNotification} from 'element-plus';\r\nimport {ref, defineExpose} from 'vue';\r\nimport {useStore} from 'vuex'\r\n\r\n\r\n\r\n\r\n\r\nconst store = useStore();\r\n\r\nimport {ElDialog,ElForm,ElFormItem,ElInput} from 'element-plus'\r\n\r\nconst deviceList = ref(null);\r\nconst show = ref(false);\r\nconst tab = ref('first');\r\n\r\nconst changeNative = ref(false);\r\n\r\n\r\n\r\n// eslint-disable-next-line no-undef\r\nconst formData = ref(defaultGeofenceData);\r\nconst deviceId = ref(0);\r\nconst resultExp = ref('');\r\n\r\nlet timer = null;\r\n\r\nconst testExp = ()=>{\r\n  window.$traccar.attributeTest(deviceId.value,formData.value).then(({data})=>{\r\n    resultExp.value = data;\r\n  }).catch((r)=>{\r\n    resultExp.value = r.response.data;\r\n  })\r\n}\r\n\r\nconst expChanged = ()=>{\r\n    if(timer){\r\n      clearInterval(timer);\r\n    }\r\n\r\n    if(deviceId.value!==0) {\r\n\r\n      timer = setTimeout(() => {\r\n         testExp();\r\n      }, 1000)\r\n    }\r\n}\r\n\r\nconst newAttribute = ()=>{\r\n  // eslint-disable-next-line no-undef\r\n    formData.value = JSON.parse(JSON.stringify(defaultGeofenceData));\r\n    show.value = true;\r\n}\r\n\r\nconst editAttribute = (attribute)=>{\r\n\r\n  // eslint-disable-next-line no-undef\r\n  formData.value = JSON.parse(JSON.stringify(defaultDeviceData));\r\n\r\n\r\n  Object.assign(formData.value,JSON.parse(JSON.stringify(attribute)));\r\n\r\n  show.value = true;\r\n}\r\n\r\ndefineExpose({\r\n  newAttribute,\r\n  editAttribute\r\n});\r\n\r\n\r\n\r\n\r\nconst doCancel = ()=>{\r\n  show.value = false;\r\n}\r\n\r\nconst doDelete = ()=>{\r\n  ElMessageBox.confirm('Deseja realmente excluir este atributo computado?','Tem certeza?').then(()=>{\r\n    store.dispatch(\"attributes/delete\",formData.value.id).then(()=>{\r\n      show.value = false;\r\n      ElNotification({\r\n        title: 'Info',\r\n        message: 'Atributo computado deletado com suceso.',\r\n        type: 'info',\r\n      });\r\n    })\r\n  });\r\n}\r\n\r\n\r\nconst doSave = ()=>{\r\n\r\n  ElNotification({\r\n    title: 'Info',\r\n    message: 'Cadastrando seu atributo...',\r\n    type: 'info',\r\n  });\r\n\r\n  const tmp = JSON.parse(JSON.stringify(defaultGeofenceData));\r\n\r\n  Object.assign(tmp,formData.value);\r\n\r\n\r\n\r\n  store.dispatch(\"attributes/save\",tmp).then(async (data)=>{\r\n\r\n\r\n\r\n    const selectedDevices = deviceList.value.selected;\r\n\r\n    if(selectedDevices.length>0) {\r\n      for(let device of selectedDevices){\r\n\r\n        console.log(device);\r\n\r\n        ElNotification({\r\n          title: 'Info',\r\n          message: 'Vinculando atributo ao dispositivo '+device.name,\r\n          type: 'info',\r\n        });\r\n\r\n        await window.$traccar.linkObjects({deviceId: device.id,attributeId: data.id});\r\n\r\n      }\r\n    }\r\n\r\n\r\n    ElNotification({\r\n      title: 'Successo',\r\n      message: 'Atributo computado cadastrado com sucesso.',\r\n      type: 'success',\r\n    });\r\n\r\n    show.value = false;\r\n\r\n  })\r\n\r\n\r\n\r\n\r\n  /*\r\n\r\n  tmp.name = formData.value.name;\r\n  tmp.area = getParsedArea();\r\n\r\n  store.dispatch(\"geofences/save\",tmp).then(()=>{\r\n      show.value = false;\r\n  })*/\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n.el-button-group{\r\n  display: flex !important;\r\n}\r\n\r\n.el-button-group .el-button--large{\r\n  flex: 1 !important;\r\n}\r\n\r\n.el-select.el-select--large{\r\n  width: 100%;\r\n}\r\n\r\n.el-dialog__header,.el-dialog__body,.el-dialog__footer{\r\n  padding: 0px !important;\r\n}\r\n\r\n.el-dialog__footer{\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-tabs__nav-wrap{\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n}\r\n\r\n.el-tabs__content{\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n}\r\n\r\n.el-form--label-top .el-form-item__label{\r\n  padding: 0px !important;\r\n  margin-bottom: -5px !important;\r\n}\r\n.el-form-item{\r\n  margin-bottom: 5px !Important;\r\n}\r\n\r\n.isCar{\r\n  border: #05a7e3 1px solid !important;\r\n}\r\n</style>","import script from \"./edit-attribute.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./edit-attribute.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./edit-attribute.vue?vue&type=style&index=0&id=71bb7308&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n\r\n  <edit-attribute ref=\"editAttributeRef\"></edit-attribute>\r\n\r\n  <div style=\"display: flex;justify-content: space-between;align-content: space-between;\">\r\n    <div style=\"width: 30%;\"></div>\r\n\r\n    <el-input v-model=\"query\" placeholder=\"Buscar Atributo\" style=\"--el-input-border-radius: 5px;margin-right: 5px;\"></el-input>\r\n\r\n    <el-tooltip\r\n        effect=\"dark\"\r\n        content=\"Cadastrar Atributo\"\r\n        placement=\"bottom\"\r\n    >\r\n      <el-button type=\"primary\" @click=\"editAttributeRef.newAttribute()\"><i class=\"fas fa-plus\"></i></el-button>\r\n    </el-tooltip>\r\n\r\n  </div>\r\n\r\n  <div style=\"border: silver 1px solid; border-radius: 5px;margin-top: 20px;height: calc(100vh - 200px);\">\r\n    <div class=\"device\">\r\n      <div class=\"name\" style=\"font-size: 12px;font-weight: 100;padding: 5px;width: calc(60% + 3.5px)\">Titulo</div>\r\n      <div class=\"name\" style=\"font-size: 12px;font-weight: 100;padding: 5px;flex: 2;\">Tipo</div>\r\n    </div>\r\n    <div style=\"overflow-x: hidden;overflow-y: scroll;height: calc(100vh - 230px);\">\r\n\r\n      <div v-for=\"(device) in filteredDevices\" :key=\"device.id\" @click=\"editAttributeRef.editAttribute(device)\" class=\"device\">\r\n\r\n        <div class=\"name\" >{{device.description}}</div>\r\n        <div  class=\"name\" style=\"flex: 2;\">\r\n          {{device.type}}\r\n        </div>\r\n      </div></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport {ref,computed} from 'vue';\r\nimport {useStore} from \"vuex\"\r\nimport EditAttribute from \"../tarkan/components/views/edit-attribute\";\r\n\r\nconst store = useStore();\r\n\r\nconst query = ref('');\r\nconst editAttributeRef = ref(null);\r\n\r\n\r\n\r\n\r\nconst filteredDevices = computed(()=>{\r\n  if(query.value === ''){\r\n    return store.state.attributes.attributesList;\r\n  }else {\r\n    return store.state.attributes.attributesList.filter((d) => {\r\n      return d.description.toLowerCase().match(query.value.toLowerCase());\r\n    });\r\n  }\r\n\r\n})\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.device{\r\n  border-bottom: silver 1px solid;\r\n  display: flex;\r\n  flex-direction: row;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  margin-right: -1px;\r\n}\r\n.device:first-child{\r\n  background: rgba(0,0,0,0.03)\r\n}\r\n\r\n.device:hover{\r\n  background: rgba(0,0,0,0.03);\r\n}\r\n\r\n\r\n\r\n.device .name{\r\n  font-size: 12px;\r\n  padding: 7px;\r\n  text-align: left;\r\n  line-height: 14px;\r\n  font-weight: 800;\r\n  border-right: silver 1px dotted;\r\n  width: 60%;\r\n}\r\n\r\n.icons{\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row-reverse;\r\n  flex: 1;\r\n  font-size: 11px;\r\n}\r\n\r\n.icons div{\r\n  display: flex;\r\n  justify-content: center;\r\n  flex: 1;\r\n  border-right: silver 1px dotted;\r\n  padding: 7px;\r\n  font-size: 11px;\r\n}\r\n.icons div i{\r\n  font-size: 14px;\r\n}\r\n\r\n.icons div:first-child{\r\n  border-right: none;\r\n}\r\n\r\n.icons div span{\r\n  display: flex;\r\n  padding: 2px;\r\n  padding-left: 5px;\r\n}\r\n\r\n.subtitle{\r\n  margin-top: 20px;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  text-transform: uppercase;\r\n  color: var(--text-black);\r\n}\r\n\r\n.subtitle i{\r\n  font-size: 12px;\r\n  margin-right: 3px;\r\n}\r\n\r\n.updated{\r\n  font-size: 12px;\r\n  margin-top: 5px;\r\n  color: var(--text-silver);\r\n}\r\n\r\n.address{\r\n  color: var(--text-blue);\r\n  font-size: 15px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n  padding: 10px;\r\n  line-height: 20px;\r\n}\r\n\r\n</style>","import script from \"./computed.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./computed.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./computed.vue?vue&type=style&index=0&id=2e95c581&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\Vue3\\\\tarkan-basic\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2e95c581\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./computed.vue?vue&type=style&index=0&id=2e95c581&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./edit-attribute.vue?vue&type=style&index=0&id=71bb7308&lang=css\""],"sourceRoot":""}